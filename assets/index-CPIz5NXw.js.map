{"version":3,"file":"index-CPIz5NXw.js","sources":["../../src/assets/forest.jpg","../../src/assets/icon_murid.PNG","../../src/assets/icon_guru.png","../../src/assets/icon_wali.png","../../src/components/WelcomePage.jsx","../../src/config/mockData.js","../../src/services/database.js","../../src/assets/anjing.png","../../src/assets/babi.png","../../src/assets/bebek.png","../../src/assets/gurita.png","../../src/assets/harimau.png","../../src/assets/kelinci.png","../../src/assets/kucing.png","../../src/assets/sapi.png","../../src/assets/serigala.png","../../src/assets/singa.png","../../src/components/Login.jsx","../../src/main-siswa.jsx","../../src/CategoryPage.jsx","../../src/GamePage.jsx","../../src/HasilPage.jsx","../../src/Skor.jsx","../../src/HasilRetryPage.jsx","../../src/pages/Category.jsx","../../src/services/nilaiService.js","../../src/guru/StudentHistoryModal.jsx","../../src/guru/components/ModalCatatan.jsx","../../src/guru/components/ModalLihatCatatan.jsx","../../src/guru/components/EditStudentModal.jsx","../../src/guru/components/AddStudentModal.jsx","../../src/guru/components/KelasModal.jsx","../../src/guru/TabGuru.jsx","../../src/assets/bronze.PNG","../../src/assets/silver.PNG","../../src/assets/gold.PNG","../../src/assets/mainsiswa.jpg","../../src/pages/kelas/kelas2/MainSiswa2.jsx","../../src/pages/kelas/kelas4/main-siswa4.jsx","../../src/pages/kelas/kelas4/Category4_Bab1.jsx","../../src/pages/kelas/kelas4/Category4_Bab2.jsx","../../src/pages/kelas/kelas4/Category4_Bab3.jsx","../../src/pages/kelas/kelas4/Category4_Bab4.jsx","../../src/pages/kelas/kelas4/Category4_Bab5.jsx","../../src/pages/kelas/kelas4/Category4_Bab6.jsx","../../src/App.jsx","../../src/context/AuthContext.jsx","../../src/debug_connection.js","../../src/main.jsx"],"sourcesContent":["export default \"__VITE_ASSET__DRLXEDtq__\"","export default \"__VITE_ASSET__B3hWQQTm__\"","export default \"__VITE_ASSET__BgBONrbc__\"","export default \"__VITE_ASSET__D5ZvMH8C__\"","import React, { useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"../App.css\";\r\nimport background from \"../assets/forest.jpg\";\r\nimport logo from \"../assets/logo.png\";\r\nimport iconSiswa from \"../assets/icon_murid.PNG\";\r\nimport iconGuru from \"../assets/icon_guru.png\";\r\nimport iconOrtu from \"../assets/icon_wali.png\";\r\n\r\nexport default function WelcomePage() {\r\n  const navigate = useNavigate();\r\n  const [showRoleSelection, setShowRoleSelection] = useState(false);\r\n  const [showAdminLogin, setShowAdminLogin] = useState(false);\r\n\r\n  const handleStartClick = () => {\r\n    setShowRoleSelection(true);\r\n  };\r\n\r\n  const handleRoleSelect = (role) => {\r\n    // Simpan role yang dipilih di localStorage\r\n    localStorage.setItem(\"selectedRole\", role);\r\n\r\n    // Navigasi ke halaman login\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  const handleAdminLoginClick = () => {\r\n    setShowAdminLogin(false);\r\n    localStorage.setItem(\"selectedRole\", \"admin\");\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"main-container\"\r\n      style={{\r\n        backgroundImage: `url(${background})`,\r\n      }}\r\n    >\r\n      <div className=\"overlay\">\r\n\r\n          <img src={logo} alt=\"Logo\" className=\"logo\" />\r\n          <button\r\n            className=\"admin-login-button\"\r\n            onClick={() => setShowAdminLogin(true)}\r\n          >\r\n            Admin\r\n          </button>\r\n\r\n\r\n        <main className=\"content\">\r\n          <motion.h1\r\n            initial={{ opacity: 0, y: -20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 1 }}\r\n            className=\"main-title\"\r\n            style={{ color: \"white\" }}\r\n          >\r\n            Siap Jadi Jagoan Matematika?\r\n          </motion.h1>\r\n          <motion.h2\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.5 }}\r\n            className=\"subtitle\"\r\n          >\r\n            Ayo Temani Rubi Berhitung!\r\n          </motion.h2>\r\n\r\n          <motion.button\r\n            initial={{ opacity: 0, scale: 0.9 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            transition={{ delay: 0.5, duration: 0.5 }}\r\n            className=\"book-button\"\r\n            onClick={handleStartClick}\r\n          >\r\n            MULAI SEKARANG\r\n          </motion.button>\r\n        </main>\r\n      </div>\r\n\r\n      {/* Pop-up Pemilihan Role */}\r\n      {showRoleSelection && (\r\n        <div className=\"popup-overlay\">\r\n          <motion.div\r\n            className=\"popup role-selection-popup\"\r\n            initial={{ scale: 0.8, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <h2>Pilih Peran Kamu</h2>\r\n            <div className=\"role-buttons\">\r\n              <button\r\n                className=\"role-button role-siswa\"\r\n                onClick={() => handleRoleSelect(\"siswa\")}\r\n              >\r\n                <div className=\"role-icon\">\r\n                  <img src={iconSiswa} alt=\"Siswa\" />\r\n                </div>\r\n                <span>Siswa</span>\r\n              </button>\r\n\r\n              <button\r\n                className=\"role-button role-guru\"\r\n                onClick={() => handleRoleSelect(\"guru\")}\r\n              >\r\n                <div className=\"role-icon\">\r\n                  <img src={iconGuru} alt=\"Guru\" />\r\n                </div>\r\n                <span>Guru</span>\r\n              </button>\r\n\r\n              <button\r\n                className=\"role-button role-ortu\"\r\n                onClick={() => handleRoleSelect(\"ortu\")}\r\n              >\r\n                <div className=\"role-icon\">\r\n                  <img src={iconOrtu} alt=\"Orang Tua\" />\r\n                </div>\r\n                <span>Orang Tua</span>\r\n              </button>\r\n            </div>\r\n            <button\r\n              className=\"close-popup-button\"\r\n              onClick={() => setShowRoleSelection(false)}\r\n            >\r\n              Kembali\r\n            </button>\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Pop-up Admin Login */}\r\n      {showAdminLogin && (\r\n        <div className=\"popup-overlay\">\r\n          <motion.div\r\n            className=\"popup admin-confirm-popup\"\r\n            initial={{ scale: 0.8, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <h2>Masuk sebagai Admin</h2>\r\n            <p>Anda akan diarahkan ke halaman login admin.</p>\r\n            <div className=\"admin-confirm-buttons\">\r\n              <button\r\n                className=\"confirm-button\"\r\n                onClick={handleAdminLoginClick}\r\n              >\r\n                Lanjutkan\r\n              </button>\r\n              <button\r\n                className=\"close-popup-button\"\r\n                onClick={() => setShowAdminLogin(false)}\r\n              >\r\n                Batal\r\n              </button>\r\n            </div>\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// Data dummy untuk aplikasi dalam mode offline\r\n// Saat Supabase tidak bisa terhubung, aplikasi akan menggunakan data ini\r\n\r\n// Data siswa dari skema database\r\nexport const dummySiswa = [\r\n  {\r\n    id_siswa: 1,\r\n    nis: \"2023001\",\r\n    nama: \"Rudi Hartono\",\r\n    id_kelas: 1,\r\n    tanggal_lahir: \"2012-03-14\",\r\n    alamat: \"Jl. Cemara No.8\",\r\n    id_role: 4,\r\n  },\r\n  {\r\n    id_siswa: 2,\r\n    nis: \"2023002\",\r\n    nama: \"Nisa Kurnia\",\r\n    id_kelas: 2,\r\n    tanggal_lahir: \"2012-06-21\",\r\n    alamat: \"Jl. Melati No.9\",\r\n    id_role: 4,\r\n  },\r\n  {\r\n    id_siswa: 3,\r\n    nis: \"123131\",\r\n    nama: \"Fachri Aditya Rizky\",\r\n    id_kelas: 1,\r\n    alamat: \"sdfscds\",\r\n    id_role: 4,\r\n  },\r\n];\r\n\r\n// Data guru dari skema database\r\nexport const dummyGuru = [\r\n  {\r\n    id_guru: 1,\r\n    nuptk: \"198401232005011001\",\r\n    nama: \"Ahmad Fauzi\",\r\n    no_telp: \"081234567890\",\r\n    alamat: \"Jl. Pendidikan No.1\",\r\n    id_role: 2,\r\n  },\r\n  {\r\n    id_guru: 2,\r\n    nuptk: \"197905152003021002\",\r\n    nama: \"Lilis Kusuma\",\r\n    no_telp: \"082134567891\",\r\n    alamat: \"Jl. Merdeka No.2\",\r\n    id_role: 2,\r\n  },\r\n];\r\n\r\n// Data kelas\r\nexport const dummyKelas = [\r\n  {\r\n    id_kelas: 1,\r\n    nama_kelas: \"5A\",\r\n    id_guru: 1,\r\n  },\r\n  {\r\n    id_kelas: 2,\r\n    nama_kelas: \"5B\",\r\n    id_guru: 2,\r\n  },\r\n];\r\n\r\n// Data materi\r\nexport const dummyMateri = [\r\n  {\r\n    id_materi: 1,\r\n    nama_materi: \"Penjumlahan dan Pengurangan\",\r\n    kategori: \"Bilangan 1-10000\",\r\n    tipe_pembuat: \"guru\",\r\n    id_pembuat: 1,\r\n  },\r\n  {\r\n    id_materi: 2,\r\n    nama_materi: \"Membaca Cerita Pendek\",\r\n    kategori: \"Membaca bilangan\",\r\n    tipe_pembuat: \"admin\",\r\n    id_pembuat: 2,\r\n  },\r\n  {\r\n    id_materi: 3,\r\n    nama_materi: \"Lingkungan Sekitar\",\r\n    kategori: \"Menghitung bilangan\",\r\n    tipe_pembuat: \"guru\",\r\n    id_pembuat: 2,\r\n  },\r\n];\r\n\r\n// Kredensial statis - disesuaikan dengan data admin di database\r\nexport const staticCredentials = {\r\n  admin: [\r\n    {\r\n      username: \"budi.setiawan\",\r\n      password: \"admin123\",\r\n      type: \"superadmin\",\r\n      nama: \"Budi Setiawan\",\r\n    },\r\n    {\r\n      username: \"siti.aminah\",\r\n      password: \"pass1234\",\r\n      type: \"admin_sekolah\",\r\n      nama: \"Siti Aminah\",\r\n    },\r\n    {\r\n      username: \"dodi.pratama\",\r\n      password: \"pass1234\",\r\n      type: \"admin_dev\",\r\n      nama: \"Dodi Pratama\",\r\n    },\r\n  ],\r\n  guru: { username: \"guru\", password: \"guru123\" },\r\n  ortu: { username: \"ortu\", password: \"ortu123\" },\r\n};\r\n","import supabase from \"../config/supabase\";\r\nimport { dummySiswa, dummyGuru } from \"../config/mockData\";\r\n\r\n// Connection state tracking\r\nlet connectionState = {\r\n  isOnline: true,\r\n  lastChecked: null,\r\n  retryCount: 0,\r\n  maxRetries: 3,\r\n};\r\n\r\n// Check connection status\r\nexport const checkConnection = async () => {\r\n  try {\r\n    const isConnected = await testConnection();\r\n    connectionState.isOnline = isConnected;\r\n    connectionState.lastChecked = Date.now();\r\n    return isConnected;\r\n  } catch (error) {\r\n    console.error(\"[Database] Connection check failed:\", error);\r\n    connectionState.isOnline = false;\r\n    connectionState.lastChecked = Date.now();\r\n    return false;\r\n  }\r\n};\r\n\r\n// Test connection with Supabase\r\nexport const testConnection = async (timeout = 3000) => {\r\n  if (!supabase) {\r\n    console.error(\"[Database] Supabase client not initialized\");\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    return await supabase.testConnection(timeout);\r\n  } catch (error) {\r\n    console.error(\"[Database] Connection test failed:\", error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengambil data siswa\r\nexport const getSiswa = async (id) => {\r\n  try {\r\n    if (!connectionState.isOnline) {\r\n      console.log(\"[Database] Working in offline mode - getSiswa\");\r\n      return id ? dummySiswa.find((s) => s.id_siswa === id) : dummySiswa;\r\n    }\r\n\r\n    if (id) {\r\n      const { data, error } = await supabase\r\n        .from(\"siswa\")\r\n        .select(\"*, kelas(nama_kelas), wali(nama)\")\r\n        .eq(\"id_siswa\", id)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      return data;\r\n    } else {\r\n      const { data, error } = await supabase\r\n        .from(\"siswa\")\r\n        .select(\"*, kelas(nama_kelas), wali(nama)\");\r\n\r\n      if (error) throw error;\r\n      return data;\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[Database] getSiswa error:\", error);\r\n    // Fallback to offline data\r\n    return id ? dummySiswa.find((s) => s.id_siswa === id) : dummySiswa;\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengambil data guru\r\nexport const getGuru = async (id) => {\r\n  try {\r\n    if (!connectionState.isOnline) {\r\n      console.log(\"[Database] Working in offline mode - getGuru\");\r\n      return id ? dummyGuru.find((g) => g.id_guru === id) : dummyGuru;\r\n    }\r\n\r\n    if (id) {\r\n      const { data, error } = await supabase\r\n        .from(\"guru\")\r\n        .select(\"*\")\r\n        .eq(\"id_guru\", id)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      return data;\r\n    } else {\r\n      const { data, error } = await supabase.from(\"guru\").select(\"*\");\r\n\r\n      if (error) throw error;\r\n      return data;\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[Database] getGuru error:\", error);\r\n    // Fallback to offline data\r\n    return id ? dummyGuru.find((g) => g.id_guru === id) : dummyGuru;\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengambil data wali\r\nexport const getwali = async (id) => {\r\n  if (id) {\r\n    const { data, error } = await supabase\r\n      .from(\"wali\")\r\n      .select(\"*\")\r\n      .eq(\"id_wali\", id)\r\n      .single();\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  } else {\r\n    const { data, error } = await supabase.from(\"wali\").select(\"*\");\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengambil data kelas\r\nexport const getKelas = async (id) => {\r\n  if (id) {\r\n    const { data, error } = await supabase\r\n      .from(\"kelas\")\r\n      .select(\"*, guru(nama)\")\r\n      .eq(\"id_kelas\", id)\r\n      .single();\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  } else {\r\n    const { data, error } = await supabase\r\n      .from(\"kelas\")\r\n      .select(\"*, guru(nama)\");\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengambil data materi\r\nexport const getMateri = async () => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from(\"materi_dengan_pembuat\")\r\n      .select(\"*\");\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Get materi error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengambil data nilai siswa\r\nexport const getNilaiSiswa = async (id_siswa) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from(\"nilai\")\r\n      .select(\r\n        `\r\n        *,\r\n        materi (\r\n          nama_materi,\r\n          kategori\r\n        )\r\n      `\r\n      )\r\n      .eq(\"id_siswa\", id_siswa);\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Get nilai error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Fungsi untuk menyimpan nilai siswa\r\nexport const saveNilai = async (id_siswa, id_materi, nilai) => {\r\n  try {\r\n    const { data, error } = await supabase.from(\"nilai\").insert([\r\n      {\r\n        id_siswa,\r\n        id_materi,\r\n        nilai,\r\n        tanggal: new Date(),\r\n      },\r\n    ]);\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Save nilai error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Fungsi untuk mengambil data kemajuan siswa\r\nexport const getKemajuanSiswa = async (id_siswa) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from(\"kemajuan\")\r\n      .select(\"*\")\r\n      .eq(\"id_siswa\", id_siswa)\r\n      .order(\"tanggal\", { ascending: false });\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Get kemajuan error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Fungsi untuk mencatat kemajuan siswa\r\nexport const saveKemajuan = async (id_siswa, deskripsi) => {\r\n  try {\r\n    const { data, error } = await supabase.from(\"kemajuan\").insert([\r\n      {\r\n        id_siswa,\r\n        deskripsi,\r\n        tanggal: new Date(),\r\n      },\r\n    ]);\r\n\r\n    if (error) throw error;\r\n    return data;\r\n  } catch (error) {\r\n    console.error(\"Save kemajuan error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Login handler with fallback\r\nexport const login = async (username, password, role) => {\r\n  try {\r\n    // Check connection first\r\n    const isOnline = await checkConnection();\r\n\r\n    if (!isOnline) {\r\n      console.log(\"[Database] Working in offline mode\");\r\n      return handleOfflineLogin(username, password, role);\r\n    } // Online mode\r\n    let data;\r\n\r\n    switch (role) {\r\n      case \"siswa\":\r\n        data = await loginSiswa(username, password);\r\n        break;\r\n      case \"guru\":\r\n        data = await loginGuru(username, password);\r\n        break;\r\n      // Add other roles as needed\r\n    }\r\n\r\n    if (!data) {\r\n      throw new Error(\"Invalid credentials\");\r\n    }\r\n\r\n    return {\r\n      user: data,\r\n      session: null, // We're not using Supabase Auth in this case\r\n    };\r\n  } catch (error) {\r\n    console.error(\"[Database] Login error:\", error);\r\n    // Try offline login as last resort\r\n    return handleOfflineLogin(username, password, role);\r\n  }\r\n};\r\n\r\n// Offline login handler\r\nconst handleOfflineLogin = (username, password, role) => {\r\n  let user;\r\n\r\n  switch (role) {\r\n    case \"siswa\":\r\n      user = dummySiswa.find((s) => s.nama === username && s.nis === password);\r\n      break;\r\n    case \"guru\":\r\n      user = dummyGuru.find((g) => g.nama === username && g.nuptk === password);\r\n      break;\r\n    // Add other roles as needed\r\n  }\r\n\r\n  if (!user) {\r\n    throw new Error(\"Invalid credentials\");\r\n  }\r\n\r\n  return {\r\n    user,\r\n    session: null,\r\n    isOffline: true,\r\n  };\r\n};\r\n\r\n// Logout handler\r\nexport const logout = async () => {\r\n  try {\r\n    if (connectionState.isOnline) {\r\n      const { error } = await supabase.auth.signOut();\r\n      if (error) throw error;\r\n    }\r\n\r\n    // Always clear local storage\r\n    localStorage.removeItem(\"isLoggedIn\");\r\n    localStorage.removeItem(\"userRole\");\r\n    localStorage.removeItem(\"userData\");\r\n    localStorage.removeItem(\"selectedAvatar\");\r\n\r\n    return true;\r\n  } catch (error) {\r\n    console.error(\"[Database] Logout error:\", error);\r\n    // Still clear local storage even if Supabase logout fails\r\n    localStorage.clear();\r\n    return true;\r\n  }\r\n};\r\n\r\n// Get current session\r\nexport const getCurrentSession = async () => {\r\n  try {\r\n    if (!connectionState.isOnline) {\r\n      const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n      return isLoggedIn\r\n        ? { user: JSON.parse(localStorage.getItem(\"userData\")) }\r\n        : null;\r\n    }\r\n\r\n    const {\r\n      data: { session },\r\n      error,\r\n    } = await supabase.auth.getSession();\r\n    if (error) throw error;\r\n    return session;\r\n  } catch (error) {\r\n    console.error(\"[Database] Get session error:\", error);\r\n    // Fallback to localStorage\r\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n    return isLoggedIn\r\n      ? { user: JSON.parse(localStorage.getItem(\"userData\")) }\r\n      : null;\r\n  }\r\n};\r\n\r\n// Get current user\r\nexport const getCurrentUser = async () => {\r\n  try {\r\n    const session = await getCurrentSession();\r\n    if (!session) return null;\r\n\r\n    return session.user;\r\n  } catch (error) {\r\n    console.error(\"[Database] Get user error:\", error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Login siswa\r\nexport const loginSiswa = async (nama, nis) => {\r\n  try {\r\n    console.log(\r\n      `[Database] Mencoba login siswa dengan nama: ${nama} dan NIS: ${nis}`\r\n    );\r\n\r\n    // Periksa ketersediaan supabase client\r\n    if (!supabase) {\r\n      console.error(\"[Database] Supabase client tidak tersedia\");\r\n      // Langsung fallback ke data offline\r\n      const offlineSiswa = dummySiswa.find(\r\n        (s) => s.nama === nama && s.nis === nis\r\n      );\r\n      if (!offlineSiswa) {\r\n        throw new Error(\"Siswa tidak ditemukan (offline mode)\");\r\n      }\r\n      console.log(\"[Database] Menggunakan data offline:\", offlineSiswa);\r\n      return offlineSiswa;\r\n    }\r\n\r\n    // Periksa metode from pada supabase client\r\n    if (typeof supabase.from !== \"function\") {\r\n      console.error(\r\n        \"[Database] Metode from tidak tersedia pada supabase client\"\r\n      );\r\n\r\n      // Coba perbaiki metode from dengan cara alternatif\r\n      if (supabase[\"from\"] && typeof supabase[\"from\"] === \"function\") {\r\n        console.log(\r\n          \"[Database] Mencoba memperbaiki metode from dengan cara alternatif\"\r\n        );\r\n        try {\r\n          // Bind metode from ke supabase client\r\n          const fixedFrom = supabase[\"from\"].bind(supabase);\r\n          // Uji metode from yang diperbaiki\r\n          const testTable = fixedFrom(\"siswa\");\r\n          if (testTable && typeof testTable.select === \"function\") {\r\n            console.log(\"[Database] Metode from berhasil diperbaiki\");\r\n            // Tambahkan metode from yang diperbaiki ke supabase client\r\n            supabase.from = fixedFrom;\r\n            // Lanjutkan dengan metode from yang diperbaiki\r\n          } else {\r\n            console.error(\"[Database] Metode from tidak dapat diperbaiki\");\r\n            // Langsung fallback ke data offline\r\n            const offlineSiswa = dummySiswa.find(\r\n              (s) => s.nama === nama && s.nis === nis\r\n            );\r\n            if (!offlineSiswa) {\r\n              throw new Error(\"Siswa tidak ditemukan (offline mode)\");\r\n            }\r\n            console.log(\"[Database] Menggunakan data offline:\", offlineSiswa);\r\n            return offlineSiswa;\r\n          }\r\n        } catch (fixError) {\r\n          console.error(\r\n            \"[Database] Error saat memperbaiki metode from:\",\r\n            fixError\r\n          );\r\n          // Langsung fallback ke data offline\r\n          const offlineSiswa = dummySiswa.find(\r\n            (s) => s.nama === nama && s.nis === nis\r\n          );\r\n          if (!offlineSiswa) {\r\n            throw new Error(\"Siswa tidak ditemukan (offline mode)\");\r\n          }\r\n          console.log(\"[Database] Menggunakan data offline:\", offlineSiswa);\r\n          return offlineSiswa;\r\n        }\r\n      } else {\r\n        // Langsung fallback ke data offline\r\n        const offlineSiswa = dummySiswa.find(\r\n          (s) => s.nama === nama && s.nis === nis\r\n        );\r\n        if (!offlineSiswa) {\r\n          throw new Error(\"Siswa tidak ditemukan (offline mode)\");\r\n        }\r\n        console.log(\"[Database] Menggunakan data offline:\", offlineSiswa);\r\n        return offlineSiswa;\r\n      }\r\n    }\r\n\r\n    // Gunakan REST API langsung jika metode from().select().eq() bermasalah\r\n    try {\r\n      console.log(\"[Database] Mencoba dengan metode Supabase client\");\r\n      const { data, error } = await supabase\r\n        .from(\"siswa\")\r\n        .select(\r\n          `\r\n          *,\r\n          kelas (\r\n            id_kelas,\r\n            nama_kelas\r\n          )\r\n        `\r\n        )\r\n        .eq(\"nama\", nama)\r\n        .eq(\"nis\", nis);\r\n\r\n      console.log(\"[Database] Hasil query Supabase:\", { data, error });\r\n\r\n      if (error) {\r\n        console.error(\"[Database] Error dengan metode Supabase client:\", error);\r\n        throw error;\r\n      }\r\n\r\n      if (!data || data.length === 0) {\r\n        console.warn(\"[Database] Tidak ada data siswa yang ditemukan\");\r\n        throw new Error(\"Siswa tidak ditemukan\");\r\n      }\r\n\r\n      console.log(\"[Database] Login siswa berhasil dengan data:\", data[0]);\r\n      return data[0];\r\n    } catch (clientError) {\r\n      console.error(\r\n        \"[Database] Error dengan Supabase client, mencoba dengan fetch API:\",\r\n        clientError\r\n      );\r\n\r\n      try {\r\n        // Fallback ke fetch API langsung\r\n        // Perbaiki format URL untuk query parameter\r\n        const siswaTable = \"siswa\";\r\n        const url = `${\r\n          supabase.supabaseUrl\r\n        }/rest/v1/${siswaTable}?select=*,kelas(id_kelas,nama_kelas)&nama=eq.${encodeURIComponent(\r\n          nama\r\n        )}&nis=eq.${encodeURIComponent(nis)}`;\r\n        console.log(\"[Database] Request URL:\", url);\r\n\r\n        const response = await fetch(url, {\r\n          method: \"GET\",\r\n          headers: {\r\n            apikey: supabase.supabaseKey,\r\n            Authorization: `Bearer ${supabase.supabaseKey}`,\r\n            \"Content-Type\": \"application/json\",\r\n            Accept: \"application/json\",\r\n            Prefer: \"return=representation\",\r\n          },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          console.error(\r\n            \"[Database] HTTP error:\",\r\n            response.status,\r\n            response.statusText\r\n          );\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(\"[Database] Data dari fetch API:\", data);\r\n\r\n        if (!data || data.length === 0) {\r\n          console.warn(\r\n            \"[Database] Tidak ada data siswa yang ditemukan dengan fetch API\"\r\n          );\r\n          throw new Error(\"Siswa tidak ditemukan\");\r\n        }\r\n\r\n        console.log(\r\n          \"[Database] Login siswa berhasil dengan fetch API:\",\r\n          data[0]\r\n        );\r\n        return data[0];\r\n      } catch (fetchError) {\r\n        console.error(\"[Database] Fetch API error:\", fetchError);\r\n\r\n        // Fallback ke data offline sebagai upaya terakhir\r\n        const offlineSiswa = dummySiswa.find(\r\n          (s) => s.nama === nama && s.nis === nis\r\n        );\r\n        if (!offlineSiswa) {\r\n          throw new Error(\"Siswa tidak ditemukan (offline mode)\");\r\n        }\r\n        console.log(\r\n          \"[Database] Menggunakan data offline sebagai fallback terakhir:\",\r\n          offlineSiswa\r\n        );\r\n        return offlineSiswa;\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[Database] Login siswa error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Login guru\r\nexport const loginGuru = async (nama, nuptk) => {\r\n  try {\r\n    console.log(\r\n      `[Database] Mencoba login guru dengan nama: ${nama} dan NUPTK: ${nuptk}`\r\n    );\r\n\r\n    // Periksa ketersediaan supabase client\r\n    if (!supabase) {\r\n      console.error(\"[Database] Supabase client tidak tersedia\");\r\n      // Langsung fallback ke data offline\r\n      const offlineGuru = dummyGuru.find(\r\n        (g) => g.nama === nama && g.nuptk === nuptk\r\n      );\r\n      if (!offlineGuru) {\r\n        throw new Error(\"Guru tidak ditemukan (offline mode)\");\r\n      }\r\n      console.log(\"[Database] Menggunakan data offline:\", offlineGuru);\r\n      return offlineGuru;\r\n    }\r\n\r\n    // Periksa metode from pada supabase client\r\n    if (typeof supabase.from !== \"function\") {\r\n      console.error(\r\n        \"[Database] Metode from tidak tersedia pada supabase client\"\r\n      );\r\n\r\n      // Coba perbaiki metode from dengan cara alternatif\r\n      if (supabase[\"from\"] && typeof supabase[\"from\"] === \"function\") {\r\n        console.log(\r\n          \"[Database] Mencoba memperbaiki metode from dengan cara alternatif\"\r\n        );\r\n        try {\r\n          // Bind metode from ke supabase client\r\n          const fixedFrom = supabase[\"from\"].bind(supabase);\r\n          // Uji metode from yang diperbaiki\r\n          const testTable = fixedFrom(\"guru\");\r\n          if (testTable && typeof testTable.select === \"function\") {\r\n            console.log(\"[Database] Metode from berhasil diperbaiki\");\r\n            // Tambahkan metode from yang diperbaiki ke supabase client\r\n            supabase.from = fixedFrom;\r\n            // Lanjutkan dengan metode from yang diperbaiki\r\n          } else {\r\n            console.error(\"[Database] Metode from tidak dapat diperbaiki\");\r\n            // Langsung fallback ke data offline\r\n            const offlineGuru = dummyGuru.find(\r\n              (g) => g.nama === nama && g.nuptk === nuptk\r\n            );\r\n            if (!offlineGuru) {\r\n              throw new Error(\"Guru tidak ditemukan (offline mode)\");\r\n            }\r\n            console.log(\"[Database] Menggunakan data offline:\", offlineGuru);\r\n            return offlineGuru;\r\n          }\r\n        } catch (fixError) {\r\n          console.error(\r\n            \"[Database] Error saat memperbaiki metode from:\",\r\n            fixError\r\n          );\r\n          // Langsung fallback ke data offline\r\n          const offlineGuru = dummyGuru.find(\r\n            (g) => g.nama === nama && g.nuptk === nuptk\r\n          );\r\n          if (!offlineGuru) {\r\n            throw new Error(\"Guru tidak ditemukan (offline mode)\");\r\n          }\r\n          console.log(\"[Database] Menggunakan data offline:\", offlineGuru);\r\n          return offlineGuru;\r\n        }\r\n      } else {\r\n        // Langsung fallback ke data offline\r\n        const offlineGuru = dummyGuru.find(\r\n          (g) => g.nama === nama && g.nuptk === nuptk\r\n        );\r\n        if (!offlineGuru) {\r\n          throw new Error(\"Guru tidak ditemukan (offline mode)\");\r\n        }\r\n        console.log(\"[Database] Menggunakan data offline:\", offlineGuru);\r\n        return offlineGuru;\r\n      }\r\n    }\r\n\r\n    // Gunakan REST API langsung jika metode from().select().eq() bermasalah\r\n    try {\r\n      console.log(\"[Database] Mencoba dengan metode Supabase client\");\r\n      const { data, error } = await supabase\r\n        .from(\"guru\")\r\n        .select(\"*\")\r\n        .eq(\"nama\", nama)\r\n        .eq(\"nuptk\", nuptk)\r\n        .single();\r\n\r\n      if (error) {\r\n        console.error(\"[Database] Error dengan metode Supabase client:\", error);\r\n        throw error;\r\n      }\r\n\r\n      if (!data) {\r\n        console.warn(\"[Database] Tidak ada data guru yang ditemukan\");\r\n        throw new Error(\"Guru tidak ditemukan\");\r\n      }\r\n\r\n      console.log(\"[Database] Login guru berhasil dengan data:\", data);\r\n      return data;\r\n    } catch (clientError) {\r\n      console.error(\r\n        \"[Database] Error dengan Supabase client, mencoba dengan fetch API:\",\r\n        clientError\r\n      );\r\n\r\n      try {\r\n        // Fallback ke fetch API langsung\r\n        const url = `${\r\n          supabase.supabaseUrl\r\n        }/rest/v1/guru?select=*&nama=eq.${encodeURIComponent(\r\n          nama\r\n        )}&nuptk=eq.${encodeURIComponent(nuptk)}`;\r\n        console.log(\"[Database] Request URL:\", url);\r\n\r\n        const response = await fetch(url, {\r\n          headers: {\r\n            apikey: supabase.supabaseKey,\r\n            Authorization: `Bearer ${supabase.supabaseKey}`,\r\n            \"Content-Type\": \"application/json\",\r\n            Accept: \"application/json\",\r\n          },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          console.error(\r\n            \"[Database] HTTP error:\",\r\n            response.status,\r\n            response.statusText\r\n          );\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(\"[Database] Data dari fetch API:\", data);\r\n\r\n        if (!data || data.length === 0) {\r\n          console.warn(\r\n            \"[Database] Tidak ada data guru yang ditemukan dengan fetch API\"\r\n          );\r\n          throw new Error(\"Guru tidak ditemukan\");\r\n        }\r\n\r\n        console.log(\r\n          \"[Database] Login guru berhasil dengan fetch API:\",\r\n          data[0]\r\n        );\r\n        return data[0];\r\n      } catch (fetchError) {\r\n        console.error(\"[Database] Fetch API error:\", fetchError);\r\n\r\n        // Fallback ke data offline sebagai upaya terakhir\r\n        const offlineGuru = dummyGuru.find(\r\n          (g) => g.nama === nama && g.nuptk === nuptk\r\n        );\r\n        if (!offlineGuru) {\r\n          throw new Error(\"Guru tidak ditemukan (offline mode)\");\r\n        }\r\n        console.log(\r\n          \"[Database] Menggunakan data offline sebagai fallback terakhir:\",\r\n          offlineGuru\r\n        );\r\n        return offlineGuru;\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[Database] Login guru error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Login admin\r\nexport const loginAdmin = async (username, password) => {\r\n  try {\r\n    console.log(`[Database] Attempting admin login with username: ${username}`);\r\n\r\n    // Check Supabase client availability\r\n    if (!supabase) {\r\n      console.error(\"[Database] Supabase client not available\");\r\n      return handleOfflineLogin(username, password, \"admin\");\r\n    }\r\n\r\n    try {\r\n      // Get admin by name\r\n      const { data: adminData, error: adminError } = await supabase\r\n        .from(\"admin\")\r\n        .select(\"*\")\r\n        .eq(\"nama\", username)\r\n        .single();\r\n\r\n      if (adminError) {\r\n        // Tangani error policy Supabase (infinite recursion)\r\n        if (adminError.code === \"42P17\") {\r\n          console.error(\r\n            \"[Database] Supabase RLS policy error (infinite recursion):\",\r\n            adminError\r\n          );\r\n          throw new Error(\r\n            \"Supabase RLS policy error pada tabel 'admin': infinite recursion. Silakan perbaiki policy di dashboard Supabase.\"\r\n          );\r\n        }\r\n        console.error(\"[Database] Error fetching admin:\", adminError);\r\n        throw new Error(\"Invalid credentials\");\r\n      }\r\n\r\n      if (!adminData) {\r\n        console.warn(\"[Database] No admin found with provided name\");\r\n        throw new Error(\"Invalid credentials\");\r\n      }\r\n\r\n      // Verify if password matches (in this case we're checking the plain password field)\r\n      // In a production environment, you should use password_hash and proper password hashing\r\n      if (adminData.password !== password) {\r\n        console.warn(\"[Database] Invalid password\");\r\n        throw new Error(\"Invalid credentials\");\r\n      }\r\n      console.log(\"[Database] Admin login successful\");\r\n      return {\r\n        ...adminData,\r\n        offline: false,\r\n      };\r\n    } catch (error) {\r\n      // Tangani error policy Supabase (infinite recursion) pada catch\r\n      if (\r\n        error &&\r\n        error.message &&\r\n        error.message.includes(\"infinite recursion\")\r\n      ) {\r\n        throw error;\r\n      }\r\n      console.error(\"[Database] Admin login failed:\", error);\r\n      return handleOfflineLogin(username, password, \"admin\");\r\n    }\r\n  } catch (error) {\r\n    // Tangani error policy Supabase (infinite recursion) pada catch utama\r\n    if (\r\n      error &&\r\n      error.message &&\r\n      error.message.includes(\"infinite recursion\")\r\n    ) {\r\n      throw error;\r\n    }\r\n    console.error(\"[Database] Admin login error:\", error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Update siswa avatar\r\nexport const updateSiswaAvatar = async (id_siswa, avatar) => {\r\n  try {\r\n    console.log(\r\n      `[Database] Mencoba update avatar siswa dengan ID: ${id_siswa} ke avatar: ${avatar}`\r\n    );\r\n\r\n    // Periksa ketersediaan supabase client\r\n    if (!supabase) {\r\n      console.error(\"[Database] Supabase client tidak tersedia\");\r\n      // Langsung fallback ke mode offline - update data lokal saja\r\n      console.log(\"[Database] Fallback ke mode offline untuk update avatar\");\r\n      return { id_siswa, avatar, offline: true };\r\n    }\r\n\r\n    // Periksa metode from pada supabase client\r\n    if (typeof supabase.from !== \"function\") {\r\n      console.error(\r\n        \"[Database] Metode from tidak tersedia pada supabase client\"\r\n      );\r\n\r\n      // Coba perbaiki metode from dengan cara alternatif\r\n      if (supabase[\"from\"] && typeof supabase[\"from\"] === \"function\") {\r\n        console.log(\r\n          \"[Database] Mencoba memperbaiki metode from dengan cara alternatif\"\r\n        );\r\n        try {\r\n          // Bind metode from ke supabase client\r\n          const fixedFrom = supabase[\"from\"].bind(supabase);\r\n          // Uji metode from yang diperbaiki\r\n          const testTable = fixedFrom(\"siswa\");\r\n          if (testTable && typeof testTable.select === \"function\") {\r\n            console.log(\"[Database] Metode from berhasil diperbaiki\");\r\n            // Tambahkan metode from yang diperbaiki ke supabase client\r\n            supabase.from = fixedFrom;\r\n            // Lanjutkan dengan metode from yang diperbaiki\r\n          } else {\r\n            console.error(\"[Database] Metode from tidak dapat diperbaiki\");\r\n            // Langsung fallback ke mode offline - update data lokal saja\r\n            console.log(\r\n              \"[Database] Fallback ke mode offline untuk update avatar\"\r\n            );\r\n            return { id_siswa, avatar, offline: true };\r\n          }\r\n        } catch (fixError) {\r\n          console.error(\r\n            \"[Database] Error saat memperbaiki metode from:\",\r\n            fixError\r\n          );\r\n          // Langsung fallback ke mode offline - update data lokal saja\r\n          console.log(\r\n            \"[Database] Fallback ke mode offline untuk update avatar\"\r\n          );\r\n          return { id_siswa, avatar, offline: true };\r\n        }\r\n      } else {\r\n        // Langsung fallback ke mode offline - update data lokal saja\r\n        console.log(\"[Database] Fallback ke mode offline untuk update avatar\");\r\n        return { id_siswa, avatar, offline: true };\r\n      }\r\n    }\r\n\r\n    // Gunakan REST API langsung jika metode from().update().eq() bermasalah\r\n    try {\r\n      console.log(\"[Database] Mencoba dengan metode Supabase client\");\r\n      const { data, error } = await supabase\r\n        .from(\"siswa\")\r\n        .update({ avatar })\r\n        .eq(\"id_siswa\", id_siswa)\r\n        .select()\r\n        .single();\r\n\r\n      if (error) {\r\n        console.error(\"[Database] Error dengan metode Supabase client:\", error);\r\n        throw error;\r\n      }\r\n\r\n      console.log(\"[Database] Update avatar berhasil dengan data:\", data);\r\n      return data;\r\n    } catch (clientError) {\r\n      console.error(\r\n        \"[Database] Error dengan Supabase client, mencoba dengan fetch API:\",\r\n        clientError\r\n      );\r\n\r\n      try {\r\n        // Fallback ke fetch API langsung\r\n        const url = `${supabase.supabaseUrl}/rest/v1/siswa?id_siswa=eq.${id_siswa}`;\r\n        console.log(\"[Database] Request URL:\", url);\r\n\r\n        const response = await fetch(url, {\r\n          method: \"PATCH\",\r\n          headers: {\r\n            apikey: supabase.supabaseKey,\r\n            Authorization: `Bearer ${supabase.supabaseKey}`,\r\n            \"Content-Type\": \"application/json\",\r\n            Prefer: \"return=representation\",\r\n          },\r\n          body: JSON.stringify({ avatar }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          console.error(\r\n            \"[Database] HTTP error:\",\r\n            response.status,\r\n            response.statusText\r\n          );\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log(\"[Database] Data dari fetch API:\", data);\r\n\r\n        if (!data || data.length === 0) {\r\n          console.warn(\r\n            \"[Database] Tidak ada data yang dikembalikan dengan fetch API\"\r\n          );\r\n          // Fallback ke mode offline - update data lokal saja\r\n          return { id_siswa, avatar, offline: true };\r\n        }\r\n\r\n        console.log(\r\n          \"[Database] Update avatar berhasil dengan fetch API:\",\r\n          data[0]\r\n        );\r\n        return data[0];\r\n      } catch (fetchError) {\r\n        console.error(\"[Database] Fetch API error:\", fetchError);\r\n        // Fallback ke mode offline - update data lokal saja\r\n        console.log(\r\n          \"[Database] Fallback ke mode offline untuk update avatar setelah semua upaya gagal\"\r\n        );\r\n        return { id_siswa, avatar, offline: true };\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[Database] Update avatar error:\", error);\r\n    // Fallback ke mode offline - update data lokal saja\r\n    return { id_siswa, avatar, offline: true };\r\n  }\r\n};\r\n","export default \"__VITE_ASSET__DCKysuPX__\"","export default \"__VITE_ASSET__BRTlkqu0__\"","export default \"__VITE_ASSET__Cn1r5trt__\"","export default \"__VITE_ASSET__CLiWYHLl__\"","export default \"__VITE_ASSET__DbUCm28m__\"","export default \"__VITE_ASSET__GrKKbNtn__\"","export default \"__VITE_ASSET__CLFzENhY__\"","export default \"__VITE_ASSET__2qCH9YsM__\"","export default \"__VITE_ASSET__Dq5V6gg2__\"","export default \"__VITE_ASSET__BZAzVfP4__\"","import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"../login.css\";\r\nimport supabase from \"../config/supabase\";\r\nimport { dummySiswa, dummyGuru, staticCredentials } from \"../config/mockData\";\r\nimport {\r\n  loginSiswa,\r\n  loginGuru,\r\n  loginAdmin,\r\n  updateSiswaAvatar,\r\n} from \"../services/database\";\r\nimport { motion } from \"framer-motion\";\r\n\r\n// Import all animal avatars\r\nimport anjingAvatar from \"../assets/anjing.png\";\r\nimport babiAvatar from \"../assets/babi.png\";\r\nimport bebekAvatar from \"../assets/bebek.png\";\r\nimport guritaAvatar from \"../assets/gurita.png\";\r\nimport harimauAvatar from \"../assets/harimau.png\";\r\nimport kelinciAvatar from \"../assets/kelinci.png\";\r\nimport kucingAvatar from \"../assets/kucing.png\";\r\nimport sapiAvatar from \"../assets/sapi.png\";\r\nimport serigalaAvatar from \"../assets/serigala.png\";\r\nimport singaAvatar from \"../assets/singa.png\";\r\n\r\n// Define avatar options using the imported images\r\nconst avatarOptions = [\r\n  { name: \"Anjing\", src: anjingAvatar },\r\n  { name: \"Babi\", src: babiAvatar },\r\n  { name: \"Bebek\", src: bebekAvatar },\r\n  { name: \"Gurita\", src: guritaAvatar },\r\n  { name: \"Harimau\", src: harimauAvatar },\r\n  { name: \"Kelinci\", src: kelinciAvatar },\r\n  { name: \"Kucing\", src: kucingAvatar },\r\n  { name: \"Sapi\", src: sapiAvatar },\r\n  { name: \"Serigala\", src: serigalaAvatar },\r\n  { name: \"Singa\", src: singaAvatar },\r\n];\r\n\r\nexport default function Login() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [loginSuccess, setLoginSuccess] = useState(false);\r\n  const [_selectedAvatar, _setSelectedAvatar] = useState(null);\r\n  const [role, setRole] = useState(\"\");\r\n  const [isOfflineMode, setIsOfflineMode] = useState(false);\r\n  const [connectionChecking, setConnectionChecking] = useState(true);\r\n  const [retryCount, setRetryCount] = useState(0);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const selectedRole = localStorage.getItem(\"selectedRole\");\r\n    if (selectedRole) {\r\n      setRole(selectedRole);\r\n    } else {\r\n      navigate(\"/\");\r\n    }\r\n    checkConnection();\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    const checkOfflineMode = () => {\r\n      if (navigator.onLine) {\r\n        if (isOfflineMode && retryCount < 3) {\r\n          checkConnection();\r\n        }\r\n      } else {\r\n        setIsOfflineMode(true);\r\n        setConnectionChecking(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"online\", checkOfflineMode);\r\n    window.addEventListener(\"offline\", () => {\r\n      setIsOfflineMode(true);\r\n      setConnectionChecking(false);\r\n    });\r\n\r\n    checkOfflineMode();\r\n\r\n    return () => {\r\n      window.removeEventListener(\"online\", checkOfflineMode);\r\n      window.removeEventListener(\"offline\", () => {\r\n        setIsOfflineMode(true);\r\n        setConnectionChecking(false);\r\n      });\r\n    };\r\n  }, [isOfflineMode, retryCount]);\r\n\r\n  const checkConnection = async () => {\r\n    try {\r\n      setConnectionChecking(true);\r\n\r\n      // First check navigator.onLine\r\n      if (!navigator.onLine) {\r\n        console.log(\"Browser reports offline\");\r\n        setIsOfflineMode(true);\r\n        return false;\r\n      }\r\n\r\n      if (!supabase) {\r\n        console.error(\"Supabase client not initialized\");\r\n        setIsOfflineMode(true);\r\n        return false;\r\n      }\r\n\r\n      // Simple test query to check connection\r\n      try {\r\n        const { error } = await supabase\r\n          .from(\"siswa\")\r\n          .select(\"id_siswa\")\r\n          .limit(1);\r\n\r\n        if (error) {\r\n          console.error(\"Database connection error:\", error);\r\n          setIsOfflineMode(true);\r\n          return false;\r\n        }\r\n\r\n        setIsOfflineMode(false);\r\n        return true;\r\n      } catch (dbError) {\r\n        console.error(\"Database test failed:\", dbError);\r\n        setIsOfflineMode(true);\r\n        return false;\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Connection check error:\", error);\r\n      setIsOfflineMode(true);\r\n      return false;\r\n    } finally {\r\n      setConnectionChecking(false);\r\n    }\r\n  };\r\n\r\n  const retryConnection = () => {\r\n    setRetryCount((prevCount) => prevCount + 1);\r\n    checkConnection();\r\n  };\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setLoading(true);\r\n\r\n    if (!role) {\r\n      setError(\"Error: Role tidak terdeteksi\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Coba periksa koneksi, tapi jangan biarkan error menghentikan proses login\r\n      try {\r\n        await checkConnection();\r\n      } catch (connError) {\r\n        console.error(\"Error saat memeriksa koneksi:\", connError);\r\n        setIsOfflineMode(true);\r\n      }\r\n\r\n      // Jika dalam mode offline, langsung gunakan login offline\r\n      if (isOfflineMode) {\r\n        console.log(\"Menggunakan mode offline untuk login\");\r\n        handleOfflineLogin();\r\n        return;\r\n      }\r\n\r\n      // Online mode\r\n      if (role === \"siswa\") {\r\n        try {\r\n          console.log(\r\n            \"Mencoba login dengan nama:\",\r\n            username,\r\n            \"dan NIS:\",\r\n            password\r\n          );\r\n\r\n          // Gunakan fungsi loginSiswa dari database.js yang sudah diperbaiki\r\n          const userData = await loginSiswa(username, password);\r\n\r\n          if (!userData) {\r\n            console.error(\r\n              \"Tidak ada data yang ditemukan untuk kredensial tersebut\"\r\n            );\r\n            setError(\"Nama atau NIS siswa salah!\");\r\n            setLoading(false);\r\n            return;\r\n          }\r\n\r\n          console.log(\"Login berhasil dengan user:\", userData);\r\n          localStorage.setItem(\"userData\", JSON.stringify(userData));\r\n\r\n          // Tandai apakah login menggunakan data offline\r\n          if (userData.offline) {\r\n            setIsOfflineMode(true);\r\n            localStorage.setItem(\"isOfflineMode\", \"true\");\r\n          }\r\n\r\n          setLoginSuccess(true);\r\n        } catch (error) {\r\n          console.error(\"Error during siswa login:\", error);\r\n\r\n          // Coba login offline sebagai fallback\r\n          console.log(\"Mencoba fallback ke mode offline setelah error\");\r\n          handleOfflineLogin();\r\n        }\r\n      } else if (role === \"guru\") {\r\n        try {\r\n          console.log(\r\n            \"Mencoba login guru dengan nama:\",\r\n            username,\r\n            \"dan NUPTK:\",\r\n            password\r\n          );\r\n\r\n          // Gunakan fungsi loginGuru dari database.js yang sudah diperbaiki\r\n          const userData = await loginGuru(username, password);\r\n\r\n          if (!userData) {\r\n            console.error(\r\n              \"Tidak ada data guru yang ditemukan untuk kredensial tersebut\"\r\n            );\r\n            setError(\"Nama atau NUPTK guru salah!\");\r\n            setLoading(false);\r\n            return;\r\n          }\r\n\r\n          console.log(\"Login guru berhasil dengan user:\", userData);\r\n          localStorage.setItem(\"userData\", JSON.stringify(userData));\r\n\r\n          // Tandai apakah login menggunakan data offline\r\n          if (userData.offline) {\r\n            setIsOfflineMode(true);\r\n            localStorage.setItem(\"isOfflineMode\", \"true\");\r\n          }\r\n\r\n          completeLogin(null, \"guru\");\r\n        } catch (error) {\r\n          console.error(\"Error during guru login:\", error);\r\n          // Fallback to offline mode\r\n          console.log(\"Mencoba fallback ke mode offline setelah error\");\r\n          handleOfflineLogin();\r\n        }\r\n      } else if (role === \"admin\") {\r\n        try {\r\n          console.log(\"Attempting admin login with username:\", username);\r\n\r\n          // Use the new adminLogin function\r\n          const adminData = await loginAdmin(username, password);\r\n\r\n          if (!adminData) {\r\n            console.error(\"No admin data found for given credentials\");\r\n            setError(\"Username atau password admin salah!\");\r\n            setLoading(false);\r\n            return;\r\n          }\r\n\r\n          console.log(\"Admin login successful with user:\", adminData);\r\n\r\n          // Store admin info in localStorage with proper structure\r\n          const adminInfo = {\r\n            nama: adminData.nama,\r\n            tipe_admin: adminData.tipe_admin,\r\n            id_admin: adminData.id_admin,\r\n            username: username,\r\n          };\r\n\r\n          localStorage.setItem(\"userData\", JSON.stringify(adminInfo));\r\n\r\n          // If response indicates offline mode, set it\r\n          if (adminData.offline) {\r\n            setIsOfflineMode(true);\r\n            localStorage.setItem(\"isOfflineMode\", \"true\");\r\n          }\r\n\r\n          completeLogin(null, \"admin\");\r\n        } catch (error) {\r\n          console.error(\"Error during admin login:\", error);\r\n          // Try offline login as fallback\r\n          console.log(\"Attempting fallback to offline mode after error\");\r\n          handleOfflineLogin();\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Login error:\", err);\r\n      setError(\r\n        \"Terjadi kesalahan saat login. Silakan coba lagi atau gunakan mode offline.\"\r\n      );\r\n      setLoading(false);\r\n      setIsOfflineMode(true);\r\n      // Coba login offline sebagai fallback\r\n      handleOfflineLogin();\r\n    }\r\n  };\r\n\r\n  // Helper function untuk login offline\r\n  const handleOfflineLogin = () => {\r\n    if (role === \"siswa\") {\r\n      // Siswa login dengan nama dan nis\r\n      // username = nama siswa, password = nis\r\n      const offlineSiswa = dummySiswa.find(\r\n        (s) => s.nama === username && s.nis === password\r\n      );\r\n\r\n      if (!offlineSiswa) {\r\n        setError(\"Nama atau NIS siswa salah!\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Tandai bahwa ini adalah data offline\r\n      const siswaWithFlag = { ...offlineSiswa, offline: true };\r\n      localStorage.setItem(\"userData\", JSON.stringify(siswaWithFlag));\r\n      localStorage.setItem(\"isOfflineMode\", \"true\");\r\n      setIsOfflineMode(true);\r\n      setLoginSuccess(true);\r\n    } else if (role === \"guru\") {\r\n      // Guru login dengan nama dan nuptk\r\n      // username = nama guru, password = nuptk\r\n      const offlineGuru = dummyGuru.find(\r\n        (g) => g.nama === username && g.nuptk === password\r\n      );\r\n\r\n      if (!offlineGuru) {\r\n        setError(\"Nama atau NUPTK guru salah!\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Tandai bahwa ini adalah data offline\r\n      const guruWithFlag = { ...offlineGuru, offline: true };\r\n      localStorage.setItem(\"userData\", JSON.stringify(guruWithFlag));\r\n      localStorage.setItem(\"isOfflineMode\", \"true\");\r\n      setIsOfflineMode(true);\r\n      completeLogin(null, \"guru\");\r\n    } else if (role === \"admin\") {\r\n      // Check against static admin credentials\r\n      const adminCred = staticCredentials.admin.find(\r\n        (admin) => admin.username === username && admin.password === password\r\n      );\r\n\r\n      if (adminCred) {\r\n        const adminData = {\r\n          nama: adminCred.nama,\r\n          tipe_admin: adminCred.type,\r\n          username: adminCred.username,\r\n          offline: true,\r\n        };\r\n        localStorage.setItem(\"userData\", JSON.stringify(adminData));\r\n        localStorage.setItem(\"isOfflineMode\", \"true\");\r\n        setIsOfflineMode(true);\r\n        completeLogin(null, \"admin\");\r\n      } else {\r\n        setError(\"Username atau password admin salah!\");\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAvatarSelection = async (avatar) => {\r\n    _setSelectedAvatar(avatar);\r\n\r\n    try {\r\n      const userData = JSON.parse(localStorage.getItem(\"userData\") || \"{}\");\r\n\r\n      if (userData && userData.id_siswa) {\r\n        let shouldUpdateLocally = true;\r\n\r\n        // Only try online update if we're not in offline mode\r\n        if (!isOfflineMode) {\r\n          try {\r\n            const updatedUser = await updateSiswaAvatar(\r\n              userData.id_siswa,\r\n              avatar.name\r\n            );\r\n            console.log(\"Avatar update attempt result:\", updatedUser);\r\n\r\n            if (updatedUser && !updatedUser.error) {\r\n              if (updatedUser.offline) {\r\n                setIsOfflineMode(true);\r\n                localStorage.setItem(\"isOfflineMode\", \"true\");\r\n              }\r\n              userData.avatar = updatedUser.avatar || avatar.name;\r\n              shouldUpdateLocally = false;\r\n            }\r\n          } catch (error) {\r\n            console.error(\"Error updating avatar online:\", error);\r\n          }\r\n        }\r\n\r\n        // Update locally if online update failed or we're in offline mode\r\n        if (shouldUpdateLocally) {\r\n          userData.avatar = avatar.name;\r\n        }\r\n\r\n        localStorage.setItem(\"userData\", JSON.stringify(userData));\r\n      }\r\n\r\n      completeLogin(avatar, \"siswa\");\r\n    } catch (err) {\r\n      console.error(\"Error during avatar selection:\", err);\r\n      // Ensure the login process continues even if there was an error\r\n      completeLogin(avatar, \"siswa\");\r\n    }\r\n  };\r\n\r\n  const completeLogin = (avatar, userRole) => {\r\n    localStorage.setItem(\"isLoggedIn\", \"true\");\r\n    localStorage.setItem(\"userRole\", userRole);\r\n    localStorage.setItem(\"isOfflineMode\", isOfflineMode.toString());\r\n\r\n    if (avatar) {\r\n      localStorage.setItem(\"selectedAvatar\", JSON.stringify(avatar));\r\n    }\r\n\r\n    switch (userRole) {\r\n      case \"siswa\": {\r\n        const userData = JSON.parse(localStorage.getItem(\"userData\") || \"{}\");\r\n        const kelas = userData.id_kelas;\r\n        if (kelas === 1) {\r\n          navigate(\"/kelas1\");\r\n        } else if (kelas === 2) {\r\n          navigate(\"/kelas2\");\r\n        } else if (kelas === 3) {\r\n          navigate(\"/kelas3\");\r\n        } else if (kelas === 4) {\r\n          navigate(\"/kelas4\");\r\n        } else if (kelas === 5) {\r\n          navigate(\"/kelas5\");\r\n        } else if (kelas === 6) {\r\n          navigate(\"/kelas6\");\r\n        } else {\r\n          navigate(\"/main-siswa\");\r\n        }\r\n        break;\r\n      }\r\n      case \"guru\": {\r\n        navigate(\"/guru/dashboard\");\r\n        break;\r\n      }\r\n      case \"ortu\": {\r\n        navigate(\"/dashboard-ortu\");\r\n        break;\r\n      }\r\n      case \"admin\": {\r\n        navigate(\"/admin/dashboard\");\r\n        break;\r\n      }\r\n      default:\r\n        navigate(\"/\");\r\n    }\r\n  };\r\n\r\n  const handleBackToRoleSelection = () => {\r\n    localStorage.removeItem(\"selectedRole\");\r\n    navigate(\"/\");\r\n  };\r\n\r\n  const getRoleInfo = () => {\r\n    switch (role) {\r\n      case \"siswa\":\r\n        return {\r\n          title: \"Login Siswa\",\r\n          icon: null,\r\n        };\r\n      case \"guru\":\r\n        return {\r\n          title: \"Login Guru\",\r\n          icon: null,\r\n        };\r\n      case \"ortu\":\r\n        return {\r\n          title: \"Login Orang Tua\",\r\n          icon: null,\r\n        };\r\n      case \"admin\":\r\n        return {\r\n          title: \"Login Admin\",\r\n          icon: null,\r\n        };\r\n      default:\r\n        return {\r\n          title: \"Login\",\r\n          icon: null,\r\n        };\r\n    }\r\n  };\r\n\r\n  const roleInfo = getRoleInfo();\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      {isOfflineMode && (\r\n        <div className=\"offline-indicator\">\r\n          Mode Offline - Data login digunakan dari local storage\r\n          <button\r\n            className=\"retry-button\"\r\n            onClick={retryConnection}\r\n            disabled={connectionChecking}\r\n          >\r\n            {connectionChecking ? \"Memeriksa...\" : \"Coba Sambung Ulang\"}\r\n          </button>\r\n        </div>\r\n      )}\r\n      <button\r\n        className={`back-button role-${role}`}\r\n        onClick={handleBackToRoleSelection}\r\n      >\r\n        Kembali\r\n      </button>\r\n      <div className={`login-box role-${role}`}>\r\n        <div className=\"login-header\">\r\n          <h2>{roleInfo.title}</h2>\r\n        </div>\r\n\r\n        {!loginSuccess ? (\r\n          <div className=\"login-form1\">\r\n            {roleInfo.icon && (\r\n              <div className=\"role-icon-container\">\r\n                <img\r\n                  src={roleInfo.icon}\r\n                  alt={`Icon ${roleInfo.title}`}\r\n                  className=\"role-icon-large\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <form onSubmit={handleLogin}>\r\n              <div className=\"input-group\">\r\n                <label htmlFor=\"username\">\r\n                  {role === \"siswa\"\r\n                    ? \"Nama\"\r\n                    : role === \"guru\"\r\n                    ? \"Nama\"\r\n                    : role === \"admin\"\r\n                    ? \"Email\"\r\n                    : \"Username\"}\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"username\"\r\n                  value={username}\r\n                  onChange={(e) => setUsername(e.target.value)}\r\n                  required\r\n                  autoComplete={\r\n                    role === \"siswa\"\r\n                      ? \"given-name\"\r\n                      : role === \"guru\"\r\n                      ? \"name\"\r\n                      : role === \"admin\"\r\n                      ? \"email\"\r\n                      : \"username\"\r\n                  }\r\n                  placeholder={\r\n                    role === \"siswa\"\r\n                      ? \"Masukkan nama\"\r\n                      : role === \"guru\"\r\n                      ? \"Masukkan nama\"\r\n                      : role === \"ortu\"\r\n                      ? \"ortu\"\r\n                      : \"Masukkan email admin\"\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <label htmlFor=\"password\">\r\n                  {role === \"siswa\"\r\n                    ? \"Nomor Induk Siswa (NIS)\"\r\n                    : role === \"guru\"\r\n                    ? \"NUPTK\"\r\n                    : \"Password\"}\r\n                </label>\r\n                <input\r\n                  type={\r\n                    role === \"siswa\" || role === \"guru\" ? \"text\" : \"password\"\r\n                  }\r\n                  id=\"password\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  required\r\n                  autoComplete={\r\n                    role === \"siswa\"\r\n                      ? \"username\"\r\n                      : role === \"guru\"\r\n                      ? \"username\"\r\n                      : \"current-password\"\r\n                  }\r\n                  placeholder={\r\n                    role === \"siswa\"\r\n                      ? \"Masukkan NIS\"\r\n                      : role === \"guru\"\r\n                      ? \"Masukkan NUPTK\"\r\n                      : role === \"ortu\"\r\n                      ? \"ortu123\"\r\n                      : \"Masukkan password\"\r\n                  }\r\n                />\r\n              </div>\r\n              {error && <div className=\"error-message\">{error}</div>}\r\n              <button type=\"submit\" className=\"login-button\" disabled={loading}>\r\n                {loading ? \"Memproses...\" : \"Login\"}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        ) : (\r\n          <div className=\"avatar-selection\">\r\n            <h3>Pilih Avatar Kamu!</h3>\r\n            <div className=\"avatar-grid\">\r\n              {avatarOptions.map((avatar, index) => (\r\n                <motion.div\r\n                  key={index}\r\n                  className=\"avatar-option\"\r\n                  onClick={() => handleAvatarSelection(avatar)}\r\n                  whileHover={{ scale: 1.1 }}\r\n                  whileTap={{ scale: 0.9 }}\r\n                >\r\n                  <img src={avatar.src} alt={avatar.name} />\r\n                  <p>{avatar.name}</p>\r\n                </motion.div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./main-siswa.css\";\r\n\r\nconst chapters = [\r\n  { title: \"Bab 1\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 2\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 3\", levels: [\"Level 1\"] },\r\n];\r\n\r\n// Operations that need to be completed for each level\r\nconst operations = [\"addition\", \"subtraction\", \"multiplication\", \"division\"];\r\n\r\nexport default function MainSiswa() {\r\n  const [selectedChapter, setSelectedChapter] = useState(null);\r\n  const [globalProgress, setGlobalProgress] = useState(0);\r\n  const [chapterProgress, setChapterProgress] = useState(\r\n    Array(chapters.length).fill(0)\r\n  );\r\n  const [selectedAvatar, setSelectedAvatar] = useState(null);\r\n  const [userData, setUserData] = useState({\r\n    completedLevels: 0,\r\n  });\r\n  const [completedCategoriesMap, setCompletedCategoriesMap] = useState({});\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Check if user is logged in\r\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n    if (!isLoggedIn) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Get user data from localStorage\r\n    const userDataString = localStorage.getItem(\"userData\");\r\n    const userData = userDataString ? JSON.parse(userDataString) : null;\r\n    \r\n    // Set selected avatar but use actual student name if available\r\n    const savedAvatar = localStorage.getItem(\"selectedAvatar\");\r\n    if (savedAvatar) {\r\n      const avatar = JSON.parse(savedAvatar);\r\n      setSelectedAvatar({\r\n        ...avatar,\r\n        displayName: userData?.nama || avatar.name // Use student name if available\r\n      });\r\n\r\n      // Get progress specific to this avatar\r\n      const avatarKey = `avatar_${avatar.name}_levelScores`;\r\n      const levelScores = JSON.parse(localStorage.getItem(avatarKey)) || {};\r\n\r\n      // Get operations completed for each level\r\n      const avatarOperationsKey = `avatar_${avatar.name}_operations`;\r\n      const operationsData =\r\n        JSON.parse(localStorage.getItem(avatarOperationsKey)) || {};\r\n\r\n      // Maps to track completed categories for each level\r\n      const categoriesCompletedMap = {};\r\n\r\n      // Count completed levels based on operations completed\r\n      let completedLevelsCount = 0;\r\n\r\n      // Calculate chapter progress based on operations completed\r\n      const newChapterProgress = Array(chapters.length).fill(0);\r\n\r\n      // Process each chapter and level\r\n      chapters.forEach((chapter, chapterIndex) => {\r\n        let totalCategoriesInChapter =\r\n          chapter.levels.length * operations.length;\r\n        let completedCategoriesInChapter = 0;\r\n        let chapterHasActivity = false;\r\n\r\n        chapter.levels.forEach((_, levelIndex) => {\r\n          const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n          const completedOperations = operationsData[levelKey] || [];\r\n\r\n          categoriesCompletedMap[levelKey] = completedOperations;\r\n\r\n          if (completedOperations.length === operations.length) {\r\n            completedLevelsCount++;\r\n          }\r\n\r\n          completedCategoriesInChapter += completedOperations.length;\r\n          if (completedOperations.length > 0) {\r\n            chapterHasActivity = true;\r\n          }\r\n        });\r\n\r\n        // Calculate progress percentage for this chapter\r\n        newChapterProgress[chapterIndex] = chapterHasActivity\r\n          ? (completedCategoriesInChapter / totalCategoriesInChapter) * 100\r\n          : 0;\r\n      });\r\n\r\n      // Update UI with calculated progress\r\n      setChapterProgress(newChapterProgress);\r\n      setUserData({ completedLevels: completedLevelsCount });\r\n      setCompletedCategoriesMap(categoriesCompletedMap);\r\n\r\n      // Calculate global progress (average of all chapters)\r\n      const totalProgress =\r\n        newChapterProgress.reduce((acc, val) => acc + val, 0) / chapters.length;\r\n      setGlobalProgress(totalProgress);\r\n\r\n      // Save the new progress calculations\r\n      const avatarProgressKey = `avatar_${avatar.name}_chapterProgress`;\r\n      localStorage.setItem(\r\n        avatarProgressKey,\r\n        JSON.stringify(newChapterProgress)\r\n      );\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleLevelClick = (chapterIndex, levelIndex) => {\r\n    // Save chapter and level info to localStorage\r\n    localStorage.setItem(\"currentBabIndex\", chapterIndex);\r\n    localStorage.setItem(\"currentLevelIndex\", levelIndex);\r\n\r\n    // Navigate to category page with parameters\r\n    navigate(`/category?chapter=${chapterIndex}&level=${levelIndex}`);\r\n  };\r\n\r\n  const handleClosePopup = () => {\r\n    setSelectedChapter(null);\r\n  };\r\n\r\n  // Fitur logout\r\n  const handleLogout = () => {\r\n    // Hapus status login tetapi simpan avatar\r\n    localStorage.removeItem(\"isLoggedIn\");\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  const handleViewScore = () => {\r\n    navigate(\"/skor\");\r\n  };\r\n\r\n  // Fungsi untuk mendapatkan status apakah level sudah diselesaikan\r\n  const isLevelCompleted = (chapterIndex, levelIndex) => {\r\n    if (!selectedAvatar) return false;\r\n\r\n    const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n    return (\r\n      completedCategoriesMap[levelKey] &&\r\n      completedCategoriesMap[levelKey].length > 0\r\n    );\r\n  };\r\n\r\n  // Function to get the level progress percentage\r\n  const getLevelProgress = (chapterIndex, levelIndex) => {\r\n    if (!selectedAvatar) return 0;\r\n\r\n    const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n    if (!completedCategoriesMap[levelKey]) return 0;\r\n\r\n    // Return percentage of completed categories out of 4 operations\r\n    return (completedCategoriesMap[levelKey].length / operations.length) * 100;\r\n  };\r\n\r\n  // Function to check if a specific category is completed for a level\r\n  const isCategoryCompleted = (chapterIndex, levelIndex, operation) => {\r\n    if (!selectedAvatar) return false;\r\n\r\n    const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n    return (\r\n      completedCategoriesMap[levelKey] &&\r\n      completedCategoriesMap[levelKey].includes(operation)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"main-siswa-container\">\r\n      <header className=\"header-siswa\">\r\n        <motion.h1\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.6 }}\r\n        >\r\n          Game Matematika Siswa\r\n        </motion.h1>\r\n\r\n        {/* Avatar dan menu profil */}\r\n        <div className=\"profile-section\">\r\n          <div className=\"profile-icon\">\r\n            {selectedAvatar ? (\r\n              <img\r\n                src={selectedAvatar.src}\r\n                alt={selectedAvatar.displayName}\r\n                className=\"avatar-image\"\r\n              />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          <div className=\"progress-info\">\r\n            <p>\r\n              Progress{\" \"}\r\n              <strong>{selectedAvatar ? selectedAvatar.displayName : \"Siswa\"}</strong>:{\" \"}\r\n              {Math.round(globalProgress)}%\r\n            </p>\r\n            <p>\r\n              Level Selesai:{\" \"}\r\n              <strong>{userData.completedLevels}</strong> dari{\" \"}\r\n              {chapters.length * chapters[0].levels.length}\r\n            </p>\r\n          </div>\r\n          </div>\r\n      </header>\r\n\r\n      <div className=\"progress-container\">\r\n        <div className=\"progress-info\">\r\n          <p>\r\n            Progress{\" \"}\r\n            <strong>{selectedAvatar ? selectedAvatar.name : \"Siswa\"}</strong>:{\" \"}\r\n            {Math.round(globalProgress)}%\r\n          </p>\r\n          <p>\r\n            Level Selesai:{\" \"}\r\n            <strong>{userData.completedLevels}</strong> dari{\" \"}\r\n            {chapters.length * chapters[0].levels.length}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"progress-bar\">\r\n          <motion.div\r\n            className=\"progress\"\r\n            style={{ width: `${globalProgress}%` }}\r\n            initial={{ width: 0 }}\r\n            animate={{ width: `${globalProgress}%` }}\r\n            transition={{ duration: 0.8 }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"chapter-buttons\">\r\n        {chapters.map((chapter, index) => (\r\n          <motion.button\r\n            key={index}\r\n            className=\"big-chapter-button\"\r\n            onClick={() => setSelectedChapter(index)}\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.2 * index }}\r\n          >\r\n            {chapter.title}\r\n            <div className=\"chapter-progress-indicator\">\r\n              <div className=\"chapter-progress-bar\">\r\n                <div\r\n                  className=\"chapter-progress-fill\"\r\n                  style={{ width: `${chapterProgress[index]}%` }}\r\n                ></div>\r\n              </div>\r\n              <span>{Math.round(chapterProgress[index])}%</span>\r\n            </div>\r\n          </motion.button>\r\n        ))}\r\n      </div>\r\n\r\n      {selectedChapter !== null && (\r\n        <div className=\"popup-overlay\">\r\n          <motion.div\r\n            className=\"popup\"\r\n            initial={{ scale: 0.8, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <h2>{chapters[selectedChapter].title}</h2>\r\n\r\n            <div className=\"popup-progress-bar\">\r\n              <div\r\n                className=\"popup-progress\"\r\n                style={{ width: `${chapterProgress[selectedChapter]}%` }}\r\n              ></div>\r\n            </div>\r\n            <p className=\"progress-text\">\r\n              {Math.round(chapterProgress[selectedChapter])}% selesai\r\n            </p>\r\n\r\n            <div className=\"levels\">\r\n              {chapters[selectedChapter].levels.map((level, levelIndex) => (\r\n                <div key={levelIndex} className=\"level-container\">\r\n                  <button\r\n                    className={`level-button ${\r\n                      isLevelCompleted(selectedChapter, levelIndex)\r\n                        ? \"level-completed\"\r\n                        : \"\"\r\n                    }`}\r\n                    onClick={() =>\r\n                      handleLevelClick(selectedChapter, levelIndex)\r\n                    }\r\n                  >\r\n                    {level}\r\n                    <div className=\"level-progress-bar\">\r\n                      <div\r\n                        className=\"level-progress-fill\"\r\n                        style={{\r\n                          width: `${getLevelProgress(\r\n                            selectedChapter,\r\n                            levelIndex\r\n                          )}%`,\r\n                        }}\r\n                      ></div>\r\n                    </div>\r\n                  </button>\r\n\r\n                  <div className=\"category-indicators\">\r\n                    {operations.map((operation, opIndex) => (\r\n                      <div\r\n                        key={opIndex}\r\n                        className={`category-indicator ${\r\n                          isCategoryCompleted(\r\n                            selectedChapter,\r\n                            levelIndex,\r\n                            operation\r\n                          )\r\n                            ? \"category-completed\"\r\n                            : \"\"\r\n                        }`}\r\n                        title={`${operation} ${\r\n                          isCategoryCompleted(\r\n                            selectedChapter,\r\n                            levelIndex,\r\n                            operation\r\n                          )\r\n                            ? \"(completed)\"\r\n                            : \"(not completed)\"\r\n                        }`}\r\n                      >\r\n                        {isCategoryCompleted(\r\n                          selectedChapter,\r\n                          levelIndex,\r\n                          operation\r\n                        ) && \"\"}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <button className=\"close-popup-button\" onClick={handleClosePopup}>\r\n               Kembali ke Menu\r\n            </button>\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport \"./kategori.css\";\r\n\r\nexport default function CategoryPage() {\r\n  const [selectedRole, setSelectedRole] = useState(null);\r\n\r\n  const handleRoleClick = (role) => {\r\n    setSelectedRole(role);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setSelectedRole(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"kategori-container\">\r\n      <motion.h1\r\n        initial={{ opacity: 0, y: -20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.6 }}\r\n        className=\"kategori-title\"\r\n      >\r\n        Pilih Kategori Anda\r\n      </motion.h1>\r\n      <div className=\"kategori-grid\">\r\n        {[\"Siswa\", \"Guru\", \"Orang Tua\"].map((role, index) => (\r\n          <motion.div\r\n            key={role}\r\n            className=\"kategori-item\"\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.2 * index }}\r\n            onClick={() => handleRoleClick(role)}\r\n          >\r\n            <h2 className=\"kategori-text\">{role}</h2>\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n\r\n      {selectedRole && (\r\n        <div className=\"login-popup\">\r\n          <div className=\"login-form\">\r\n            <h2>Login Sebagai {selectedRole}</h2>\r\n            <input type=\"text\" placeholder=\"Username\" />\r\n            <input type=\"password\" placeholder=\"Password\" />\r\n            <button>Login</button>\r\n            <button className=\"close-button\" onClick={handleClose}>Tutup</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// src/GamePage.jsx\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport \"./game.css\";\r\n\r\nexport default function GamePage() {\r\n  const { chapterIndex, levelIndex } = useParams();\r\n  const [jawaban, setJawaban] = useState(\"\");\r\n  const [skor, setSkor] = useState(0);\r\n  const [soalIndex, setSoalIndex] = useState(0);\r\n  const [progress, setProgress] = useState(0);\r\n  const [showError, setShowError] = useState(false);\r\n  const [shake, setShake] = useState(false);\r\n  const [wrongAnswers, setWrongAnswers] = useState([]);\r\n  const [isRetryMode, setIsRetryMode] = useState(false);\r\n  const [soalStatus, setSoalStatus] = useState([]);\r\n  const navigate = useNavigate();\r\n  \r\n  const bankSoal = {\r\n    0: { \r\n      0: [ \r\n        { pertanyaan: \"Berapa hasil dari 2 + 2?\", jawaban: \"4\", poin: 20 },\r\n        { pertanyaan: \"Berapa hasil dari 5 + 3?\", jawaban: \"8\", poin: 20 },\r\n        { pertanyaan: \"Berapa hasil dari 4 + 6?\", jawaban: \"10\", poin: 20 },\r\n        { pertanyaan: \"Berapa hasil dari 7 + 2?\", jawaban: \"9\", poin: 20 },\r\n        { pertanyaan: \"Berapa hasil dari 3 + 8?\", jawaban: \"11\", poin: 20 },\r\n      ]\r\n    }\r\n  };\r\n\r\n  const getSoal = () => {\r\n    try {\r\n      if (isRetryMode) {\r\n        const soalSalahIndex = wrongAnswers[soalIndex];\r\n        return bankSoal[parseInt(chapterIndex)][parseInt(levelIndex)][soalSalahIndex];\r\n      } else {\r\n        return bankSoal[parseInt(chapterIndex)][parseInt(levelIndex)][soalIndex];\r\n      }\r\n    } catch (error) {\r\n      return { pertanyaan: \"Soal tidak tersedia\", jawaban: \"\", poin: 0 };\r\n    }\r\n  };\r\n\r\n  const getTotalSoal = () => {\r\n    try {\r\n      if (isRetryMode) {\r\n        return wrongAnswers.length;\r\n      } else {\r\n        return bankSoal[parseInt(chapterIndex)][parseInt(levelIndex)].length;\r\n      }\r\n    } catch (error) {\r\n      return 1;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const storedProgress = JSON.parse(localStorage.getItem(\"chapterProgress\")) || [];\r\n    const storedScores = JSON.parse(localStorage.getItem(\"levelScores\")) || {};\r\n    if (storedProgress && storedProgress[chapterIndex]) {\r\n      setProgress(storedProgress[chapterIndex]);\r\n    }\r\n    const totalSoal = bankSoal[parseInt(chapterIndex)][parseInt(levelIndex)].length;\r\n    setSoalStatus(Array(totalSoal).fill(null));\r\n  }, [chapterIndex, levelIndex]);\r\n\r\n  const updateProgress = (isBenar) => {\r\n    if (isBenar) {\r\n      const poinSoal = getSoal().poin || 0;\r\n      const totalSoal = getTotalSoal();\r\n      const progressIncrement = (poinSoal / (totalSoal * 20)) * 100;\r\n      const newProgress = Math.min(progress + progressIncrement, 100);\r\n      setProgress(newProgress);\r\n      \r\n      // Simpan progres di localStorage\r\n      const storedProgress = JSON.parse(localStorage.getItem(\"chapterProgress\")) || Array(3).fill(0);\r\n      storedProgress[chapterIndex] = newProgress;\r\n      localStorage.setItem(\"chapterProgress\", JSON.stringify(storedProgress));\r\n      \r\n      const currentScore = skor + poinSoal;\r\n      setSkor(currentScore);\r\n      \r\n      // Simpan skor dan progress berdasarkan avatar yang dipilih\r\n      const savedAvatar = localStorage.getItem(\"selectedAvatar\");\r\n      if (savedAvatar) {\r\n        const avatar = JSON.parse(savedAvatar);\r\n        const avatarKey = `avatar_${avatar.name}_levelScores`;\r\n        const storedScores = JSON.parse(localStorage.getItem(avatarKey)) || {};\r\n        const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n        \r\n        // Simpan skor\r\n        storedScores[levelKey] = currentScore;\r\n        localStorage.setItem(avatarKey, JSON.stringify(storedScores));\r\n        \r\n        // Simpan progress per chapter untuk avatar\r\n        const avatarProgressKey = `avatar_${avatar.name}_chapterProgress`;\r\n        const avatarProgress = JSON.parse(localStorage.getItem(avatarProgressKey)) || Array(3).fill(0);\r\n        avatarProgress[chapterIndex] = newProgress;\r\n        localStorage.setItem(avatarProgressKey, JSON.stringify(avatarProgress));\r\n        \r\n        // Dapatkan jenis operasi dari URL path\r\n        const pathParts = window.location.pathname.split('/');\r\n        const operation = pathParts.length > 2 ? pathParts[2] : 'addition'; // default to addition\r\n        \r\n        // Simpan jenis operasi\r\n        const operationData = JSON.parse(localStorage.getItem(`${avatarKey}_operations`)) || {};\r\n        operationData[levelKey] = operation;\r\n        localStorage.setItem(`${avatarKey}_operations`, JSON.stringify(operationData));\r\n        \r\n        // Simpan timestamp\r\n        localStorage.setItem(`${levelKey}_timestamp`, Date.now().toString());\r\n        \r\n        // Simpan operasi saat ini untuk digunakan di HasilPage\r\n        localStorage.setItem(\"currentOperation\", operation);\r\n        \r\n        // Simpan informasi karakter yang sedang aktif\r\n        localStorage.setItem(\"activeCharacter\", savedAvatar);\r\n      }\r\n      \r\n      // Progress lama disimpan untuk backward compatibility\r\n      const storedScores = JSON.parse(localStorage.getItem(\"levelScores\")) || {};\r\n      const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n      storedScores[levelKey] = currentScore;\r\n      localStorage.setItem(\"levelScores\", JSON.stringify(storedScores));\r\n      \r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const handleJawaban = () => {\r\n    if (!jawaban.trim()) {\r\n      setShake(true);\r\n      setShowError(true);\r\n      setTimeout(() => {\r\n        setShake(false);\r\n      }, 500);\r\n      setTimeout(() => {\r\n        setShowError(false);\r\n      }, 3000);\r\n      return;\r\n    }\r\n    \r\n    const soalSekarang = getSoal();\r\n    const isBenar = jawaban.trim().toLowerCase() === soalSekarang.jawaban.toLowerCase();\r\n    \r\n    if (!isRetryMode) {\r\n      const updatedSoalStatus = [...soalStatus];\r\n      updatedSoalStatus[soalIndex] = isBenar;\r\n      setSoalStatus(updatedSoalStatus);\r\n      if (!isBenar) {\r\n        setWrongAnswers([...wrongAnswers, soalIndex]);\r\n      }\r\n    } else {\r\n      if (isBenar) {\r\n        const updatedWrongAnswers = [...wrongAnswers];\r\n        const currentWrongSoalIndex = wrongAnswers[soalIndex];\r\n        const updatedSoalStatus = [...soalStatus];\r\n        updatedSoalStatus[currentWrongSoalIndex] = true;\r\n        setSoalStatus(updatedSoalStatus);\r\n      }\r\n    }\r\n    \r\n    updateProgress(isBenar);\r\n    setJawaban(\"\");\r\n    \r\n    if (soalIndex < getTotalSoal() - 1) {\r\n      setSoalIndex(soalIndex + 1);\r\n    } else {\r\n      if (wrongAnswers.length > 0 && !isRetryMode) {\r\n        promptRetryWrongQuestions();\r\n      } else {\r\n        finishGame();\r\n      }\r\n    }\r\n  };\r\n\r\n  const promptRetryWrongQuestions = () => {\r\n    const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n    localStorage.setItem(\"currentLevelKey\", levelKey);\r\n    localStorage.setItem(\"soalStatus\", JSON.stringify(soalStatus));\r\n    localStorage.setItem(\"wrongAnswers\", JSON.stringify(wrongAnswers));\r\n    localStorage.setItem(\"currentScore\", skor.toString());\r\n    \r\n    // Simpan total jumlah soal untuk digunakan di HasilPage\r\n    const totalSoal = getTotalSoal();\r\n    localStorage.setItem(\"totalSoal\", totalSoal.toString());\r\n    \r\n    navigate(`/hasil-retry/${skor}`);\r\n  };\r\n  \r\n  const finishGame = () => {\r\n    const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n    localStorage.setItem(\"currentLevelKey\", levelKey);\r\n    \r\n    // Simpan total jumlah soal untuk digunakan di HasilPage\r\n    const totalSoal = getTotalSoal();\r\n    localStorage.setItem(\"totalSoal\", totalSoal.toString());\r\n    \r\n    navigate(`/hasil/${skor}`);\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleJawaban();\r\n    }\r\n  };\r\n  \r\n  useEffect(() => {\r\n    const retryMode = localStorage.getItem(\"retryMode\") === \"true\";\r\n    if (retryMode) {\r\n      const storedWrongAnswers = JSON.parse(localStorage.getItem(\"wrongAnswers\")) || [];\r\n      const storedSoalStatus = JSON.parse(localStorage.getItem(\"soalStatus\")) || [];\r\n      const storedScore = parseInt(localStorage.getItem(\"currentScore\") || \"0\");\r\n      setIsRetryMode(true);\r\n      setWrongAnswers(storedWrongAnswers);\r\n      setSoalStatus(storedSoalStatus);\r\n      setSkor(storedScore);\r\n      setSoalIndex(0);\r\n      localStorage.removeItem(\"retryMode\");\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"game-page\">\r\n      <h1>\r\n        {isRetryMode ? \"Perbaiki Jawabanmu\" : \"Game Matematika\"}\r\n      </h1>\r\n\r\n      <div className=\"game-progress-container\">\r\n        <div className=\"game-progress-label\">\r\n          Progress: {Math.round(progress)}%\r\n        </div>\r\n        <div className=\"game-progress-bar\">\r\n          <div\r\n            className=\"game-progress-fill\"\r\n            style={{ width: `${progress}%` }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"soal-info\">\r\n        {isRetryMode ? (\r\n          <p className=\"retry-mode\">Mode: Perbaikan Jawaban</p>\r\n        ) : null}\r\n        <p>Bab {parseInt(chapterIndex) + 1}, Level {parseInt(levelIndex) + 1}</p>\r\n        <p>\r\n          Soal {soalIndex + 1} dari {getTotalSoal()}\r\n          {isRetryMode ? \" (yang perlu diperbaiki)\" : \"\"}\r\n        </p>\r\n        <p>Skor: {skor}</p>\r\n      </div>\r\n\r\n      <motion.div \r\n        className=\"soal-container\"\r\n        animate={{ scale: shake ? [1, 1.02, 0.98, 1] : 1 }}\r\n        transition={{ duration: 0.5 }}\r\n      >\r\n        <motion.p \r\n          className=\"pertanyaan\"\r\n          initial={{ scale: 0.9, opacity: 0 }}\r\n          animate={{ scale: 1, opacity: 1 }}\r\n          key={`${isRetryMode}-${soalIndex}`}\r\n          transition={{ type: \"spring\", stiffness: 300, damping: 15 }}\r\n        >\r\n          {getSoal().pertanyaan}\r\n        </motion.p>\r\n\r\n        <div className=\"input-container\">\r\n          <motion.input\r\n            type=\"text\"\r\n            value={jawaban}\r\n            onChange={(e) => setJawaban(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            placeholder={isRetryMode ? \"Perbaiki jawabanmu...\" : \"Masukkan jawaban...\"}\r\n            autoFocus\r\n            className={shake ? \"shake-input\" : \"\"}\r\n            animate={{ \r\n              border: showError ? \"2px solid #ff3d3d\" : \"2px solid #999\" \r\n            }}\r\n          />\r\n          \r\n          <motion.button \r\n            onClick={handleJawaban}\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            className={isRetryMode ? \"retry-button\" : \"\"}\r\n          >\r\n            {isRetryMode ? \"Perbaiki\" : \"Jawab\"}\r\n          </motion.button>\r\n        </div>\r\n\r\n        <AnimatePresence>\r\n          {showError && (\r\n            <motion.div \r\n              className=\"error-message\"\r\n              initial={{ opacity: 0, y: -20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -20 }}\r\n              transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\r\n            >\r\n              <div className=\"error-icon\"></div>\r\n              <p>Oops! Jawaban tidak boleh kosong</p>\r\n              <div className=\"error-character\">\r\n                <img \r\n                  src=\"/src/assets/icon_murid.PNG\" \r\n                  alt=\"Karakter\" \r\n                  className=\"error-character-img\"\r\n                />\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </motion.div>\r\n      \r\n      <motion.div \r\n        className=\"helper-frame\"\r\n        initial={{ x: 100, opacity: 0 }}\r\n        animate={{ x: 0, opacity: 1 }}\r\n        transition={{ delay: 0.5, type: \"spring\", stiffness: 100 }}\r\n      >\r\n        <div className=\"speech-bubble\">\r\n          <p>\r\n            {isRetryMode \r\n              ? \"Yuk, perbaiki jawaban yang salah! \" \r\n              : \"Ayo jawab pertanyaannya! \"}\r\n          </p>\r\n        </div>\r\n        <img \r\n          src={isRetryMode ? \"/src/assets/harimau.png\" : \"/src/assets/anjing.png\"} \r\n          alt=\"Karakter Pembantu\" \r\n          className=\"helper-character-img\"\r\n        />\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n","// src/HasilPage.jsx\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport \"./skor.css\";\r\n\r\nexport default function HasilPage() {\r\n  const { score } = useParams(); // Parameter skor dari URL\r\n  const navigate = useNavigate();\r\n  const [levelInfo, setLevelInfo] = useState({\r\n    babIndex: 0,\r\n    levelIndex: 0,\r\n    levelKey: \"\"\r\n  });\r\n  \r\n  useEffect(() => {\r\n    // Mengambil informasi level yang baru saja dimainkan\r\n    const currentLevelKey = localStorage.getItem(\"currentLevelKey\") || \"\";\r\n    \r\n    // Jika ada, parse untuk mendapatkan info bab dan level\r\n    if (currentLevelKey) {\r\n      // Format: \"bab0_level0\"\r\n      const babMatch = currentLevelKey.match(/bab(\\d+)/);\r\n      const levelMatch = currentLevelKey.match(/level(\\d+)/);\r\n      \r\n      if (babMatch && levelMatch) {\r\n        setLevelInfo({\r\n          babIndex: parseInt(babMatch[1]),\r\n          levelIndex: parseInt(levelMatch[1]),\r\n          levelKey: currentLevelKey\r\n        });\r\n      }\r\n    }\r\n    \r\n    // Simpan skor ke localStorage berdasarkan avatar dan juga simpan jenis operasi\r\n    if (currentLevelKey && score) {\r\n      const savedAvatar = localStorage.getItem(\"selectedAvatar\");\r\n      if (savedAvatar) {\r\n        const avatar = JSON.parse(savedAvatar);\r\n        const avatarKey = `avatar_${avatar.name}_levelScores`;\r\n        \r\n        // Ambil jenis operasi dari localStorage yang disimpan oleh GamePage\r\n        const operation = localStorage.getItem(\"currentOperation\") || 'addition';\r\n        \r\n        // Gunakan timestamp untuk membuat key yang benar-benar unik setiap kali bermain\r\n        const timestamp = Date.now();\r\n        \r\n        // Buat key yang unik berdasarkan level, operasi, dan timestamp\r\n        const uniqueKey = `${currentLevelKey}_${operation}_${timestamp}`;\r\n        \r\n        // Ambil data skor yang sudah ada untuk avatar ini\r\n        let levelScores = JSON.parse(localStorage.getItem(avatarKey)) || {};\r\n        \r\n        // Tambahkan entri baru dengan timestamp unik\r\n        levelScores[uniqueKey] = parseInt(score);\r\n        \r\n        // Simpan kembali ke localStorage\r\n        localStorage.setItem(avatarKey, JSON.stringify(levelScores));\r\n        \r\n        // Simpan jenis operasi dengan key yang unik juga\r\n        const operationsKey = `avatar_${avatar.name}_operations`;\r\n        const operationData = JSON.parse(localStorage.getItem(operationsKey)) || {};\r\n        operationData[uniqueKey] = operation;\r\n        localStorage.setItem(operationsKey, JSON.stringify(operationData));\r\n        \r\n        // Simpan timestamp sebagai bagian dari key dan juga sebagai value terpisah\r\n        localStorage.setItem(`${uniqueKey}_timestamp`, timestamp.toString());\r\n        \r\n        // Hitung dan simpan progress chapter untuk avatar\r\n        // Parse info chapter dari currentLevelKey\r\n        const [babKey, _] = currentLevelKey.split(\"_\");\r\n        const chapterIndex = parseInt(babKey.replace(\"bab\", \"\"));\r\n        \r\n        // Ambil progress chapter avatar dari localStorage\r\n        const avatarProgressKey = `avatar_${avatar.name}_chapterProgress`;\r\n        let avatarProgress = JSON.parse(localStorage.getItem(avatarProgressKey)) || Array(3).fill(0);\r\n        \r\n        // Hitung level yang telah diselesaikan di chapter ini\r\n        const chapLevels = new Set();\r\n        Object.keys(levelScores).forEach(key => {\r\n          // Extract level part from keys like \"bab0_level0_addition_timestamp\"\r\n          const keyParts = key.split('_');\r\n          if (keyParts.length >= 2 && keyParts[0] === `bab${chapterIndex}`) {\r\n            chapLevels.add(keyParts[1]); // Add the level part\r\n          }\r\n        });\r\n        \r\n        const chapProgress = Math.min((chapLevels.size / 3) * 100, 100); // 3 level per chapter\r\n        \r\n        // Update progress chapter\r\n        avatarProgress[chapterIndex] = chapProgress;\r\n        localStorage.setItem(avatarProgressKey, JSON.stringify(avatarProgress));\r\n      }\r\n      \r\n      // Simpan juga ke format lama untuk backward compatibility (dengan key unik berbasis timestamp)\r\n      const operation = localStorage.getItem(\"currentOperation\") || 'addition';\r\n      const timestamp = Date.now();\r\n      const uniqueKey = `${currentLevelKey}_${operation}_${timestamp}`;\r\n      let levelScores = JSON.parse(localStorage.getItem(\"levelScores\")) || {};\r\n      levelScores[uniqueKey] = parseInt(score);\r\n      localStorage.setItem(\"levelScores\", JSON.stringify(levelScores));\r\n      \r\n      // Update chapter progress\r\n      const chapterProgress = JSON.parse(localStorage.getItem(\"chapterProgress\")) || [];\r\n      if (!chapterProgress.includes(uniqueKey)) {\r\n        chapterProgress.push(uniqueKey);\r\n        localStorage.setItem(\"chapterProgress\", JSON.stringify(chapterProgress));\r\n      }\r\n    }\r\n    \r\n    // Efek confetti untuk skor di atas 50\r\n    if (parseInt(score) > 50) {\r\n      // Bisa implementasikan efek confetti menggunakan library seperti canvas-confetti\r\n      // Atau gunakan animasi CSS sederhana\r\n      const confettiContainer = document.createElement('div');\r\n      confettiContainer.className = 'confetti-container';\r\n      document.body.appendChild(confettiContainer);\r\n      \r\n      // Pembersihan saat komponen unmount\r\n      return () => {\r\n        document.body.removeChild(confettiContainer);\r\n      };\r\n    }\r\n  }, [score]);\r\n\r\n  const handleKembali = () => {\r\n    navigate(\"/main-siswa\");\r\n  };\r\n\r\n  const handleNextLevel = () => {\r\n    // Navigasi ke level berikutnya jika tersedia\r\n    if (levelInfo.levelIndex < 2) {\r\n      // Masih dalam bab yang sama, level berikutnya\r\n      navigate(`/materi/${levelInfo.babIndex}/${levelInfo.levelIndex + 1}`);\r\n    } else if (levelInfo.babIndex < 2) {\r\n      // Bab berikutnya, level pertama\r\n      navigate(`/materi/${levelInfo.babIndex + 1}/0`);\r\n    } else {\r\n      // Sudah selesai semua level\r\n      navigate(\"/main-siswa\");\r\n    }\r\n  };\r\n\r\n  const getScoreMessage = () => {\r\n    const scoreNum = parseInt(score);\r\n    // Dapatkan total soal dari localStorage atau gunakan nilai standar (5)\r\n    const totalSoal = parseInt(localStorage.getItem(\"totalSoal\")) || 5;\r\n    // Dapatkan total poin maksimal (masing-masing soal 20 poin)\r\n    const maxScore = totalSoal * 20;\r\n    // Hitung persentase skor\r\n    const scorePercentage = (scoreNum / maxScore) * 100;\r\n    \r\n    if (scorePercentage <= 75) {\r\n      return \"Jangan Menyerah, Coba Lagi Ya!\";\r\n    } else if (scorePercentage > 75 && scorePercentage <= 85) {\r\n      return \"Wah Hebat, Sedikit Lagi Kamu Mencapai Skor Sempurna!\";\r\n    } else {\r\n      return \"Wah Hebatt, Pertahankan Ya!\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div \r\n      className=\"hasil-page\"\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 0.5 }}\r\n      style={{ minHeight: \"100vh\", width: \"100%\" }}\r\n    >\r\n      <motion.h1\r\n        initial={{ scale: 0.5 }}\r\n        animate={{ scale: 1 }}\r\n        transition={{ type: \"spring\", stiffness: 200, damping: 10 }}\r\n      >\r\n         Level Selesai!\r\n      </motion.h1>\r\n      \r\n      <p>Bab {levelInfo.babIndex + 1}, Level {levelInfo.levelIndex + 1}</p>\r\n      \r\n      <motion.div \r\n        className=\"score-display\"\r\n        initial={{ scale: 0.8, rotate: -5 }}\r\n        animate={{ scale: 1, rotate: 0 }}\r\n        transition={{ delay: 0.3, type: \"spring\" }}\r\n      >\r\n        <p className=\"score-number\">{score}</p>\r\n        <p className=\"score-label\">Skor Anda</p>\r\n      </motion.div>\r\n      \r\n      <p className=\"score-message\">{getScoreMessage()}</p>\r\n      \r\n      <div className=\"hasil-buttons\">\r\n        {/* <button onClick={handleKembali}>Kembali ke Menu</button> */}\r\n        <button onClick={handleNextLevel} className=\"next-level-button\">\r\n          Level Selanjutnya \r\n        </button>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport \"./skor.css\";\r\nimport supabase from \"./config/supabaseClient\";\r\n\r\nexport default function Skor() {\r\n  const navigate = useNavigate();\r\n  const [userData, setUserData] = useState({\r\n    name: \"\",\r\n    role: \"\",\r\n    avatar: null,\r\n    id_kelas: null, // tambahkan default value untuk id_kelas\r\n  });\r\n\r\n  // Data progres siswa\r\n  const [progressData, setProgressData] = useState({\r\n    totalScore: 0,\r\n    completedLevels: 0,\r\n    completedOperations: 0,\r\n    totalOperations: 36, // Total operasi: 3 bab  3 level per bab  4 operasi per level\r\n    highestScore: 0,\r\n    recentActivity: [],\r\n  });\r\n  // State untuk menyimpan bab dan level terakhir yang diklik\r\n  const [lastClickedChapter] = useState(1);\r\n  const [lastClickedLevel] = useState(1);\r\n\r\n  useEffect(() => {\r\n    const fetchUserData = async () => {\r\n      const operationTypes = {\r\n        addition: \"Addition\",\r\n        subtraction: \"Subtraction\",\r\n        multiplication: \"Multiplication\",\r\n        division: \"Division\",\r\n      };\r\n\r\n      // Mengambil data pengguna dari localStorage\r\n      const userRole = localStorage.getItem(\"userRole\");\r\n      const avatarData = JSON.parse(localStorage.getItem(\"selectedAvatar\"));\r\n      const existingKelas = localStorage.getItem(\"userKelas\");\r\n      const id_siswa = localStorage.getItem(\"id_siswa\");\r\n      const userDataFromStorage = JSON.parse(\r\n        localStorage.getItem(\"userData\") || \"{}\"\r\n      );\r\n\r\n      if (!avatarData) {\r\n        navigate(\"/login\");\r\n        return;\r\n      }\r\n\r\n      // Inisialisasi siswaData dengan data dari localStorage\r\n      let siswaData = null;\r\n\r\n      // Jika ada userData tersimpan dengan id_siswa, gunakan itu\r\n      if (userDataFromStorage && userDataFromStorage.id_siswa) {\r\n        siswaData = userDataFromStorage;\r\n        console.log(\"Using stored user data:\", siswaData);\r\n      } else {\r\n        // Jika tidak ada userData, coba ambil dari Supabase\r\n        try {\r\n          let query = supabase.from(\"siswa\").select(\"*\");\r\n\r\n          // Prioritaskan pencarian berdasarkan id_siswa\r\n          if (id_siswa) {\r\n            query = query.eq(\"id_siswa\", id_siswa);\r\n            console.log(\"Searching by id_siswa:\", id_siswa);\r\n          } else {\r\n            // Jika tidak ada id_siswa, gunakan nama avatar sebagai fallback\r\n            query = query.ilike(\"nama\", avatarData.name);\r\n            console.log(\"Searching by name:\", avatarData.name);\r\n          }\r\n\r\n          const { data, error } = await query.maybeSingle();\r\n\r\n          console.log(\"Fetched student data:\", data);\r\n\r\n          if (error) {\r\n            console.error(\"Error fetching siswa:\", error);\r\n          } else if (data) {\r\n            // Simpan data siswa ke localStorage\r\n            localStorage.setItem(\"userData\", JSON.stringify(data));\r\n            localStorage.setItem(\"userKelas\", data.id_kelas.toString());\r\n            localStorage.setItem(\"id_siswa\", data.id_siswa.toString());\r\n            siswaData = data;\r\n          } else {\r\n            console.log(\"No student data found\");\r\n            // Jika tidak ada data ditemukan, coba ambil dari localStorage yang ada\r\n            if (existingKelas) {\r\n              siswaData = { id_kelas: parseInt(existingKelas) };\r\n            }\r\n          }\r\n        } catch (err) {\r\n          console.error(\"Exception fetching siswa:\", err);\r\n          // Gunakan data dari localStorage jika ada error\r\n          if (existingKelas) {\r\n            siswaData = { id_kelas: parseInt(existingKelas) };\r\n          }\r\n        }\r\n      }\r\n\r\n      // If no class data was found anywhere, set it to class 2\r\n      if (!siswaData) {\r\n        siswaData = { id_kelas: 2 };\r\n        localStorage.setItem(\"userKelas\", \"2\");\r\n      }\r\n      setUserData({\r\n        name: userDataFromStorage?.nama || avatarData.name || \"Siswa\",\r\n        role: userRole || \"siswa\",\r\n        avatar: {\r\n          ...avatarData,\r\n          displayName: userDataFromStorage?.nama || avatarData.name,\r\n        },\r\n        id_kelas: siswaData.id_kelas,\r\n      });\r\n\r\n      // Mengambil data progres dari avatar yang dipilih\r\n      let levelScores = {};\r\n      const avatarKey = `avatar_${avatarData.name}_levelScores`;\r\n      levelScores = JSON.parse(localStorage.getItem(avatarKey)) || {};\r\n\r\n      // Mengambil data operasi matematika yang disimpan\r\n      const avatarOperationsKey = `avatar_${avatarData.name}_operations`;\r\n      const operationData =\r\n        JSON.parse(localStorage.getItem(avatarOperationsKey)) || {};\r\n\r\n      // Menghitung total skor dan level yang sudah diselesaikan\r\n      let totalScore = 0;\r\n      let completedLevels = 0;\r\n      let completedOperations = 0;\r\n      let highestScore = 0;\r\n      let recentActivity = [];\r\n\r\n      // Buat lookup untuk melacak operasi yang telah diselesaikan per level\r\n      const completedOperationsByLevel = {};\r\n\r\n      // Track unique levels\r\n      const uniqueLevels = new Set();\r\n\r\n      // Menghitung jumlah operasi yang diselesaikan berdasarkan data skor\r\n      Object.entries(levelScores).forEach(([key, score]) => {\r\n        if (score > 0) {\r\n          // Key sekarang dalam format \"babX_levelY_operation_timestamp\" atau format lama\r\n          const keyParts = key.split(\"_\");\r\n\r\n          // Handle berbagai format key\r\n          let levelKey, operation, timestamp;\r\n\r\n          if (keyParts.length >= 3) {\r\n            // Format baru dengan timestamp: babX_levelY_operation_timestamp\r\n            levelKey = `${keyParts[0]}_${keyParts[1]}`;\r\n            operation = keyParts[2];\r\n            timestamp =\r\n              keyParts.length > 3 ? keyParts[3] : Date.now().toString();\r\n          } else if (keyParts.length === 2) {\r\n            // Format lama: babX_levelY\r\n            levelKey = key;\r\n            operation = operationData[key] || \"unknown\";\r\n            timestamp = Date.now().toString();\r\n          } else {\r\n            // Format tidak dikenal\r\n            return;\r\n          }\r\n\r\n          // Tambahkan levelKey ke Set untuk melacak level unik\r\n          uniqueLevels.add(levelKey);\r\n\r\n          if (!completedOperationsByLevel[levelKey]) {\r\n            completedOperationsByLevel[levelKey] = [];\r\n          }\r\n\r\n          if (!completedOperationsByLevel[levelKey].includes(operation)) {\r\n            completedOperationsByLevel[levelKey].push(operation);\r\n            completedOperations++;\r\n          }\r\n\r\n          if (score > highestScore) {\r\n            highestScore = score;\r\n          }\r\n\r\n          // Format: \"bab0_level0\" -> \"Bab 1 Level 1\"\r\n          const [bab, level] = levelKey.split(\"_\");\r\n          const babNumber = parseInt(bab.replace(\"bab\", \"\")) + 1; // +1 karena indeks dimulai dari 0\r\n          const levelNumber = parseInt(level.replace(\"level\", \"\")) + 1; // +1 karena indeks dimulai dari 0\r\n\r\n          // Mendapatkan jenis operasi matematika\r\n          const operationLabel = operationTypes[operation] || operation;\r\n\r\n          // Gunakan key lengkap sebagai ID unik\r\n          const activityTimestamp = parseInt(\r\n            localStorage.getItem(`${key}_timestamp`) || timestamp\r\n          );\r\n\r\n          recentActivity.push({\r\n            id: key, // Gunakan key lengkap sebagai ID unik\r\n            bab: babNumber,\r\n            level: levelNumber,\r\n            title: `Level ${levelNumber} ${operationLabel}`,\r\n            score: score,\r\n            timestamp: activityTimestamp,\r\n            operation: operation,\r\n          });\r\n\r\n          totalScore += score;\r\n        }\r\n      });\r\n\r\n      // Hitung berapa level yang memiliki setidaknya satu operasi yang diselesaikan\r\n      completedLevels = uniqueLevels.size;\r\n\r\n      // Urutkan aktivitas terbaru berdasarkan timestamp (terbaru dulu)\r\n      recentActivity.sort((a, b) => b.timestamp - a.timestamp);\r\n\r\n      setProgressData({\r\n        totalScore,\r\n        completedOperations,\r\n        completedLevels,\r\n        totalOperations: 36, // 3 bab  3 level  4 operasi\r\n        highestScore,\r\n        recentActivity,\r\n      });\r\n    };\r\n\r\n    fetchUserData();\r\n  }, [navigate]);\r\n\r\n  const getProgressPercentage = () => {\r\n    return Math.round(\r\n      (progressData.completedOperations / progressData.totalOperations) * 100\r\n    );\r\n  };\r\n  const handleBackToMenu = () => {\r\n    // Ambil kelas dari userData yang sudah diupdate dari database\r\n    const kelasUser = userData.id_kelas;\r\n    console.log(\"Navigating based on kelas:\", kelasUser);\r\n\r\n    // Navigasi berdasarkan kelas pengguna\r\n    switch (kelasUser) {\r\n      case 2:\r\n        navigate(\"/kelas2\");\r\n        break;\r\n      case 4:\r\n        navigate(\"/kelas4\");\r\n        break;\r\n      case 5:\r\n        navigate(\"/kelas5\");\r\n        break;\r\n      case 6:\r\n        navigate(\"/kelas6\");\r\n        break;\r\n      default:\r\n        navigate(\"/main-siswa\");\r\n    }\r\n  };\r\n\r\n  // Fungsi untuk mendapatkan aktivitas berdasarkan bab, level, dan operasi\r\n  const getActivitiesByChapterLevelAndOperation = (bab, level, operation) => {\r\n    return progressData.recentActivity.filter(\r\n      (activity) =>\r\n        activity.bab === bab &&\r\n        activity.level === level &&\r\n        activity.operation === operation\r\n    );\r\n  };\r\n\r\n  // Fungsi untuk memformat tanggal aktivitas\r\n  const formatActivityDate = (timestamp) => {\r\n    const date = new Date(timestamp);\r\n    return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;\r\n  };\r\n  return (\r\n    <motion.div\r\n      className=\"hasil-page skor-page\"\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 0.5 }}\r\n    >\r\n      <h1>Progres Belajarmu</h1>\r\n\r\n      {/* Informasi profil */}\r\n      <div className=\"profile-info\">\r\n        {userData.avatar && (\r\n          <div className=\"avatar-container\">\r\n            <img\r\n              src={userData.avatar.src}\r\n              alt=\"Avatar\"\r\n              className=\"user-avatar\"\r\n            />\r\n          </div>\r\n        )}\r\n        <p>Hai, {userData.avatar ? userData.avatar.displayName : \"Siswa\"}!</p>\r\n      </div>\r\n\r\n      {/* Progres overview */}\r\n      <div className=\"progress-overview\">\r\n        <p>\r\n          Total Skor: <strong>{progressData.totalScore}</strong>\r\n        </p>\r\n        <p>\r\n          Level Mulai Dikerjakan:{\" \"}\r\n          <strong>{progressData.completedLevels}</strong> dari 9\r\n        </p>\r\n        <p>\r\n          Operasi Selesai: <strong>{progressData.completedOperations}</strong>{\" \"}\r\n          dari {progressData.totalOperations}\r\n        </p>\r\n        <p>\r\n          Progres Keseluruhan: <strong>{getProgressPercentage()}%</strong>\r\n        </p>\r\n      </div>\r\n\r\n      {/* Progress bar */}\r\n      <div className=\"skor-progress-container\">\r\n        <div className=\"skor-progress-bar\">\r\n          <div\r\n            className=\"skor-progress-fill\"\r\n            style={{ width: `${getProgressPercentage()}%` }}\r\n          ></div>\r\n        </div>\r\n        <p className=\"progress-percentage\">{getProgressPercentage()}%</p>\r\n      </div>\r\n\r\n      {/* Highlight capaian */}\r\n      <div className=\"achievement-highlight\">\r\n        <p>\r\n          Skor Tertinggi: <strong>{progressData.highestScore}</strong>\r\n        </p>\r\n      </div>\r\n\r\n      {/* Aktivitas terbaru - menampilkan semua operasi dan multiple entries */}\r\n      {progressData.recentActivity.length > 0 ? (\r\n        <div className=\"recent-activities-container\">\r\n          <h2 className=\"aktivitas-title\">Aktivitas Terakhir</h2>\r\n          <div className=\"recent-activities-box\">\r\n            <h3 className=\"bab-title\">Bab {lastClickedChapter}</h3>\r\n            <div className=\"divider\"></div>\r\n\r\n            <div className=\"level-container\">\r\n              <h4 className=\"level-title\">Level {lastClickedLevel}</h4>\r\n\r\n              {/* Tampilkan aktivitas terkelompok berdasarkan operasi */}\r\n              <div className=\"operations-container\">\r\n                {/* Addition Activities */}\r\n                <div className=\"operation-section\">\r\n                  <h5 className=\"operation-title\">Addition</h5>\r\n                  <div className=\"activities-grid\">\r\n                    {getActivitiesByChapterLevelAndOperation(\r\n                      lastClickedChapter,\r\n                      lastClickedLevel,\r\n                      \"addition\"\r\n                    ).length > 0 ? (\r\n                      getActivitiesByChapterLevelAndOperation(\r\n                        lastClickedChapter,\r\n                        lastClickedLevel,\r\n                        \"addition\"\r\n                      ).map((activity) => (\r\n                        <div key={activity.id} className=\"activity-white-card\">\r\n                          <div className=\"operation-score\">\r\n                            Skor: <span>{activity.score}</span>\r\n                          </div>\r\n                          <div className=\"activity-date\">\r\n                            {formatActivityDate(activity.timestamp)}\r\n                          </div>\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <div className=\"no-activity-message\">\r\n                        Belum ada aktivitas Addition\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Subtraction Activities */}\r\n                <div className=\"operation-section\">\r\n                  <h5 className=\"operation-title\">Subtraction</h5>\r\n                  <div className=\"activities-grid\">\r\n                    {getActivitiesByChapterLevelAndOperation(\r\n                      lastClickedChapter,\r\n                      lastClickedLevel,\r\n                      \"subtraction\"\r\n                    ).length > 0 ? (\r\n                      getActivitiesByChapterLevelAndOperation(\r\n                        lastClickedChapter,\r\n                        lastClickedLevel,\r\n                        \"subtraction\"\r\n                      ).map((activity) => (\r\n                        <div key={activity.id} className=\"activity-white-card\">\r\n                          <div className=\"operation-score\">\r\n                            Skor: <span>{activity.score}</span>\r\n                          </div>\r\n                          <div className=\"activity-date\">\r\n                            {formatActivityDate(activity.timestamp)}\r\n                          </div>\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <div className=\"no-activity-message\">\r\n                        Belum ada aktivitas Subtraction\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Multiplication Activities */}\r\n                <div className=\"operation-section\">\r\n                  <h5 className=\"operation-title\">Multiplication</h5>\r\n                  <div className=\"activities-grid\">\r\n                    {getActivitiesByChapterLevelAndOperation(\r\n                      lastClickedChapter,\r\n                      lastClickedLevel,\r\n                      \"multiplication\"\r\n                    ).length > 0 ? (\r\n                      getActivitiesByChapterLevelAndOperation(\r\n                        lastClickedChapter,\r\n                        lastClickedLevel,\r\n                        \"multiplication\"\r\n                      ).map((activity) => (\r\n                        <div key={activity.id} className=\"activity-white-card\">\r\n                          <div className=\"operation-score\">\r\n                            Skor: <span>{activity.score}</span>\r\n                          </div>\r\n                          <div className=\"activity-date\">\r\n                            {formatActivityDate(activity.timestamp)}\r\n                          </div>\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <div className=\"no-activity-message\">\r\n                        Belum ada aktivitas Multiplication\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Division Activities */}\r\n                <div className=\"operation-section\">\r\n                  <h5 className=\"operation-title\">Division</h5>\r\n                  <div className=\"activities-grid\">\r\n                    {getActivitiesByChapterLevelAndOperation(\r\n                      lastClickedChapter,\r\n                      lastClickedLevel,\r\n                      \"division\"\r\n                    ).length > 0 ? (\r\n                      getActivitiesByChapterLevelAndOperation(\r\n                        lastClickedChapter,\r\n                        lastClickedLevel,\r\n                        \"division\"\r\n                      ).map((activity) => (\r\n                        <div key={activity.id} className=\"activity-white-card\">\r\n                          <div className=\"operation-score\">\r\n                            Skor: <span>{activity.score}</span>\r\n                          </div>\r\n                          <div className=\"activity-date\">\r\n                            {formatActivityDate(activity.timestamp)}\r\n                          </div>\r\n                        </div>\r\n                      ))\r\n                    ) : (\r\n                      <div className=\"no-activity-message\">\r\n                        Belum ada aktivitas Division\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"recent-activities-container empty-activities\">\r\n          <h2 className=\"aktivitas-title\">Aktivitas Terakhir</h2>\r\n          <div className=\"empty-message\">\r\n            <p>Belum ada aktivitas. Ayo mulai belajar!</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Tombol navigasi */}\r\n      <div className=\"navigation-buttons\">\r\n        <button onClick={handleBackToMenu} className=\"menu-button\">\r\n          Kembali ke Menu\r\n        </button>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n","// src/HasilRetryPage.jsx\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport \"./skor.css\";\r\nimport \"./game.css\";\r\n\r\nexport default function HasilRetryPage() {\r\n  const { score } = useParams();\r\n  const navigate = useNavigate();\r\n  const [levelInfo, setLevelInfo] = useState({\r\n    babIndex: 0,\r\n    levelIndex: 0,\r\n    levelKey: \"\"\r\n  });\r\n  const [wrongQuestionsCount, setWrongQuestionsCount] = useState(0);\r\n  \r\n  useEffect(() => {\r\n    // Mengambil informasi level yang baru saja dimainkan\r\n    const currentLevelKey = localStorage.getItem(\"currentLevelKey\") || \"\";\r\n    const wrongAnswers = JSON.parse(localStorage.getItem(\"wrongAnswers\")) || [];\r\n    \r\n    setWrongQuestionsCount(wrongAnswers.length);\r\n    \r\n    // Jika ada, parse untuk mendapatkan info bab dan level\r\n    if (currentLevelKey) {\r\n      // Format: \"bab0_level0\"\r\n      const babMatch = currentLevelKey.match(/bab(\\d+)/);\r\n      const levelMatch = currentLevelKey.match(/level(\\d+)/);\r\n      \r\n      if (babMatch && levelMatch) {\r\n        setLevelInfo({\r\n          babIndex: parseInt(babMatch[1]),\r\n          levelIndex: parseInt(levelMatch[1]),\r\n          levelKey: currentLevelKey\r\n        });\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const getScoreMessage = () => {\r\n    const scoreNum = parseInt(score);\r\n    // Dapatkan total soal dari localStorage atau gunakan nilai standar (5)\r\n    const totalSoal = parseInt(localStorage.getItem(\"totalSoal\")) || 5;\r\n    // Dapatkan total poin maksimal (masing-masing soal 20 poin)\r\n    const maxScore = totalSoal * 20;\r\n    // Hitung persentase skor\r\n    const scorePercentage = (scoreNum / maxScore) * 100;\r\n    \r\n    if (scorePercentage <= 75) {\r\n      return \"Jangan Menyerah, Coba Lagi Ya!\";\r\n    } else if (scorePercentage > 75 && scorePercentage <= 85) {\r\n      return \"Wah Hebat, Sedikit Lagi Kamu Mencapai Skor Sempurna!\";\r\n    } else {\r\n      return \"Wah Hebatt, Pertahankan Ya!\";\r\n    }\r\n  };\r\n\r\n  const handleRetry = () => {\r\n    // Set mode retry di localStorage\r\n    localStorage.setItem(\"retryMode\", \"true\");\r\n    \r\n    // Kembali ke halaman game dengan bab dan level yang sama\r\n    navigate(`/game/${levelInfo.babIndex}/${levelInfo.levelIndex}`);\r\n  };\r\n\r\n  const handleSkip = () => {\r\n    // Hapus data retry dan lanjut ke halaman hasil normal\r\n    localStorage.removeItem(\"retryMode\");\r\n    localStorage.removeItem(\"wrongAnswers\");\r\n    localStorage.removeItem(\"soalStatus\");\r\n    \r\n    navigate(`/hasil/${score}`);\r\n  };\r\n\r\n  return (\r\n    <motion.div \r\n      className=\"hasil-page retry-page\"\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 0.5 }}\r\n    >\r\n      <motion.h1\r\n        initial={{ scale: 0.5 }}\r\n        animate={{ scale: 1 }}\r\n        transition={{ type: \"spring\", stiffness: 200, damping: 10 }}\r\n      >\r\n        Ayo Coba Lagi! \r\n      </motion.h1>\r\n      \r\n      <p>Bab {levelInfo.babIndex + 1}, Level {levelInfo.levelIndex + 1}</p>\r\n      \r\n      <motion.div \r\n        className=\"score-display\"\r\n        initial={{ scale: 0.8, rotate: -5 }}\r\n        animate={{ scale: 1, rotate: 0 }}\r\n        transition={{ delay: 0.3, type: \"spring\" }}\r\n      >\r\n        <p className=\"score-number\">{score}</p>\r\n        <p className=\"score-label\">Skor Saat Ini</p>\r\n      </motion.div>\r\n      \r\n      <p className=\"score-message\">{getScoreMessage()}</p>\r\n      \r\n      <div className=\"retry-info\">\r\n        <motion.div \r\n          className=\"wrong-answers-count\"\r\n          initial={{ x: -50, opacity: 0 }}\r\n          animate={{ x: 0, opacity: 1 }}\r\n          transition={{ delay: 0.5, type: \"spring\" }}\r\n        >\r\n          <p className=\"wrong-count\">{wrongQuestionsCount}</p>\r\n          <p>Soal yang perlu diperbaiki</p>\r\n        </motion.div>\r\n        \r\n        <motion.p \r\n          className=\"retry-message\"\r\n          initial={{ y: 20, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ delay: 0.7 }}\r\n        >\r\n          Beberapa jawaban masih kurang tepat. Mau mencoba lagi soal yang salah saja?\r\n        </motion.p>\r\n      </div>\r\n      \r\n      {/* Karakter pembantu dalam satu frame dengan posisi di kanan */}\r\n      <motion.div \r\n        className=\"helper-frame retry-character\"\r\n        initial={{ y: 50, opacity: 0 }}\r\n        animate={{ y: 0, opacity: 1 }}\r\n        transition={{ delay: 0.9, type: \"spring\", stiffness: 100 }}\r\n        style={{ alignItems: \"flex-end\", alignSelf: \"flex-end\", marginRight: \"30px\" }}\r\n      >\r\n        <div className=\"speech-bubble\" style={{ alignSelf: \"flex-end\" }}>\r\n          <p>Jangan menyerah! Yuk perbaiki jawabanmu! </p>\r\n        </div>\r\n        <img \r\n          src=\"/src/assets/kucing.png\" \r\n          alt=\"Karakter Kucing\" \r\n          className=\"helper-character-img\"\r\n          style={{ alignSelf: \"flex-end\" }}\r\n        />\r\n      </motion.div>\r\n      \r\n      <div className=\"hasil-buttons\">\r\n        <button onClick={handleRetry} className=\"retry-button\">\r\n          Perbaiki Jawaban\r\n        </button>\r\n        <button onClick={handleSkip} className=\"skip-button\">\r\n          Lanjutkan Saja\r\n        </button>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport \"./Category.css\";\r\n\r\n// Define the order in which categories should be unlocked\r\nconst categoryOrder = [\"addition\", \"subtraction\", \"multiplication\", \"division\"];\r\n\r\n// Definisikan terjemahan kategori untuk tampilan\r\nconst categoryTranslations = {\r\n  \"addition\": \"penjumlahan\",\r\n  \"subtraction\": \"pengurangan\",\r\n  \"multiplication\": \"perkalian\",\r\n  \"division\": \"pembagian\"\r\n};\r\n\r\nconst Category = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [bubbles, setBubbles] = useState([]);\r\n  const [currentChapter, setCurrentChapter] = useState(0);\r\n  const [currentLevel, setCurrentLevel] = useState(0);\r\n  const [selectedAvatar, setSelectedAvatar] = useState(null);\r\n  const [completedOperations, setCompletedOperations] = useState({\r\n    addition: false,\r\n    subtraction: false,\r\n    multiplication: false,\r\n    division: false,\r\n  });\r\n  const [availableCategories, setAvailableCategories] = useState(categoryOrder); // All categories available by default\r\n\r\n  useEffect(() => {\r\n    // Generate random bubbles for background effect\r\n    const generateBubbles = () => {\r\n      const newBubbles = [];\r\n      for (let i = 0; i < 15; i++) {\r\n        newBubbles.push({\r\n          id: i,\r\n          left: `${Math.random() * 100}%`,\r\n          size: `${Math.random() * 60 + 10}px`,\r\n          delay: `${Math.random() * 15}s`,\r\n          duration: `${Math.random() * 10 + 10}s`,\r\n        });\r\n      }\r\n      setBubbles(newBubbles);\r\n    };\r\n\r\n    generateBubbles();\r\n\r\n    // Get chapter and level from query parameters\r\n    const params = new URLSearchParams(location.search);\r\n    const chapter = params.get(\"chapter\");\r\n    const level = params.get(\"level\");\r\n\r\n    if (chapter !== null && level !== null) {\r\n      setCurrentChapter(parseInt(chapter));\r\n      setCurrentLevel(parseInt(level));\r\n\r\n      // Also store in localStorage\r\n      localStorage.setItem(\"currentBabIndex\", chapter);\r\n      localStorage.setItem(\"currentLevelIndex\", level);\r\n    } else {\r\n      // Try to get from localStorage if not in URL\r\n      const storedChapter = localStorage.getItem(\"currentBabIndex\");\r\n      const storedLevel = localStorage.getItem(\"currentLevelIndex\");\r\n\r\n      if (storedChapter && storedLevel) {\r\n        setCurrentChapter(parseInt(storedChapter));\r\n        setCurrentLevel(parseInt(storedLevel));\r\n      }\r\n    }\r\n\r\n    // Get selected avatar from localStorage\r\n    const savedAvatar = localStorage.getItem(\"selectedAvatar\");\r\n    if (savedAvatar) {\r\n      setSelectedAvatar(JSON.parse(savedAvatar));\r\n    }\r\n\r\n    // Check which operations have been completed for this level\r\n    checkCompletedOperations();\r\n  }, [location]);\r\n\r\n  // Function to check which operations have been completed for the current level\r\n  const checkCompletedOperations = () => {\r\n    const savedAvatar = localStorage.getItem(\"selectedAvatar\");\r\n    if (!savedAvatar) return;\r\n\r\n    const avatar = JSON.parse(savedAvatar);\r\n    setSelectedAvatar(avatar); // Set the avatar in state\r\n\r\n    const avatarOperationsKey = `avatar_${avatar.name}_operations`;\r\n    const operationData =\r\n      JSON.parse(localStorage.getItem(avatarOperationsKey)) || {};\r\n\r\n    const chapter = localStorage.getItem(\"currentBabIndex\");\r\n    const level = localStorage.getItem(\"currentLevelIndex\");\r\n    const levelKey = `bab${chapter}_level${level}`;\r\n\r\n    // Check each operation type and update state\r\n    const completed = {\r\n      addition: false,\r\n      subtraction: false,\r\n      multiplication: false,\r\n      division: false,\r\n    };\r\n\r\n    // Look through all operations to find matches for this level\r\n    Object.entries(operationData).forEach(([key, operation]) => {\r\n      if (key === levelKey) {\r\n        if (operation === \"addition\") completed.addition = true;\r\n        if (operation === \"subtraction\") completed.subtraction = true;\r\n        if (operation === \"multiplication\") completed.multiplication = true;\r\n        if (operation === \"division\") completed.division = true;\r\n      }\r\n    });\r\n\r\n    setCompletedOperations(completed);\r\n\r\n    // Set all categories as available (lock feature disabled)\r\n    setAvailableCategories(categoryOrder);\r\n  };\r\n\r\n  const handleCategoryClick = (category, type) => {\r\n    if (type === \"materi\") {\r\n      // Navigate to materi page with the selected category\r\n      navigate(`/materi/${category}`);\r\n    } else if (type === \"soal\") {\r\n      // Gunakan nama file bahasa Indonesia\r\n      if (category === \"addition\") {\r\n        navigate(`/game/penjumlahan`);\r\n      } else if (category === \"subtraction\") {\r\n        navigate(`/game/pengurangan`);\r\n      } else if (category === \"multiplication\") {\r\n        navigate(`/game/perkalian`);\r\n      } else if (category === \"division\") {\r\n        navigate(`/game/pembagian`);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Function to check if a category is available (always returns true now)\r\n  const isCategoryAvailable = (category) => {\r\n    return true; // All categories are now available\r\n  };\r\n\r\n  return (\r\n    <div className=\"category-container\">\r\n      {/* Background bubbles */}\r\n      {bubbles.map((bubble) => (\r\n        <div\r\n          key={bubble.id}\r\n          className=\"bubble\"\r\n          style={{\r\n            left: bubble.left,\r\n            width: bubble.size,\r\n            height: bubble.size,\r\n            animationDelay: bubble.delay,\r\n            animationDuration: bubble.duration,\r\n          }}\r\n        />\r\n      ))}\r\n\r\n      <div className=\"header2\">\r\n        <h1>\r\n          Halo {selectedAvatar ? selectedAvatar.name : \"Tamu\"}{\" \"}\r\n          <span className=\"wave\"></span>\r\n        </h1>\r\n        <p>Silahkan pilih kategori yang ingin kamu pelajari</p>\r\n        <p className=\"level-info\">\r\n          Bab {currentChapter + 1} Level {currentLevel + 1}\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"categories-section\">\r\n        <h2>Kategori</h2>\r\n\r\n        <div className=\"categories-grid\">\r\n          <div className=\"category-item\">\r\n            <div\r\n              className={`category-circle addition ${\r\n                completedOperations.addition ? \"completed\" : \"\"\r\n              }`}\r\n            >\r\n              <span className=\"category-symbol\">2+2</span>\r\n              {completedOperations.addition && (\r\n                <div className=\"completed-check\"></div>\r\n              )}\r\n            </div>\r\n            <p className=\"category-name\">{categoryTranslations.addition}</p>\r\n            <div className=\"category-buttons\">\r\n              <button\r\n                className=\"btn-materi\"\r\n                onClick={() => handleCategoryClick(\"addition\", \"materi\")}\r\n              >\r\n                Materi\r\n              </button>\r\n              <button\r\n                className=\"btn-soal\"\r\n                onClick={() => handleCategoryClick(\"addition\", \"soal\")}\r\n              >\r\n                Soal\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"category-item\">\r\n            <div\r\n              className={`category-circle substraction ${\r\n                completedOperations.subtraction ? \"completed\" : \"\"\r\n              }`}\r\n            >\r\n              <span className=\"category-symbol\">2-2</span>\r\n              {completedOperations.subtraction && (\r\n                <div className=\"completed-check\"></div>\r\n              )}\r\n            </div>\r\n            <p className=\"category-name\">{categoryTranslations.subtraction}</p>\r\n            <div className=\"category-buttons\">\r\n              <button\r\n                className=\"btn-materi\"\r\n                onClick={() => handleCategoryClick(\"subtraction\", \"materi\")}\r\n              >\r\n                Materi\r\n              </button>\r\n              <button\r\n                className=\"btn-soal\"\r\n                onClick={() => handleCategoryClick(\"subtraction\", \"soal\")}\r\n              >\r\n                Soal\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"category-item\">\r\n            <div\r\n              className={`category-circle division ${\r\n                completedOperations.division ? \"completed\" : \"\"\r\n              }`}\r\n            >\r\n              <span className=\"category-symbol\">10/5</span>\r\n              {completedOperations.division && (\r\n                <div className=\"completed-check\"></div>\r\n              )}\r\n            </div>\r\n            <p className=\"category-name\">{categoryTranslations.division}</p>\r\n            <div className=\"category-buttons\">\r\n              <button\r\n                className=\"btn-materi\"\r\n                onClick={() => handleCategoryClick(\"division\", \"materi\")}\r\n              >\r\n                Materi\r\n              </button>\r\n              <button\r\n                className=\"btn-soal\"\r\n                onClick={() => handleCategoryClick(\"division\", \"soal\")}\r\n              >\r\n                Soal\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"category-item\">\r\n            <div\r\n              className={`category-circle multiplication ${\r\n                completedOperations.multiplication ? \"completed\" : \"\"\r\n              }`}\r\n            >\r\n              <span className=\"category-symbol\">22</span>\r\n              {completedOperations.multiplication && (\r\n                <div className=\"completed-check\"></div>\r\n              )}\r\n            </div>\r\n            <p className=\"category-name\">{categoryTranslations.multiplication}</p>\r\n            <div className=\"category-buttons\">\r\n              <button\r\n                className=\"btn-materi\"\r\n                onClick={() => handleCategoryClick(\"multiplication\", \"materi\")}\r\n              >\r\n                Materi\r\n              </button>\r\n              <button\r\n                className=\"btn-soal\"\r\n                onClick={() => handleCategoryClick(\"multiplication\", \"soal\")}\r\n              >\r\n                Soal\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Category;\r\n","import supabase from '../config/supabase';\r\n\r\n// Mengambil semua nilai dengan data materi\r\nexport const getAllNilai = async () => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('nilai')\r\n      .select(`\r\n        id_nilai,\r\n        nilai,\r\n        tanggal,\r\n        siswa:id_siswa (id_siswa, nama, nis),\r\n        materi:id_materi (id_materi, nama_materi, kategori)\r\n      `);\r\n    \r\n    if (error) throw error;\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Error fetching nilai:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Mengambil nilai untuk siswa tertentu\r\nexport const getNilaiSiswa = async (idSiswa) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('nilai')\r\n      .select(`\r\n        id_nilai,\r\n        nilai,\r\n        tanggal,\r\n        materi:id_materi (id_materi, nama_materi, kategori)\r\n      `)\r\n      .eq('id_siswa', idSiswa);\r\n    \r\n    if (error) throw error;\r\n    return data;\r\n  } catch (error) {\r\n    console.error(`Error fetching nilai for siswa ${idSiswa}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Mengambil nilai untuk materi tertentu\r\nexport const getNilaiMateri = async (idMateri) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('nilai')\r\n      .select(`\r\n        id_nilai,\r\n        nilai,\r\n        tanggal,\r\n        siswa:id_siswa (id_siswa, nama, nis)\r\n      `)\r\n      .eq('id_materi', idMateri);\r\n    \r\n    if (error) throw error;\r\n    return data;\r\n  } catch (error) {\r\n    console.error(`Error fetching nilai for materi ${idMateri}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Menambahkan nilai baru\r\nexport const addNilai = async (idSiswa, idMateri, nilai) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('nilai')\r\n      .insert([\r\n        { id_siswa: idSiswa, id_materi: idMateri, nilai }\r\n      ])\r\n      .select();\r\n    \r\n    if (error) throw error;\r\n    return data[0];\r\n  } catch (error) {\r\n    console.error('Error adding nilai:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Update nilai yang sudah ada\r\nexport const updateNilai = async (idNilai, nilai) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('nilai')\r\n      .update({ nilai })\r\n      .eq('id_nilai', idNilai)\r\n      .select();\r\n    \r\n    if (error) throw error;\r\n    return data[0];\r\n  } catch (error) {\r\n    console.error(`Error updating nilai ${idNilai}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Menghapus nilai\r\nexport const deleteNilai = async (idNilai) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('nilai')\r\n      .delete()\r\n      .eq('id_nilai', idNilai);\r\n    \r\n    if (error) throw error;\r\n    return true;\r\n  } catch (error) {\r\n    console.error(`Error deleting nilai ${idNilai}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Mendapatkan rata-rata nilai siswa\r\nexport const getRataNilaiSiswa = async (idSiswa) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .rpc('hitung_rata_nilai_siswa', { p_id_siswa: idSiswa });\r\n    \r\n    if (error) throw error;\r\n    return data;\r\n  } catch (error) {\r\n    console.error(`Error calculating average for siswa ${idSiswa}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Simpan hasil kuis siswa\r\nexport const saveQuizResult = async (idSiswa, idMateri, nilai) => {\r\n  try {\r\n    // Periksa apakah sudah ada nilai untuk siswa dan materi ini\r\n    const { data: existingData, error: checkError } = await supabase\r\n      .from('nilai')\r\n      .select('id_nilai, nilai')\r\n      .eq('id_siswa', idSiswa)\r\n      .eq('id_materi', idMateri)\r\n      .maybeSingle();\r\n    \r\n    if (checkError) throw checkError;\r\n    \r\n    // Jika sudah ada dan nilai baru lebih tinggi, update\r\n    if (existingData) {\r\n      if (nilai > existingData.nilai) {\r\n        const { data, error } = await supabase\r\n          .from('nilai')\r\n          .update({ nilai })\r\n          .eq('id_nilai', existingData.id_nilai)\r\n          .select();\r\n        \r\n        if (error) throw error;\r\n        return { data: data[0], isNewHighScore: true };\r\n      }\r\n      return { data: existingData, isNewHighScore: false };\r\n    } \r\n    // Jika belum ada, buat baru\r\n    else {\r\n      const { data, error } = await supabase\r\n        .from('nilai')\r\n        .insert([\r\n          { id_siswa: idSiswa, id_materi: idMateri, nilai }\r\n        ])\r\n        .select();\r\n      \r\n      if (error) throw error;\r\n      return { data: data[0], isNewHighScore: true };\r\n    }\r\n  } catch (error) {\r\n    console.error('Error saving quiz result:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Mengambil data riwayat belajar siswa\r\nexport const getRiwayatSiswa = async (idSiswa) => {\r\n  try {\r\n    const { data, error } = await supabase\r\n      .from('riwayat_siswa')\r\n      .select(`\r\n        id_riwayat,\r\n        id_siswa,\r\n        id_materi,\r\n        kategori,\r\n        nilai,\r\n        waktu_pengerjaan,\r\n        durasi_pengerjaan,\r\n        jumlah_benar,\r\n        jumlah_salah,\r\n        level_kesulitan,\r\n        selesai,\r\n        keterangan,\r\n        materi:id_materi (id_materi, nama_materi)\r\n      `)\r\n      .eq('id_siswa', idSiswa)\r\n      .order('waktu_pengerjaan', { ascending: false });\r\n    \r\n    if (error) throw error;\r\n    return data;\r\n  } catch (error) {\r\n    console.error(`Error fetching riwayat for siswa ${idSiswa}:`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// Generate dummy history data for testing\r\nexport const getDummyHistoryData = async (studentId) => {\r\n  // Sample materi data\r\n  const materiList = [\r\n    { id_materi: 101, nama_materi: \"Penjumlahan 1-50\", kategori: \"Bilangan\" },\r\n    { id_materi: 102, nama_materi: \"Pengurangan 1-50\", kategori: \"Bilangan\" },\r\n    { id_materi: 103, nama_materi: \"Perkalian Dasar\", kategori: \"Bilangan\" },\r\n    { id_materi: 104, nama_materi: \"Pembagian Dasar\", kategori: \"Bilangan\" },\r\n    { id_materi: 105, nama_materi: \"Bangun Datar\", kategori: \"Geometri\" },\r\n    { id_materi: 106, nama_materi: \"Bangun Ruang\", kategori: \"Geometri\" },\r\n    { id_materi: 107, nama_materi: \"Satuan Panjang\", kategori: \"Pengukuran\" },\r\n    { id_materi: 108, nama_materi: \"Satuan Berat\", kategori: \"Pengukuran\" },\r\n    { id_materi: 109, nama_materi: \"Satuan Waktu\", kategori: \"Pengukuran\" },\r\n    { id_materi: 110, nama_materi: \"Pecahan\", kategori: \"Bilangan Pecahan\" },\r\n  ];\r\n\r\n  // Generate between 5-10 random history items\r\n  const historyCount = Math.floor(Math.random() * 6) + 5; \r\n  const dummyHistory = [];\r\n  \r\n  // Generate dates in the past 3 months\r\n  const today = new Date();\r\n  \r\n  for (let i = 0; i < historyCount; i++) {\r\n    // Random date within the last 90 days\r\n    const randomDaysAgo = Math.floor(Math.random() * 90);\r\n    const date = new Date(today);\r\n    date.setDate(date.getDate() - randomDaysAgo);\r\n    \r\n    // Random materi\r\n    const randomMateri = materiList[Math.floor(Math.random() * materiList.length)];\r\n    \r\n    // Random score between 0-100\r\n    const score = Math.floor(Math.random() * 101);\r\n    \r\n    dummyHistory.push({\r\n      id_nilai: i + 1000,\r\n      id_siswa: studentId,\r\n      id_materi: randomMateri.id_materi,\r\n      nilai: score,\r\n      tanggal: date.toISOString().split('T')[0],\r\n      materi: randomMateri\r\n    });\r\n  }\r\n  \r\n  // Sort by date, most recent first\r\n  dummyHistory.sort((a, b) => new Date(b.tanggal) - new Date(a.tanggal));\r\n  \r\n  // Simulate API call delay\r\n  await new Promise(resolve => setTimeout(resolve, 800));\r\n  \r\n  return dummyHistory;\r\n};","import React, { useState, useEffect } from \"react\";\r\nimport { getNilaiSiswa, getDummyHistoryData, getRiwayatSiswa } from \"../services/nilaiService\";\r\nimport \"./guru.css\";\r\n\r\nconst StudentHistoryModal = ({ isOpen, onClose, student }) => {  \r\n  const [history, setHistory] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [useDummyData, setUseDummyData] = useState(false);\r\n  const [dataSource, setDataSource] = useState(\"riwayat\"); // 'riwayat' atau 'nilai'\r\n  const [filterKategori, setFilterKategori] = useState(\"semua\");\r\n  const [filteredHistory, setFilteredHistory] = useState([]);\r\n  // Helper function untuk format durasi dalam detik ke menit:detik\r\n  const formatDuration = (seconds) => {\r\n    if (!seconds) return \"00:00\";\r\n    \r\n    const minutes = Math.floor(seconds / 60);\r\n    const remainingSeconds = seconds % 60;\r\n    \r\n    return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isOpen && student) {\r\n      fetchStudentHistory();\r\n    }\r\n  }, [isOpen, student]);\r\n\r\n  const fetchStudentHistory = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      setUseDummyData(false);\r\n      setDataSource(\"riwayat\");\r\n      \r\n      // Pertama coba ambil dari tabel riwayat_siswa (yang baru)\r\n      let data;\r\n      try {\r\n        data = await getRiwayatSiswa(student.id);\r\n        \r\n        // Jika tidak ada data di tabel riwayat, coba ambil dari tabel nilai\r\n        if (!data || data.length === 0) {\r\n          setDataSource(\"nilai\");\r\n          data = await getNilaiSiswa(student.id);\r\n          \r\n          // Jika masih tidak ada data, gunakan dummy data\r\n          if (!data || data.length === 0) {\r\n            setUseDummyData(true);\r\n            data = await getDummyHistoryData(student.id);\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.warn(\"Error fetching real history, trying nilai table:\", err);\r\n        \r\n        try {\r\n          setDataSource(\"nilai\");\r\n          data = await getNilaiSiswa(student.id);\r\n          \r\n          if (!data || data.length === 0) {\r\n            setUseDummyData(true);\r\n            data = await getDummyHistoryData(student.id);\r\n          }\r\n        } catch (err2) {\r\n          console.warn(\"Error fetching from nilai table, using dummy data:\", err2);\r\n          setUseDummyData(true);\r\n          data = await getDummyHistoryData(student.id);\r\n        }\r\n      }      \r\n      // Sort by date, most recent first\r\n      let sortedData;\r\n      \r\n      if (dataSource === \"riwayat\") {\r\n        // Data dari tabel riwayat_siswa sudah terurut dari API\r\n        sortedData = data;\r\n      } else {\r\n        // Data dari tabel nilai atau dummy data perlu diurutkan\r\n        sortedData = data.sort((a, b) => {\r\n          const dateA = a.waktu_pengerjaan ? a.waktu_pengerjaan : a.tanggal;\r\n          const dateB = b.waktu_pengerjaan ? b.waktu_pengerjaan : b.tanggal;\r\n          return new Date(dateB) - new Date(dateA);\r\n        });\r\n      }\r\n      \r\n      setHistory(sortedData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching student history:\", error);\r\n      setError(\"Gagal memuat riwayat siswa\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  // Effect untuk filter data berdasarkan kategori\r\n  useEffect(() => {\r\n    if (history.length > 0) {\r\n      if (filterKategori === \"semua\") {\r\n        setFilteredHistory(history);\r\n      } else {\r\n        const filtered = history.filter(item => {\r\n          const kategori = item.kategori || item.materi?.kategori || \"\";\r\n          return kategori.toLowerCase() === filterKategori.toLowerCase();\r\n        });\r\n        setFilteredHistory(filtered);\r\n      }\r\n    } else {\r\n      setFilteredHistory([]);\r\n    }\r\n  }, [history, filterKategori]);\r\n\r\n  // Fungsi untuk mendapatkan semua kategori unik dari data riwayat\r\n  const getUniqueKategori = () => {\r\n    const kategoriSet = new Set();\r\n    history.forEach(item => {\r\n      const kategori = item.kategori || item.materi?.kategori;\r\n      if (kategori) {\r\n        kategoriSet.add(kategori);\r\n      }\r\n    });\r\n    return [\"semua\", ...Array.from(kategoriSet)];\r\n  };\r\n\r\n  // Fungsi untuk mengekspor data riwayat ke CSV\r\n  const exportToCSV = () => {\r\n    // Buat header CSV\r\n    let csvContent = \"Tanggal,Materi,Kategori,Nilai\";\r\n    \r\n    if (dataSource === \"riwayat\") {\r\n      csvContent += \",Benar,Salah,Level Kesulitan\\n\";\r\n    } else {\r\n      csvContent += \"\\n\";\r\n    }\r\n    \r\n    // Tambahkan data\r\n    filteredHistory.forEach(item => {\r\n      const tanggal = item.waktu_pengerjaan ? item.waktu_pengerjaan : item.tanggal;\r\n      const materiName = item.materi?.nama_materi || \"-\";\r\n      const kategori = item.kategori || item.materi?.kategori || \"-\";\r\n      const nilai = item.nilai || 0;\r\n      \r\n      let row = `\"${new Date(tanggal).toLocaleDateString('id-ID')}\",\"${materiName}\",\"${kategori}\",\"${nilai}\"`;\r\n      \r\n      if (dataSource === \"riwayat\") {\r\n        // const durasi = formatDuration(item.durasi_pengerjaan);\r\n        const benar = item.jumlah_benar || 0;\r\n        const salah = item.jumlah_salah || 0;\r\n        const level = item.level_kesulitan || \"Sedang\";\r\n        \r\n        row += `,\"${benar}\",\"${salah}\",\"${level}\"`;\r\n      }\r\n      \r\n      csvContent += row + \"\\n\";\r\n    });\r\n    \r\n    // Buat file blob dan download\r\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement(\"a\");\r\n    link.setAttribute(\"href\", url);\r\n    link.setAttribute(\"download\", `riwayat_${student.name}_${new Date().toISOString().split('T')[0]}.csv`);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal-content\">\r\n        <div className=\"modal-header\">\r\n          <h2>Riwayat Belajar {student?.name || \"Siswa\"}</h2>\r\n          <button className=\"close-button\" onClick={onClose}>\r\n            &times;\r\n          </button>\r\n        </div>\r\n        <div className=\"modal-body\">\r\n          {loading ? (\r\n            <div className=\"loading\">\r\n              <i className=\"fas fa-spinner fa-spin\"></i> Memuat data riwayat...\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"error-message\">{error}</div>\r\n          ) : history.length === 0 ? (\r\n            <div className=\"empty-history\">\r\n              Belum ada riwayat belajar untuk siswa ini\r\n            </div>\r\n          ) : (\r\n            <div className=\"history-list\">\r\n              {useDummyData && (\r\n                <div className=\"dummy-data-notice\">\r\n                  <i className=\"fas fa-info-circle\"></i> Menampilkan data contoh. Data asli belum tersedia.\r\n                </div>\r\n              )}\r\n              \r\n              {!useDummyData && (\r\n                <div className=\"data-source-info\">\r\n                  <i className=\"fas fa-database\"></i> \r\n                  Data dari: {dataSource === \"riwayat\" ? \"Riwayat Lengkap\" : \"Nilai Ujian\"}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"filter-section\">\r\n                <label htmlFor=\"filterKategori\">Filter Kategori:</label>\r\n                <select\r\n                  id=\"filterKategori\"\r\n                  value={filterKategori}\r\n                  onChange={(e) => setFilterKategori(e.target.value)}\r\n                >\r\n                  {getUniqueKategori().map((kategori) => (\r\n                    <option key={kategori} value={kategori}>\r\n                      {kategori}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                <button className=\"export-button\" onClick={exportToCSV}>\r\n                  Ekspor ke CSV\r\n                </button>\r\n              </div>\r\n\r\n              <table className=\"history-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Tanggal</th>\r\n                    <th>Materi</th>\r\n                    <th>Kategori</th>\r\n                    <th>Nilai</th>                    {dataSource === \"riwayat\" && (\r\n                      <>\r\n                        <th>Benar</th>\r\n                        <th>Level</th>\r\n                      </>\r\n                    )}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {filteredHistory.map((item) => {\r\n                    // Tentukan tanggal dari waktu_pengerjaan atau tanggal\r\n                    const tanggal = item.waktu_pengerjaan ? item.waktu_pengerjaan : item.tanggal;\r\n                    // Tentukan nilai materi\r\n                    const materiName = item.materi?.nama_materi || \"-\";\r\n                    // Tentukan kategori\r\n                    const kategori = item.kategori || item.materi?.kategori || \"-\";\r\n                    // Tentukan nilai\r\n                    const nilai = item.nilai || 0;\r\n                    \r\n                    return (\r\n                      <tr key={item.id_riwayat || item.id_nilai}>\r\n                        <td>{new Date(tanggal).toLocaleDateString('id-ID')}</td>\r\n                        <td>{materiName}</td>\r\n                        <td>{kategori}</td>\r\n                        <td className={nilai >= 70 ? \"good-score\" : \"needs-improvement\"}>\r\n                          {nilai}\r\n                        </td>                        {dataSource === \"riwayat\" && (\r\n                          <>\r\n                            <td>{item.jumlah_benar || 0}/{(item.jumlah_benar || 0) + (item.jumlah_salah || 0)}</td>\r\n                            <td><span className={`level-${item.level_kesulitan?.toLowerCase() || 'sedang'}`}>\r\n                              {item.level_kesulitan || \"Sedang\"}\r\n                            </span></td>\r\n                          </>\r\n                        )}\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"modal-footer\">\r\n          <button className=\"action-button close\" onClick={onClose}>\r\n            Tutup\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentHistoryModal;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { DateTime } from 'luxon';\r\nimport supabase from '../../config/supabase';\r\nimport './ModalCatatan.css';\r\n\r\nconst ModalCatatan = ({ isOpen, onClose, studentId, teacherId, studentName }) => {\r\n  const [catatan, setCatatan] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [isUserLoading, setIsUserLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Dapatkan user dari localStorage\r\n    const getUser = async () => {\r\n      console.log('Fetching user from localStorage...');\r\n      setIsUserLoading(true);\r\n      \r\n      const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n      const userRole = localStorage.getItem(\"userRole\");\r\n      const userDataString = localStorage.getItem(\"userData\");\r\n      const userData = userDataString ? JSON.parse(userDataString) : null;\r\n\r\n      console.log('Login status:', { isLoggedIn, userRole, userData });\r\n\r\n      if (!isLoggedIn || userRole !== \"guru\" || !userData) {\r\n        console.warn(\"No valid teacher login session found in localStorage\");\r\n        setUser(null);\r\n      } else {\r\n        console.log('User from localStorage:', userData);\r\n        setUser(userData);\r\n      }\r\n      \r\n      setIsUserLoading(false);\r\n    };\r\n    getUser();\r\n  }, []);\r\n\r\n  // Debug status tombol submit\r\n  useEffect(() => {\r\n    console.log('Button status:', {\r\n      loading,\r\n      isUserLoading,\r\n      user: user ? 'User exists' : 'No user',\r\n      teacherId,\r\n      studentId\r\n    });\r\n  }, [loading, isUserLoading, user, teacherId, studentId]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (isUserLoading) {\r\n      console.log('User is still loading, preventing submit.');\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      alert('Anda harus login terlebih dahulu');\r\n      return;\r\n    }\r\n\r\n    if (!catatan.trim()) {\r\n      alert('Catatan tidak boleh kosong');\r\n      return;\r\n    }\r\n    \r\n    if (!teacherId) {\r\n      console.error('teacherId tidak diberikan ke ModalCatatan.');\r\n      alert('Terjadi kesalahan: Informasi guru tidak lengkap.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      // Get current time in Jakarta timezone\r\n      const jakartaTime = DateTime.local().setZone('Asia/Jakarta');\r\n\r\n      // 1. Buat catatan baru\r\n      const { data: catatanData, error: catatanError } = await supabase\r\n        .from('catatan')\r\n        .insert({\r\n          id_guru: teacherId,\r\n          catatan: catatan.trim(),\r\n          waktu: jakartaTime.toISO() // Save in ISO format with correct timezone\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (catatanError) {\r\n        console.error('Error membuat catatan:', catatanError);\r\n        throw catatanError;\r\n      }\r\n\r\n      // 2. Buat relasi siswa-catatan\r\n      const { error: relasiError } = await supabase\r\n        .from('siswa_catatan')\r\n        .insert({\r\n          id_siswa: studentId,\r\n          id_catatan: catatanData.id_catatan\r\n        });\r\n\r\n      if (relasiError) {\r\n        console.error('Error membuat relasi:', relasiError);\r\n        throw relasiError;\r\n      }\r\n\r\n      alert('Catatan berhasil disimpan');\r\n      onClose();\r\n      setCatatan('');\r\n\r\n    } catch (error) {\r\n      console.error('Error menyimpan catatan:', error);\r\n      alert('Terjadi kesalahan saat menyimpan catatan. Silakan coba lagi.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal-content\">\r\n        <div className=\"modal-header\">\r\n          <h3>Tambah Catatan untuk {studentName}</h3>\r\n          <button className=\"close-button\" onClick={onClose}>\r\n            <i className=\"fas fa-times\"></i>\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"catatan\">Catatan:</label>\r\n            <textarea\r\n              id=\"catatan\"\r\n              value={catatan}\r\n              onChange={(e) => setCatatan(e.target.value)}\r\n              placeholder=\"Tulis catatan untuk siswa...\"\r\n              rows=\"5\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"modal-footer\">\r\n            <button \r\n              type=\"button\" \r\n              className=\"cancel-button\" \r\n              onClick={onClose}\r\n              disabled={loading || isUserLoading}\r\n            >\r\n              Batal\r\n            </button>\r\n            <button \r\n              type=\"submit\" \r\n              className=\"submit-button\"\r\n              disabled={loading || isUserLoading || !user}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> Menyimpan...\r\n                </>\r\n              ) : isUserLoading ? (\r\n                 'Memuat user...'\r\n              ) : !user ? (\r\n                'Login diperlukan'\r\n              ) : (\r\n                'Simpan Catatan'\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalCatatan;","import React from 'react';\r\nimport { DateTime } from 'luxon';\r\nimport './ModalLihatCatatan.css';\r\n\r\nconst ModalLihatCatatan = ({ isOpen, onClose, student, notes, onDeleteNote }) => {\r\n  const formatJakartaTime = (isoString) => {\r\n    return DateTime.fromISO(isoString)\r\n      .setZone('Asia/Jakarta')\r\n      .toLocaleString(DateTime.DATETIME_MED_WITH_SECONDS, {\r\n        locale: 'id'\r\n      });\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal-content\">\r\n        <div className=\"modal-header\">\r\n          <h2>Catatan Siswa</h2>\r\n          <button className=\"close-button\" onClick={onClose}>\r\n            <i className=\"fas fa-times\"></i>\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"student-info\">\r\n          <h3>{student.name}</h3>\r\n          <p className=\"student-class\">{student.class}</p>\r\n        </div>\r\n\r\n        <div className=\"notes-container\">\r\n          {notes && notes.length > 0 ? (\r\n            notes.map((note, index) => (\r\n              <div key={index} className=\"note-item\">\r\n                <div className=\"note-header\">\r\n                  <span className=\"note-date\">\r\n                    {formatJakartaTime(note.waktu)}\r\n                  </span>\r\n                </div>\r\n                <div className=\"note-content\">\r\n                  <p className=\"note-text\">{note.catatan}</p>\r\n                  <div className=\"note-actions\">\r\n                    <button\r\n                      className=\"send-to-parent-button-inline\"\r\n                      onClick={() => alert(`Kirim catatan ID ${note.id_catatan} ke wali`)}\r\n                    >\r\n                      <i className=\"fas fa-paper-plane\"></i> Kirim ke wali\r\n                    </button>\r\n                    <button\r\n                      className=\"delete-note-button-inline\"\r\n                      onClick={() => onDeleteNote(note.id_catatan)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i> Hapus Catatan\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"no-notes\">\r\n              <i className=\"fas fa-info-circle\"></i>\r\n              <p>Belum ada catatan untuk siswa ini</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"modal-footer\">\r\n          <button className=\"close-modal-button\" onClick={onClose}>\r\n            Tutup\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalLihatCatatan;","import React, { useState, useEffect } from 'react';\r\nimport supabase from '../../config/supabase';\r\nimport './EditStudentModal.css';\r\n\r\nconst EditStudentModal = ({ isOpen, onClose, student, onUpdate }) => {\r\n  const [formData, setFormData] = useState({\r\n    nama: '',\r\n    nis: '',\r\n    tanggal_lahir: '',\r\n    alamat: '',\r\n    id_kelas: '',\r\n    avatar: '',\r\n    Jenis_Kelamin: '',\r\n    id_wali: ''\r\n  });\r\n  const [parents, setParents] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const animalAvatars = [\r\n    'Anjing', 'Babi', 'Bebek', 'Gurita', 'Harimau',\r\n    'Kelinci', 'Kucing', 'Sapi', 'Serigala', 'Singa'\r\n  ];\r\n\r\n  useEffect(() => {\r\n    if (student) {\r\n      setFormData({\r\n        nama: student.name || '',\r\n        nis: student.nis || '',\r\n        tanggal_lahir: student.birthDate || '',\r\n        alamat: student.address || '',\r\n        id_kelas: student.class?.replace('Kelas ', '') || '',\r\n        avatar: student.avatar || '',\r\n        Jenis_Kelamin: student.gender || '',\r\n        id_wali: student.id_wali || ''\r\n      });\r\n    }\r\n    fetchParents();\r\n  }, [student]);\r\n\r\n  const fetchParents = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('wali')\r\n        .select('id_wali, nama');\r\n      \r\n      if (error) throw error;\r\n      setParents(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching parents:', error);\r\n      setError('Gagal memuat data wali murid');\r\n    }\r\n  };\r\n\r\n  const checkParentAssignments = async (id_wali) => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('siswa')\r\n        .select('id_siswa')\r\n        .eq('id_wali', id_wali);\r\n\r\n      if (error) throw error;\r\n\r\n      // If this parent is already assigned to 3 or more students (excluding current student)\r\n      if (data && data.length >= 3 && !data.some(s => s.id_siswa === student.id)) {\r\n        return false;\r\n      }\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error checking parent assignments:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleChange = async (e) => {\r\n    const { name, value } = e.target;\r\n    \r\n    // Special handling for id_wali changes\r\n    if (name === 'id_wali' && value) {\r\n      const isValid = await checkParentAssignments(value);\r\n      if (!isValid) {\r\n        alert('Peringatan: Wali murid ini sudah ditautkan dengan 3 siswa lain.');\r\n      }\r\n    }\r\n\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // Check parent assignments before submitting\r\n      if (formData.id_wali) {\r\n        const isValid = await checkParentAssignments(formData.id_wali);\r\n        if (!isValid) {\r\n          if (!confirm('Wali murid ini sudah ditautkan dengan 3 siswa lain. Apakah Anda yakin ingin melanjutkan?')) {\r\n            setLoading(false);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n\r\n      const { error } = await supabase\r\n        .from('siswa')\r\n        .update({\r\n          nama: formData.nama,\r\n          nis: formData.nis,\r\n          tanggal_lahir: formData.tanggal_lahir,\r\n          alamat: formData.alamat,\r\n          id_kelas: formData.id_kelas,\r\n          avatar: formData.avatar,\r\n          Jenis_Kelamin: formData.Jenis_Kelamin,\r\n          id_wali: formData.id_wali || null\r\n        })\r\n        .eq('id_siswa', student.id);\r\n\r\n      if (error) throw error;\r\n\r\n      alert('Data siswa berhasil diperbarui!');\r\n      onUpdate();\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error updating student:', error);\r\n      setError('Gagal memperbarui data siswa: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"edit-modal-overlay\">\r\n      <div className=\"edit-modal\">\r\n        <div className=\"edit-modal-header\">\r\n          <h2>Edit Data Siswa</h2>\r\n          <button className=\"close-button\" onClick={onClose}>&times;</button>\r\n        </div>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"nama\">Nama Siswa:</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"nama\"\r\n              name=\"nama\"\r\n              value={formData.nama}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"nis\">NIS:</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"nis\"\r\n              name=\"nis\"\r\n              value={formData.nis}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"tanggal_lahir\">Tanggal Lahir:</label>\r\n            <input\r\n              type=\"date\"\r\n              id=\"tanggal_lahir\"\r\n              name=\"tanggal_lahir\"\r\n              value={formData.tanggal_lahir}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"alamat\">Alamat:</label>\r\n            <textarea\r\n              id=\"alamat\"\r\n              name=\"alamat\"\r\n              value={formData.alamat}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"id_kelas\">Kelas:</label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"id_kelas\"\r\n              name=\"id_kelas\"\r\n              value={formData.id_kelas}\r\n              onChange={handleChange}\r\n              min=\"1\"\r\n              max=\"6\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"avatar\">Avatar:</label>\r\n            <select\r\n              id=\"avatar\"\r\n              name=\"avatar\"\r\n              value={formData.avatar}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"\">Pilih Avatar</option>\r\n              {animalAvatars.map((avatar) => (\r\n                <option key={avatar} value={avatar}>\r\n                  {avatar}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"Jenis_Kelamin\">Jenis Kelamin:</label>\r\n            <select\r\n              id=\"Jenis_Kelamin\"\r\n              name=\"Jenis_Kelamin\"\r\n              value={formData.Jenis_Kelamin}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"\">Pilih Jenis Kelamin</option>\r\n              <option value=\"L\">Laki-laki</option>\r\n              <option value=\"P\">Perempuan</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"id_wali\">Wali Murid:</label>\r\n            <select\r\n              id=\"id_wali\"\r\n              name=\"id_wali\"\r\n              value={formData.id_wali || ''}\r\n              onChange={handleChange}\r\n            >\r\n              <option value=\"\">Pilih Wali Murid</option>\r\n              {parents.map((parent) => (\r\n                <option key={parent.id_wali} value={parent.id_wali}>\r\n                  {parent.nama}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {error && <div className=\"error-message\">{error}</div>}\r\n\r\n          <div className=\"form-actions\">\r\n            <button \r\n              type=\"submit\" \r\n              className=\"save-button\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? 'Menyimpan...' : 'Simpan'}\r\n            </button>\r\n            <button \r\n              type=\"button\" \r\n              className=\"cancel-button\" \r\n              onClick={onClose}\r\n              disabled={loading}\r\n            >\r\n              Batal\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditStudentModal;","import React, { useState, useEffect } from 'react';\r\nimport supabase from '../../config/supabase';\r\nimport './EditStudentModal.css'; // We can reuse the existing modal styles\r\n\r\nconst AddStudentModal = ({ isOpen, onClose, onAdd }) => {\r\n  const [formData, setFormData] = useState({\r\n    nama: '',\r\n    nis: '',\r\n    tanggal_lahir: '',\r\n    alamat: '',\r\n    id_kelas: '',\r\n    avatar: '',\r\n    Jenis_Kelamin: 'L',\r\n    id_wali: ''\r\n  });\r\n  const [parents, setParents] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const animalAvatars = [\r\n    'Anjing', 'Babi', 'Bebek', 'Gurita', 'Harimau',\r\n    'Kelinci', 'Kucing', 'Sapi', 'Serigala', 'Singa'\r\n  ];\r\n\r\n  useEffect(() => {\r\n    fetchParents();\r\n  }, []);\r\n\r\n  const fetchParents = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('wali')\r\n        .select('id_wali, nama');\r\n      \r\n      if (error) throw error;\r\n      setParents(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching parents:', error);\r\n      setError('Gagal memuat data wali murid');\r\n    }\r\n  };\r\n\r\n  const checkParentAssignments = async (id_wali) => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('siswa')\r\n        .select('id_siswa')\r\n        .eq('id_wali', id_wali);\r\n\r\n      if (error) throw error;\r\n\r\n      if (data && data.length >= 3) {\r\n        return false;\r\n      }\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Error checking parent assignments:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleChange = async (e) => {\r\n    const { name, value } = e.target;\r\n    \r\n    if (name === 'id_wali' && value) {\r\n      const isValid = await checkParentAssignments(value);\r\n      if (!isValid) {\r\n        alert('Peringatan: Wali murid ini sudah ditautkan dengan 3 siswa.');\r\n      }\r\n    }\r\n\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      if (formData.id_wali) {\r\n        const isValid = await checkParentAssignments(formData.id_wali);\r\n        if (!isValid) {\r\n          if (!confirm('Wali murid ini sudah ditautkan dengan 3 siswa. Apakah Anda yakin ingin melanjutkan?')) {\r\n            setLoading(false);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('siswa')\r\n        .insert({\r\n          nama: formData.nama,\r\n          nis: formData.nis,\r\n          tanggal_lahir: formData.tanggal_lahir,\r\n          alamat: formData.alamat,\r\n          id_kelas: formData.id_kelas,\r\n          avatar: formData.avatar,\r\n          Jenis_Kelamin: formData.Jenis_Kelamin,\r\n          id_wali: formData.id_wali || null,\r\n          id_role: 4 // Role siswa\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      alert('Siswa baru berhasil ditambahkan!');\r\n      onAdd(data);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error adding student:', error);\r\n      setError('Gagal menambahkan siswa: ' + error.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"edit-modal-overlay\">\r\n      <div className=\"edit-modal\">\r\n        <div className=\"edit-modal-header\">\r\n          <h2>Tambah Siswa Baru</h2>\r\n          <button className=\"close-button\" onClick={onClose}>&times;</button>\r\n        </div>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"nama\">Nama Siswa:</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"nama\"\r\n              name=\"nama\"\r\n              value={formData.nama}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"nis\">NIS:</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"nis\"\r\n              name=\"nis\"\r\n              value={formData.nis}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"tanggal_lahir\">Tanggal Lahir:</label>\r\n            <input\r\n              type=\"date\"\r\n              id=\"tanggal_lahir\"\r\n              name=\"tanggal_lahir\"\r\n              value={formData.tanggal_lahir}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"alamat\">Alamat:</label>\r\n            <textarea\r\n              id=\"alamat\"\r\n              name=\"alamat\"\r\n              value={formData.alamat}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"id_kelas\">Kelas:</label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"id_kelas\"\r\n              name=\"id_kelas\"\r\n              value={formData.id_kelas}\r\n              onChange={handleChange}\r\n              min=\"1\"\r\n              max=\"6\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"avatar\">Avatar:</label>\r\n            <select\r\n              id=\"avatar\"\r\n              name=\"avatar\"\r\n              value={formData.avatar}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"\">Pilih Avatar</option>\r\n              {animalAvatars.map((avatar) => (\r\n                <option key={avatar} value={avatar}>\r\n                  {avatar}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"Jenis_Kelamin\">Jenis Kelamin:</label>\r\n            <select\r\n              id=\"Jenis_Kelamin\"\r\n              name=\"Jenis_Kelamin\"\r\n              value={formData.Jenis_Kelamin}\r\n              onChange={handleChange}\r\n              required\r\n            >\r\n              <option value=\"L\">Laki-laki</option>\r\n              <option value=\"P\">Perempuan</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"id_wali\">Wali Murid:</label>\r\n            <select\r\n              id=\"id_wali\"\r\n              name=\"id_wali\"\r\n              value={formData.id_wali || ''}\r\n              onChange={handleChange}\r\n            >\r\n              <option value=\"\">Pilih Wali Murid</option>\r\n              {parents.map((parent) => (\r\n                <option key={parent.id_wali} value={parent.id_wali}>\r\n                  {parent.nama}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {error && <div className=\"error-message\">{error}</div>}\r\n\r\n          <div className=\"form-actions\">\r\n            <button \r\n              type=\"submit\" \r\n              className=\"save-button\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? 'Menyimpan...' : 'Simpan'}\r\n            </button>\r\n            <button \r\n              type=\"button\" \r\n              className=\"cancel-button\" \r\n              onClick={onClose}\r\n              disabled={loading}\r\n            >\r\n              Batal\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddStudentModal;","import React from 'react';\r\nimport './EditStudentModal.css';\r\n\r\nconst KelasModal = ({ \r\n  isOpen, \r\n  onClose, \r\n  student, \r\n  availableClasses, \r\n  onConfirm, \r\n  type\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  const handleSelect = (targetClass) => {\r\n    const message = type === 'naik' \r\n      ? `Apakah Anda yakin ingin menaikkan ${student.name} ke ${targetClass}?`\r\n      : `Apakah Anda yakin ingin memindahkan ${student.name} ke ${targetClass}?`;\r\n\r\n    if (window.confirm(message)) {\r\n      onConfirm(targetClass);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"edit-modal-overlay\">\r\n      <div className=\"edit-modal\" style={{ maxWidth: '500px' }}>\r\n        <div className=\"edit-modal-header\" style={{ \r\n          background: type === 'naik' ? '#4CAF50' : '#2196F3',\r\n          color: 'white'\r\n        }}>\r\n          <h2>\r\n            {type === 'naik' ? 'Naik Kelas' : 'Pindah Kelas'} - {student.name}\r\n          </h2>\r\n          <button className=\"close-button\" onClick={onClose}>&times;</button>\r\n        </div>\r\n        \r\n        <div className=\"modal-body\" style={{ padding: '20px' }}>\r\n          <p style={{ \r\n            marginBottom: '15px',\r\n            fontSize: '16px',\r\n            color: '#666'\r\n          }}>\r\n            {type === 'naik' \r\n              ? 'Pilih kelas tujuan untuk kenaikan kelas:' \r\n              : 'Pilih kelas tujuan untuk pindah kelas:'}\r\n          </p>\r\n          \r\n          <div className=\"class-options\" style={{ \r\n            display: 'grid', \r\n            gap: '10px',\r\n            maxHeight: '300px',\r\n            overflowY: 'auto',\r\n            padding: '5px'\r\n          }}>\r\n            {availableClasses.map((kelas) => (\r\n              <button\r\n                key={kelas}\r\n                onClick={() => handleSelect(kelas)}\r\n                style={{\r\n                  padding: '12px 15px',\r\n                  border: '1px solid #e0e0e0',\r\n                  borderRadius: '8px',\r\n                  backgroundColor: '#fff',\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.2s ease',\r\n                  width: '100%',\r\n                  textAlign: 'left',\r\n                  fontSize: '15px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '10px'\r\n                }}\r\n                onMouseOver={(e) => {\r\n                  e.target.style.backgroundColor = '#f5f5f5';\r\n                  e.target.style.borderColor = type === 'naik' ? '#4CAF50' : '#2196F3';\r\n                }}\r\n                onMouseOut={(e) => {\r\n                  e.target.style.backgroundColor = '#fff';\r\n                  e.target.style.borderColor = '#e0e0e0';\r\n                }}\r\n              >\r\n                <i className={`fas ${type === 'naik' ? 'fa-arrow-up' : 'fa-exchange-alt'}`} \r\n                   style={{ color: type === 'naik' ? '#4CAF50' : '#2196F3' }}/>\r\n                {kelas}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"modal-footer\" style={{ \r\n          padding: '15px 20px',\r\n          borderTop: '1px solid #eee',\r\n          display: 'flex',\r\n          justifyContent: 'flex-end',\r\n          gap: '10px'\r\n        }}>\r\n          <button \r\n            onClick={onClose}\r\n            className=\"cancel-button\"\r\n            style={{\r\n              padding: '8px 20px',\r\n              borderRadius: '6px',\r\n              border: '1px solid #ddd',\r\n              backgroundColor: 'white',\r\n              color: '#666',\r\n              cursor: 'pointer',\r\n              fontSize: '14px',\r\n              transition: 'all 0.2s ease'\r\n            }}\r\n            onMouseOver={(e) => {\r\n              e.target.style.backgroundColor = '#f5f5f5';\r\n            }}\r\n            onMouseOut={(e) => {\r\n              e.target.style.backgroundColor = 'white';\r\n            }}\r\n          >\r\n            Batal\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default KelasModal;","import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport supabase from \"../config/supabase\";\r\nimport \"../login.css\";\r\nimport \"./guru.css\";\r\nimport StudentHistoryModal from \"./StudentHistoryModal\";\r\nimport ModalCatatan from './components/ModalCatatan';\r\nimport ModalLihatCatatan from './components/ModalLihatCatatan';\r\nimport EditStudentModal from './components/EditStudentModal';\r\nimport AddStudentModal from './components/AddStudentModal';\r\nimport KelasModal from './components/KelasModal';\r\n\r\nconst TabGuru = () => {\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState(\"daftar\");\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [selectedClass, setSelectedClass] = useState(\"Semua Kelas\");\r\n  const [students, setStudents] = useState([]);\r\n  const [teacherProfile, setTeacherProfile] = useState({\r\n    name: \"agung\",\r\n    role: \"Guru Matematika\",\r\n    school: \"SDN Merdeka 01\",\r\n    email: \"siti.rahayu@sdnmerdeka01.sch.id\",\r\n    phone: \"+62 812-3456-7890\",\r\n    studentCount: 0,\r\n    kelas: [], // Will be populated from database\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentUserId, setCurrentUserId] = useState(null);\r\n  const [historyModal, setHistoryModal] = useState({\r\n    isOpen: false,\r\n    student: null\r\n  });\r\n  const [classes, setClasses] = useState([]);\r\n  const [notes, setNotes] = useState([]);\r\n  const [scores, setScores] = useState([]);\r\n  const [kemajuan, setKemajuan] = useState([]);\r\n  const [modalCatatan, setModalCatatan] = useState({\r\n    isOpen: false,\r\n    studentId: null,\r\n    studentName: ''\r\n  });\r\n  const [lihatCatatanModal, setLihatCatatanModal] = useState({\r\n    isOpen: false,\r\n    student: null,\r\n    notes: []\r\n  });\r\n  const [editModal, setEditModal] = useState({\r\n    isOpen: false,\r\n    student: null\r\n  });\r\n  const [addModal, setAddModal] = useState({\r\n    isOpen: false\r\n  });\r\n  const [kelasModal, setKelasModal] = useState({\r\n    isOpen: false,\r\n    type: null, // 'naik' or 'pindah'\r\n    student: null,\r\n    availableClasses: []\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Fetch user data from localStorage instead of using supabase auth\r\n    const getCurrentUser = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        // Check if user is logged in via localStorage\r\n        const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n        const userRole = localStorage.getItem(\"userRole\");\r\n\r\n        // Get user data from localStorage if user was logged in through our custom login\r\n        const userDataString = localStorage.getItem(\"userData\");\r\n        const userData = userDataString ? JSON.parse(userDataString) : null;\r\n\r\n        if (!isLoggedIn || userRole !== \"guru\" || !userData) {\r\n          console.warn(\"No valid teacher login session found in localStorage\");\r\n          // Redirect to login if not logged in as teacher\r\n          alert(\"Sesi login tidak valid. Silakan login kembali.\");\r\n          navigate(\"/login\");\r\n          return;\r\n        }\r\n\r\n        console.log(\"Current user from localStorage:\", userData);\r\n        setCurrentUserId(userData.id_guru);\r\n\r\n        // Fetch teacher profile and students data with the user ID\r\n        await fetchTeacherData(userData.id_guru);\r\n      } catch (error) {\r\n        console.error(\"Error loading user data:\", error);\r\n        alert(\r\n          \"Terjadi kesalahan saat memuat data pengguna. Menggunakan data contoh.\"\r\n        );\r\n\r\n        // Set default classes if there was an error\r\n        setTeacherProfile((prev) => ({\r\n          ...prev,\r\n          kelas: [\"Kelas 1\", \"Kelas 2\", \"Kelas 3\"],\r\n        }));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    getCurrentUser();\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    // Fetch students data after teacher profile is loaded\r\n    if (teacherProfile.kelas && teacherProfile.kelas.length > 0) {\r\n      console.log(\r\n        \"Teacher classes loaded, fetching students:\",\r\n        teacherProfile.kelas\r\n      );\r\n      fetchStudents();\r\n    }\r\n  }, [teacherProfile.kelas]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // Fetch classes\r\n        const { data: classesData, error: classesError } = await supabase\r\n          .from('kelas')\r\n          .select('*')\r\n          .eq('id_guru', currentUserId);\r\n\r\n        if (classesError) throw classesError;\r\n        setClasses(classesData || []);\r\n\r\n        // Fetch students\r\n        const { data: studentsData, error: studentsError } = await supabase\r\n          .from('siswa')\r\n          .select('*');\r\n\r\n        if (studentsError) throw studentsError;\r\n        setStudents(studentsData || []);\r\n\r\n        // Fetch notes\r\n        const { data: notesData, error: notesError } = await supabase\r\n          .from('catatan')\r\n          .select(`\r\n            *,\r\n            siswa_catatan!inner(*)\r\n          `)\r\n          .eq('id_guru', currentUserId);\r\n\r\n        if (notesError) throw notesError;\r\n        setNotes(notesData || []);\r\n\r\n        // Fetch scores\r\n        const { data: scoresData, error: scoresError } = await supabase\r\n          .from('nilai')\r\n          .select('*');\r\n\r\n        if (scoresError) throw scoresError;\r\n        setScores(scoresData || []);\r\n\r\n        // Fetch kemajuan\r\n        const { data: kemajuanData, error: kemajuanError } = await supabase\r\n          .from('kemajuan')\r\n          .select('*');\r\n\r\n        if (kemajuanError) throw kemajuanError;\r\n        setKemajuan(kemajuanData || []);\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching data:', error);\r\n        alert('Terjadi kesalahan saat memuat data');\r\n      }\r\n    };\r\n\r\n    if (currentUserId) {\r\n      fetchData();\r\n    }\r\n  }, [currentUserId]);\r\n\r\n  const fetchTeacherData = async (userId) => {\r\n    setLoading(true);\r\n    try {\r\n      // Fetch teacher data from the guru table using the correct ID field\r\n      const { data, error } = await supabase\r\n        .from(\"guru\")\r\n        .select(\"*\")\r\n        .eq(\"id_guru\", userId)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      if (data) {\r\n        console.log(\"Fetched teacher data:\", data);\r\n\r\n        // Process kelas data from the guru table\r\n        let kelasArray = [];\r\n\r\n        if (data.kelas) {\r\n          console.log(\r\n            \"Raw kelas data:\",\r\n            data.kelas,\r\n            \"Type:\",\r\n            typeof data.kelas\r\n          );\r\n\r\n          // If it's a number (e.g. just the grade level like 1, 2, 3)\r\n          if (typeof data.kelas === \"number\") {\r\n            kelasArray = [`Kelas ${data.kelas}`];\r\n          }\r\n          // If it's a string like \"Kelas 1\" or \"Kelas 1,Kelas 2,Kelas 3\"\r\n          else if (typeof data.kelas === \"string\") {\r\n            kelasArray = data.kelas.split(\",\").map(k => normalizeClass(k.trim()));\r\n          }\r\n        }\r\n\r\n        // Normalize all class names to consistent format\r\n        kelasArray = kelasArray.map((k) => normalizeClass(k));\r\n\r\n        // If still no classes found, set defaults\r\n        if (kelasArray.length === 0) {\r\n          kelasArray = [\"Kelas 1\", \"Kelas 2\", \"Kelas 3\"];\r\n          console.log(\r\n            \"Using default classes as none were found in teacher data\"\r\n          );\r\n        }\r\n\r\n        console.log(\"Processed teacher classes:\", kelasArray);\r\n\r\n        // Format role information based on kelas\r\n        let roleText = \"Guru Matematika\";\r\n        if (kelasArray.length > 0) {\r\n          if (kelasArray.length === 1) {\r\n            roleText = `Guru Matematika ${kelasArray[0]}`;\r\n          } else {\r\n            // For multiple classes, show range or list\r\n            const classNumbers = kelasArray\r\n              .map((k) => k.match(/\\d+/)?.[0])\r\n              .filter(Boolean)\r\n              .sort((a, b) => parseInt(a) - parseInt(b));\r\n\r\n            if (classNumbers.length > 1) {\r\n              roleText = `Guru Matematika Kelas ${classNumbers[0]}-${\r\n                classNumbers[classNumbers.length - 1]\r\n              }`;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Update teacher profile with data from the database using correct field names\r\n        setTeacherProfile({\r\n          name: data.nama || teacherProfile.name,\r\n          role: roleText,\r\n          school: \"SDN Merdeka 01\", // Use a default value or fetch from a settings table\r\n          email: data.email || teacherProfile.email,\r\n          phone: data.no_telp || teacherProfile.phone,\r\n          kelas: kelasArray,\r\n          studentCount: 0 // Will be updated after fetching students\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching teacher data:\", error);\r\n      alert(\"Error fetching teacher data. Using default profile.\");\r\n\r\n      // Set default classes if there was an error\r\n      setTeacherProfile((prev) => ({\r\n        ...prev,\r\n        kelas: [\"Kelas 1\", \"Kelas 2\", \"Kelas 3\"],\r\n      }));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchStudents = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Get all students with their parent information\r\n      const { data, error } = await supabase\r\n        .from('siswa')\r\n        .select(`\r\n          *,\r\n          wali:id_wali (\r\n            nama\r\n          )\r\n        `);\r\n\r\n      if (error) throw error;\r\n\r\n      if (!data || data.length === 0) {\r\n        console.log(\"No students found in database\");\r\n        setStudents([]);\r\n        setTeacherProfile((prev) => ({ ...prev, studentCount: 0 }));\r\n        return;\r\n      }\r\n\r\n      // Process the student data\r\n      const formattedStudents = data.map(student => {\r\n        const hasParentInfo = student.wali !== null;\r\n        return {\r\n          id: student.id_siswa,\r\n          name: student.nama || \"Nama tidak tersedia\",\r\n          class: `Kelas ${student.id_kelas}` || \"Kelas tidak tersedia\",\r\n          nis: student.nis,\r\n          birthDate: student.tanggal_lahir,\r\n          address: student.alamat,\r\n          gender: student.Jenis_Kelamin,\r\n          id_wali: student.id_wali,\r\n          parent: hasParentInfo ? student.wali.nama : \"Belum ditautkan\",\r\n          parentStatus: hasParentInfo ? \"linked\" : \"unlinked\",\r\n          avatar: student.avatar,\r\n          auth_user_id: student.created_at,\r\n          created_at: student.created_at,\r\n          updated_at: student.updated_at\r\n        };\r\n      });\r\n\r\n      setStudents(formattedStudents);\r\n      setTeacherProfile((prev) => ({\r\n        ...prev,\r\n        studentCount: formattedStudents.length,\r\n      }));\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching students:\", error);\r\n      alert(\"Error fetching students data. Using sample data instead.\");\r\n      createSampleStudents();\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const createSampleStudents = () => {\r\n    const sampleStudents = [];\r\n\r\n    // Create sample students for each of the teacher's classes\r\n    teacherProfile.kelas.forEach((kelas, index) => {\r\n      // Extract class number\r\n      const classNumber = kelas.replace(/\\D/g, \"\");\r\n      const classAge = classNumber ? 6 + parseInt(classNumber) : 7;\r\n\r\n      // Add a male and female student for each class\r\n      sampleStudents.push({\r\n        id: `sample-${index}-1`,\r\n        name: `Budi ${classNumber || index + 1}`, // e.g. \"Budi 1\"\r\n        class: kelas,\r\n        age: classAge,\r\n        parent: index % 2 === 0 ? \"Andi Wijaya\" : \"Belum ditautkan\",\r\n        parentStatus: index % 2 === 0 ? \"linked\" : \"unlinked\",\r\n        avatar: \"/src/assets/laki.png\",\r\n      });\r\n\r\n      sampleStudents.push({\r\n        id: `sample-${index}-2`,\r\n        name: `Ani ${classNumber || index + 1}`, // e.g. \"Ani 1\"\r\n        class: kelas,\r\n        age: classAge,\r\n        parent: index % 2 === 1 ? \"Rina Wijayanti\" : \"Belum ditautkan\",\r\n        parentStatus: index % 2 === 1 ? \"linked\" : \"unlinked\",\r\n        avatar: \"/src/assets/perempuan.png\",\r\n      });\r\n    });\r\n\r\n    setStudents(sampleStudents);\r\n    setTeacherProfile((prev) => ({\r\n      ...prev,\r\n      studentCount: sampleStudents.length,\r\n    }));\r\n  };\r\n\r\n  // Helper function to calculate age from birthdate\r\n  const calculateAge = (birthdate) => {\r\n    if (!birthdate) return null;\r\n\r\n    const birthDate = new Date(birthdate);\r\n    const today = new Date();\r\n    let age = today.getFullYear() - birthDate.getFullYear();\r\n    const monthDiff = today.getMonth() - birthDate.getMonth();\r\n\r\n    if (\r\n      monthDiff < 0 ||\r\n      (monthDiff === 0 && today.getDate() < birthDate.getDate())\r\n    ) {\r\n      age--;\r\n    }\r\n\r\n    return age;\r\n  };\r\n\r\n  // Helper function to normalize class formats\r\n  const normalizeClass = (kelasString) => {\r\n    if (!kelasString) return \"\";\r\n\r\n    // Convert to string if it's a number\r\n    const str = String(kelasString).trim();\r\n\r\n    // If it's just a number, prepend \"Kelas \"\r\n    if (/^\\d+$/.test(str)) {\r\n      return `Kelas ${str}`;\r\n    }\r\n\r\n    // Handle \"K1\", \"K 1\", \"k.1\", \"kls1\", \"kelas1\" etc.\r\n    if (/^[kK](elas|ls)?\\.?\\s*\\d+[A-Za-z]?$/.test(str)) {\r\n      const num = str.match(/\\d+[A-Za-z]?/)[0];\r\n      return `Kelas ${num}`;\r\n    }\r\n\r\n    // If it already has \"Kelas\" prefix (case insensitive), standardize the format\r\n    if (str.toLowerCase().includes(\"kelas\")) {\r\n      // Extract the number part with any letter suffix (like 4A, 4B)\r\n      const match = str.match(/\\d+[A-Za-z]?/);\r\n      if (match) {\r\n        return `Kelas ${match[0]}`;\r\n      }\r\n      // If there's no number, return as is with first letter capitalized\r\n      return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\r\n    }\r\n\r\n    // Otherwise, prepend \"Kelas \"\r\n    return `Kelas ${str}`;\r\n  };\r\n  const handleLogout = async () => {\r\n    try {\r\n      const { error } = await supabase.auth.signOut();\r\n      if (error) throw error;\r\n\r\n      localStorage.removeItem(\"isLoggedIn\");\r\n      localStorage.removeItem(\"userRole\");\r\n      localStorage.removeItem(\"userData\");\r\n      navigate(\"/login\");\r\n    } catch (error) {\r\n      console.error(\"Error logging out:\", error);\r\n      alert(\"Error logging out. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const handleAddStudent = () => {\r\n    setAddModal({\r\n      isOpen: true\r\n    });\r\n  };\r\n\r\n  const closeAddModal = () => {\r\n    setAddModal({\r\n      isOpen: false\r\n    });\r\n  };\r\n\r\n  const handleStudentAdd = (newStudent) => {\r\n    // Format the new student data to match the existing structure\r\n    const formattedStudent = {\r\n      id: newStudent.id_siswa,\r\n      name: newStudent.nama,\r\n      class: `Kelas ${newStudent.id_kelas}`,\r\n      nis: newStudent.nis,\r\n      birthDate: newStudent.tanggal_lahir,\r\n      address: newStudent.alamat,\r\n      gender: newStudent.Jenis_Kelamin,\r\n      id_wali: newStudent.id_wali,\r\n      parentStatus: newStudent.id_wali ? \"linked\" : \"unlinked\",\r\n      avatar: newStudent.avatar\r\n    };\r\n\r\n    // Add the new student to the state\r\n    setStudents(prev => [...prev, formattedStudent]);\r\n    \r\n    // Update teacher profile student count\r\n    setTeacherProfile(prev => ({\r\n      ...prev,\r\n      studentCount: prev.studentCount + 1\r\n    }));\r\n  };\r\n\r\n  const filterStudents = () => {\r\n    if (!students) return [];\r\n\r\n    let filtered = [...students];\r\n\r\n    // Filter by search query\r\n    if (searchQuery) {\r\n      filtered = filtered.filter((student) =>\r\n        student.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Filter by class\r\n    if (selectedClass !== \"Semua Kelas\") {\r\n      filtered = filtered.filter((student) => student.class === selectedClass);\r\n    }\r\n\r\n    return filtered;\r\n  };\r\n  const handleSendNote = (studentId, studentName) => {\r\n    setModalCatatan({\r\n      isOpen: true,\r\n      studentId,\r\n      studentName\r\n    });\r\n  };\r\n\r\n  const handleViewHistory = (student) => {\r\n    setHistoryModal({\r\n      isOpen: true,\r\n      student: student\r\n    });\r\n  };\r\n\r\n  const closeHistoryModal = () => {\r\n    setHistoryModal({\r\n      isOpen: false,\r\n      student: null\r\n    });\r\n  };\r\n\r\n  const handleViewReport = (studentId) => {\r\n    alert(`Lihat laporan siswa ID: ${studentId}`);\r\n  };\r\n\r\n  const handleDeleteStudent = async (studentId) => {\r\n    if (confirm(\"Apakah Anda yakin ingin menghapus siswa ini?\")) {\r\n      try {\r\n        // Step 1: Delete related records in siswa_catatan\r\n        const { error: catatanError } = await supabase\r\n          .from(\"siswa_catatan\")\r\n          .delete()\r\n          .eq(\"id_siswa\", studentId);\r\n          \r\n        if (catatanError) {\r\n          console.error(\"Error menghapus catatan siswa:\", catatanError);\r\n          // Continue even if there's an error - records might not exist\r\n        }\r\n        \r\n        // Step 2: Delete related records in nilai\r\n        const { error: nilaiError } = await supabase\r\n          .from(\"nilai\")\r\n          .delete()\r\n          .eq(\"id_siswa\", studentId);\r\n          \r\n        if (nilaiError) {\r\n          console.error(\"Error menghapus nilai siswa:\", nilaiError);\r\n          // Continue even if there's an error\r\n        }\r\n        \r\n        // Step 3: Delete related records in kemajuan\r\n        const { error: kemajuanError } = await supabase\r\n          .from(\"kemajuan\")\r\n          .delete()\r\n          .eq(\"id_siswa\", studentId);\r\n          \r\n        if (kemajuanError) {\r\n          console.error(\"Error menghapus data kemajuan siswa:\", kemajuanError);\r\n          // Continue even if there's an error\r\n        }\r\n        \r\n        // Step 4: Finally delete the student record\r\n        const { error } = await supabase\r\n          .from(\"siswa\")\r\n          .delete()\r\n          .eq(\"id_siswa\", studentId);\r\n\r\n        if (error) throw error;\r\n\r\n        // Update the UI\r\n        setStudents(students.filter((student) => student.id !== studentId));\r\n\r\n        // Update student count in teacher profile\r\n        setTeacherProfile((prev) => ({\r\n          ...prev,\r\n          studentCount: prev.studentCount - 1,\r\n        }));\r\n\r\n        alert(`Siswa berhasil dihapus`);\r\n      } catch (error) {\r\n        console.error(\"Error deleting student:\", error);\r\n        alert(\"Error deleting student: \" + error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const closeModalCatatan = () => {\r\n    setModalCatatan({\r\n      isOpen: false,\r\n      studentId: null,\r\n      studentName: ''\r\n    });\r\n  };\r\n\r\n  const handleLihatCatatan = (student) => {\r\n    const studentNotes = notes.filter(n => \r\n      n.siswa_catatan[0]?.id_siswa === student.id\r\n    );\r\n    \r\n    setLihatCatatanModal({\r\n      isOpen: true,\r\n      student: student,\r\n      notes: studentNotes\r\n    });\r\n  };\r\n\r\n  const closeLihatCatatanModal = () => {\r\n    setLihatCatatanModal({\r\n      isOpen: false,\r\n      student: null,\r\n      notes: []\r\n    });\r\n  };\r\n\r\n  const handleDeleteNote = async (noteId) => {\r\n    if (confirm(\"Apakah Anda yakin ingin menghapus catatan ini?\")) {\r\n      try {\r\n        // Step 1: Delete related records in siswa_catatan first\r\n        const { error: siswaCatatanError } = await supabase\r\n          .from(\"siswa_catatan\")\r\n          .delete()\r\n          .eq(\"id_catatan\", noteId);\r\n\r\n        if (siswaCatatanError) throw siswaCatatanError;\r\n\r\n        // Step 2: Now delete the note from the catatan table\r\n        const { error: catatanError } = await supabase\r\n          .from(\"catatan\")\r\n          .delete()\r\n          .eq(\"id_catatan\", noteId);\r\n\r\n        if (catatanError) throw catatanError;\r\n\r\n        // Update local state by removing the deleted note\r\n        const updatedNotes = notes.filter(note => note.id_catatan !== noteId);\r\n        setNotes(updatedNotes);\r\n\r\n        // Also update the notes shown in the open modal if it's for the same student\r\n        // This logic needs to be adjusted to filter notes correctly based on the student in the modal\r\n        setLihatCatatanModal(prevState => {\r\n          if (prevState.isOpen && prevState.student) {\r\n            const studentIdInModal = prevState.student.id;\r\n            const filteredNotesForModal = updatedNotes.filter(note => \r\n              note.siswa_catatan && note.siswa_catatan.length > 0 && \r\n              note.siswa_catatan.some(sc => sc.id_siswa === studentIdInModal)\r\n            );\r\n            return {\r\n              ...prevState,\r\n              notes: filteredNotesForModal\r\n            };\r\n          } else {\r\n            return prevState;\r\n          }\r\n        });\r\n\r\n        alert(\"Catatan berhasil dihapus!\");\r\n      } catch (error) {\r\n        console.error(\"Error deleting note:\", error);\r\n        alert(\"Gagal menghapus catatan: \" + error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleNaikKelas = async (student) => {\r\n    try {\r\n      // Get current class number\r\n      const currentClass = student.class.match(/\\d+/)[0];\r\n      const nextClass = parseInt(currentClass) + 1;\r\n      \r\n      // Check if next class exists and is within valid range (1-6)\r\n      if (nextClass > 6) {\r\n        alert('Siswa sudah berada di kelas tertinggi');\r\n        return;\r\n      }\r\n\r\n      // Get available higher classes from kelas table\r\n      const { data: availableClasses, error } = await supabase\r\n        .from('kelas')\r\n        .select('nama_kelas')\r\n        .gt('id_kelas', parseInt(currentClass))\r\n        .lte('id_kelas', 6)\r\n        .order('id_kelas', { ascending: true });\r\n\r\n      if (error) throw error;\r\n\r\n      if (!availableClasses || availableClasses.length === 0) {\r\n        alert('Tidak ada kelas yang tersedia untuk kenaikan kelas');\r\n        return;\r\n      }\r\n\r\n      setKelasModal({\r\n        isOpen: true,\r\n        type: 'naik',\r\n        student: student,\r\n        availableClasses: availableClasses.map(k => k.nama_kelas)\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error in handleNaikKelas:', error);\r\n      alert('Terjadi kesalahan saat memproses kenaikan kelas');\r\n    }\r\n  };\r\n\r\n  const handlePindahKelas = async (student) => {\r\n    try {\r\n      const currentClassNumber = student.class.match(/\\d+/)[0];\r\n\r\n      // Get all available classes from kelas table except current\r\n      const { data: availableClasses, error } = await supabase\r\n        .from('kelas')\r\n        .select('nama_kelas')\r\n        .neq('id_kelas', parseInt(currentClassNumber))\r\n        .order('id_kelas', { ascending: true });\r\n\r\n      if (error) throw error;\r\n\r\n      if (!availableClasses || availableClasses.length === 0) {\r\n        alert('Tidak ada kelas lain yang tersedia untuk pemindahan');\r\n        return;\r\n      }\r\n\r\n      setKelasModal({\r\n        isOpen: true,\r\n        type: 'pindah',\r\n        student: student,\r\n        availableClasses: availableClasses.map(k => k.nama_kelas)\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error in handlePindahKelas:', error);\r\n      alert('Terjadi kesalahan saat memproses pemindahan kelas');\r\n    }\r\n  };\r\n\r\n  const handleKelasConfirm = async (targetClass) => {\r\n    const student = kelasModal.student;\r\n    const targetClassNumber = targetClass.match(/\\d+/)[0];\r\n\r\n    try {\r\n      // Get the target kelas ID first\r\n      const { data: kelasData, error: kelasError } = await supabase\r\n        .from('kelas')\r\n        .select('id_kelas')\r\n        .eq('nama_kelas', targetClass)\r\n        .single();\r\n\r\n      if (kelasError) throw kelasError;\r\n      if (!kelasData) throw new Error('Kelas tidak ditemukan');\r\n\r\n      // Update student's class in database\r\n      const { error: updateError } = await supabase\r\n        .from('siswa')\r\n        .update({ \r\n          id_kelas: kelasData.id_kelas,\r\n          updated_at: new Date().toISOString()\r\n        })\r\n        .eq('id_siswa', student.id);\r\n\r\n      if (updateError) throw updateError;\r\n\r\n      // Update UI\r\n      setStudents(students.map(s => \r\n        s.id === student.id \r\n          ? { ...s, class: targetClass }\r\n          : s\r\n      ));\r\n\r\n      const action = kelasModal.type === 'naik' ? 'dinaikkan ke' : 'dipindahkan ke';\r\n      alert(`${student.name} berhasil ${action} ${targetClass}`);\r\n      \r\n      // Close modal and reset state\r\n      setKelasModal({\r\n        isOpen: false,\r\n        type: null,\r\n        student: null,\r\n        availableClasses: []\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error dalam mengubah kelas:', error);\r\n      alert('Gagal mengubah kelas: ' + error.message);\r\n    }\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case \"daftar\":\r\n        const filteredStudents = filterStudents();\r\n        return (\r\n          <div className=\"student-list\">\r\n            <div className=\"search-filter-container\">\r\n              <div className=\"search-bar\">\r\n                <div className=\"search-input-wrapper\">\r\n                  <i className=\"fas fa-search search-icon\"></i>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"search-siswa\"\r\n                    name=\"search-siswa\"\r\n                    placeholder=\"Cari siswa...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                    className=\"search-input\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"filter-actions\" style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                <div className=\"filter-dropdown\" style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                  <select\r\n                    id=\"filter-kelas\"\r\n                    name=\"filter-kelas\"\r\n                    value={selectedClass}\r\n                    onChange={(e) => setSelectedClass(e.target.value)}\r\n                    className=\"filter-select\"\r\n                  >\r\n                    <option value=\"Semua Kelas\">Semua Kelas</option>\r\n                    {teacherProfile.kelas &&\r\n                      teacherProfile.kelas\r\n                        .sort((a, b) => {\r\n                          // Extract numbers from class names for proper sorting\r\n                          const numA = parseInt(a.match(/\\d+/)?.[0] || 0);\r\n                          const numB = parseInt(b.match(/\\d+/)?.[0] || 0);\r\n                          return numA - numB;\r\n                        })\r\n                        .map((kelas, index) => (\r\n                          <option key={index} value={kelas}>\r\n                            {kelas}\r\n                          </option>\r\n                        ))}\r\n                  </select>\r\n                  <button className=\"filter-button\">\r\n                    <i className=\"fas fa-filter\"></i> Filter\r\n                  </button>\r\n                  <button \r\n                    className=\"add-student-button\"\r\n                    onClick={() => setAddModal({ isOpen: true })}\r\n                    style={{\r\n                      backgroundColor: '#4CAF50',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      padding: '10px 20px',\r\n                      borderRadius: '6px',\r\n                      cursor: 'pointer',\r\n                      fontSize: '14px',\r\n                      fontWeight: '500',\r\n                      display: 'inline-flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      gap: '8px',\r\n                      transition: 'all 0.3s ease',\r\n                      boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\r\n                      height: '40px'\r\n                    }}\r\n                    onMouseOver={(e) => {\r\n                      e.target.style.backgroundColor = '#45a049';\r\n                      e.target.style.transform = 'translateY(-1px)';\r\n                      e.target.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';\r\n                    }}\r\n                    onMouseOut={(e) => {\r\n                      e.target.style.backgroundColor = '#4CAF50';\r\n                      e.target.style.transform = 'translateY(0)';\r\n                      e.target.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-plus\" style={{ fontSize: '14px' }}></i>\r\n                    Tambah Siswa\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>{\" \"}\r\n            <div className=\"students-container\">\r\n              {loading ? (\r\n                <div className=\"loading\">\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> Memuat data\r\n                  siswa...\r\n                </div>\r\n              ) : filteredStudents.length === 0 ? (\r\n                <div className=\"no-students\">\r\n                  Tidak ada siswa yang ditemukan\r\n                </div>\r\n              ) : (\r\n                filteredStudents.map((student) => (\r\n                  <div className=\"student-card\" key={student.id}>\r\n                    <div className=\"student-avatar\">\r\n                      <img\r\n                        src={getStudentAvatar(student)}\r\n                        alt={`${student.name} avatar`}\r\n                      />\r\n                    </div>{\" \"}\r\n                    <div className=\"student-info\">\r\n                      <h3>{student.name}</h3>\r\n                      <p>\r\n                        {student.class} | NIS: {student.nis}\r\n                      </p>\r\n                      <p className=\"parent-info\">\r\n                        <span className=\"parent-label\">Wali Murid: </span>\r\n                        {student.parentStatus === \"linked\" ? (\r\n                          <span className=\"linked\">{student.parent}</span>\r\n                        ) : (\r\n                          <span className=\"unlinked\">Belum ditautkan</span>\r\n                        )}\r\n                      </p>\r\n                    </div>{\" \"}                    <div className=\"student-actions\">\r\n                      <button\r\n                        className=\"action-button edit\"\r\n                        onClick={() => handleEditStudent(student)}\r\n                      >\r\n                        <i className=\"fas fa-edit\"></i> Edit\r\n                      </button>\r\n                      <button\r\n                        className=\"action-button tugas\"\r\n                        onClick={() => handleViewHistory(student)}\r\n                      >\r\n                        Riwayat\r\n                      </button>\r\n                      <button\r\n                        className=\"action-button hapus\"\r\n                        onClick={() => handleDeleteStudent(student.id)}\r\n                      >\r\n                        Hapus\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>{\" \"}\r\n            <div className=\"pagination\">\r\n              <button className=\"pagination-prev\">&lt;</button>\r\n              <button className=\"pagination-number active\">1</button>\r\n              <button className=\"pagination-number\">2</button>\r\n              <button className=\"pagination-number\">3</button>\r\n              <button className=\"pagination-next\">&gt;</button>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case \"kelas\":\r\n        return (\r\n          <div className=\"student-list\">\r\n            <div className=\"search-filter-container\">\r\n              <div className=\"search-bar\">\r\n                <div className=\"search-input-wrapper\">\r\n                  <i className=\"fas fa-search search-icon\"></i>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Cari siswa...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                    className=\"search-input\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"filter-dropdown\">\r\n                <select\r\n                  value={selectedClass}\r\n                  onChange={(e) => setSelectedClass(e.target.value)}\r\n                  className=\"filter-select\"\r\n                >\r\n                  <option value=\"Semua Kelas\">Semua Kelas</option>\r\n                  {teacherProfile.kelas &&\r\n                    teacherProfile.kelas\r\n                      .sort((a, b) => {\r\n                        const numA = parseInt(a.match(/\\d+/)?.[0] || 0);\r\n                        const numB = parseInt(b.match(/\\d+/)?.[0] || 0);\r\n                        return numA - numB;\r\n                      })\r\n                      .map((kelas, index) => (\r\n                        <option key={index} value={kelas}>\r\n                          {kelas}\r\n                        </option>\r\n                      ))}\r\n                </select>\r\n                <button className=\"filter-button\">\r\n                  <i className=\"fas fa-filter\"></i> Filter\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"students-container\">\r\n              {loading ? (\r\n                <div className=\"loading\">\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> Memuat data siswa...\r\n                </div>\r\n              ) : students.filter(s => \r\n                  (selectedClass === \"Semua Kelas\" || s.class === selectedClass) &&\r\n                  (searchQuery === \"\" || s.name.toLowerCase().includes(searchQuery.toLowerCase()))\r\n                ).length === 0 ? (\r\n                <div className=\"no-students\">\r\n                  Tidak ada siswa yang ditemukan\r\n                </div>\r\n              ) : (\r\n                students\r\n                  .filter(s => \r\n                    (selectedClass === \"Semua Kelas\" || s.class === selectedClass) &&\r\n                    (searchQuery === \"\" || s.name.toLowerCase().includes(searchQuery.toLowerCase()))\r\n                  )\r\n                  .map((student) => (\r\n                    <div className=\"student-card\" key={student.id}>\r\n                      <div className=\"student-avatar\">\r\n                        <img src={getStudentAvatar(student)} alt={`${student.name} avatar`} />\r\n                      </div>\r\n                      <div className=\"student-info\">\r\n                        <h3>{student.name}</h3>\r\n                        <p>{student.class} | NIS: {student.nis}</p>\r\n                        <p className=\"parent-info\">\r\n                          <span className=\"parent-label\">Wali Murid: </span>\r\n                          {student.parentStatus === \"linked\" ? (\r\n                            <span className=\"linked\">{student.parent}</span>\r\n                          ) : (\r\n                            <span className=\"unlinked\">Belum ditautkan</span>\r\n                          )}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"student-actions\">\r\n                        <button\r\n                          className=\"action-button naik-kelas\"\r\n                          onClick={() => handleNaikKelas(student)}\r\n                          style={{\r\n                            backgroundColor: '#4CAF50',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            padding: '6px 12px',\r\n                            borderRadius: '4px',\r\n                            cursor: 'pointer',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500',\r\n                            display: 'inline-flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            gap: '6px',\r\n                            transition: 'all 0.3s ease',\r\n                            boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\r\n                            marginRight: '8px'\r\n                          }}\r\n                          onMouseOver={(e) => {\r\n                            e.target.style.backgroundColor = '#45a049';\r\n                            e.target.style.transform = 'translateY(-1px)';\r\n                            e.target.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';\r\n                          }}\r\n                          onMouseOut={(e) => {\r\n                            e.target.style.backgroundColor = '#4CAF50';\r\n                            e.target.style.transform = 'translateY(0)';\r\n                            e.target.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-arrow-up\" style={{ fontSize: '12px' }}></i>\r\n                          Naik Kelas\r\n                        </button>\r\n                        <button\r\n                          className=\"action-button pindah-kelas\"\r\n                          onClick={() => handlePindahKelas(student)}\r\n                          style={{\r\n                            backgroundColor: '#2196F3',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            padding: '6px 12px',\r\n                            borderRadius: '4px',\r\n                            cursor: 'pointer',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500',\r\n                            display: 'inline-flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            gap: '6px',\r\n                            transition: 'all 0.3s ease',\r\n                            boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n                          }}\r\n                          onMouseOver={(e) => {\r\n                            e.target.style.backgroundColor = '#1976D2';\r\n                            e.target.style.transform = 'translateY(-1px)';\r\n                            e.target.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';\r\n                          }}\r\n                          onMouseOut={(e) => {\r\n                            e.target.style.backgroundColor = '#2196F3';\r\n                            e.target.style.transform = 'translateY(0)';\r\n                            e.target.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';\r\n                          }}\r\n                        >\r\n                          <i className=\"fas fa-exchange-alt\" style={{ fontSize: '12px' }}></i>\r\n                          Pindah Kelas\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case \"catatan\":\r\n        return (\r\n          <div className=\"student-list\">\r\n            <div className=\"search-filter-container\">\r\n              <div className=\"search-bar\">\r\n                <div className=\"search-input-wrapper\">\r\n                  <i className=\"fas fa-search search-icon\"></i>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Cari siswa...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                    className=\"search-input\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"filter-dropdown\">\r\n                <select\r\n                  value={selectedClass}\r\n                  onChange={(e) => setSelectedClass(e.target.value)}\r\n                  className=\"filter-select\"\r\n                >\r\n                  <option value=\"Semua Kelas\">Semua Kelas</option>\r\n                  {teacherProfile.kelas &&\r\n                    teacherProfile.kelas\r\n                      .sort((a, b) => {\r\n                        const numA = parseInt(a.match(/\\d+/)?.[0] || 0);\r\n                        const numB = parseInt(b.match(/\\d+/)?.[0] || 0);\r\n                        return numA - numB;\r\n                      })\r\n                      .map((kelas, index) => (\r\n                        <option key={index} value={kelas}>\r\n                          {kelas}\r\n                        </option>\r\n                      ))}\r\n                </select>\r\n                <button className=\"filter-button\">\r\n                  <i className=\"fas fa-filter\"></i> Filter\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"students-container\">\r\n              {loading ? (\r\n                <div className=\"loading\">\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> Memuat data siswa...\r\n                </div>\r\n              ) : students.filter(s => \r\n                  (selectedClass === \"Semua Kelas\" || s.class === selectedClass) &&\r\n                  (searchQuery === \"\" || s.name.toLowerCase().includes(searchQuery.toLowerCase()))\r\n                ).length === 0 ? (\r\n                <div className=\"no-students\">\r\n                  Tidak ada siswa yang ditemukan\r\n                </div>\r\n              ) : (\r\n                students\r\n                  .filter(s => \r\n                    (selectedClass === \"Semua Kelas\" || s.class === selectedClass) &&\r\n                    (searchQuery === \"\" || s.name.toLowerCase().includes(searchQuery.toLowerCase()))\r\n                  )\r\n                  .map((student) => (\r\n                    <div className=\"student-card\" key={student.id}>\r\n                      <div className=\"student-avatar\">\r\n                        <img src={getStudentAvatar(student)} alt={`${student.name} avatar`} />\r\n                      </div>\r\n                      <div className=\"student-info\">\r\n                        <h3>{student.name}</h3>\r\n                        <p>{student.class} | NIS: {student.nis}</p>\r\n                        <p className=\"parent-info\">\r\n                          <span className=\"parent-label\">Wali Murid: </span>\r\n                          {student.parentStatus === \"linked\" ? (\r\n                            <span className=\"linked\">{student.parent}</span>\r\n                          ) : (\r\n                            <span className=\"unlinked\">Belum ditautkan</span>\r\n                          )}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"student-actions\">\r\n                        <button\r\n                          className=\"action-button catatan\"\r\n                          onClick={() => handleSendNote(student.id, student.name)}\r\n                        >\r\n                          <i className=\"fas fa-comment-alt\"></i> Kirim Catatan\r\n                        </button>\r\n                        <button\r\n                          className=\"action-button lihat-catatan\"\r\n                          onClick={() => handleLihatCatatan(student)}\r\n                        >\r\n                          <i className=\"fas fa-eye\"></i> Lihat Catatan\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      case \"laporan\":\r\n        return (\r\n          <div className=\"reports\">\r\n            <h2>Laporan</h2>\r\n            <div className=\"report-filters\">\r\n              <div className=\"filter-group\">\r\n                <label>Pilih Kelas:</label>\r\n                <select \r\n                  value={selectedClass || ''} \r\n                  onChange={(e) => setSelectedClass(parseInt(e.target.value))}\r\n                >\r\n                  {classes.map(kelas => (\r\n                    <option key={kelas.id_kelas} value={kelas.id_kelas}>\r\n                      {kelas.nama_kelas}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            {selectedClass && (\r\n              <div className=\"report-content\">\r\n                <div className=\"class-summary\">\r\n                  <h3>Ringkasan Kelas</h3>\r\n                  <div className=\"summary-stats\">\r\n                    <div className=\"stat-item\">\r\n                      <span className=\"stat-label\">Total Siswa:</span>\r\n                      <span className=\"stat-value\">\r\n                        {students.filter(s => s.id_kelas === selectedClass).length}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"stat-item\">\r\n                      <span className=\"stat-label\">Rata-rata Nilai:</span>\r\n                      <span className=\"stat-value\">\r\n                        {calculateClassAverage(selectedClass)}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"student-reports\">\r\n                  <h3>Laporan Per Siswa</h3>\r\n                  <table>\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Nama Siswa</th>\r\n                        <th>Rata-rata Nilai</th>\r\n                        <th>Kemajuan</th>\r\n                        <th>Aksi</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {students\r\n                        .filter(s => s.id_kelas === selectedClass)\r\n                        .map(siswa => (\r\n                          <tr key={siswa.id_siswa}>\r\n                            <td>{siswa.nama}</td>\r\n                            <td>{calculateStudentAverage(siswa.id_siswa)}</td>\r\n                            <td>{getStudentProgress(siswa.id_siswa)}</td>\r\n                            <td>\r\n                              <button onClick={() => handleViewReport(siswa.id_siswa)}>\r\n                                <i className=\"fas fa-file-alt\"></i> Detail\r\n                              </button>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return <div>No content available</div>;\r\n    }\r\n  };\r\n\r\n  // Add getStudentAvatar function at the top of the component\r\n  const getStudentAvatar = (student) => {\r\n    const animalAvatars = {\r\n      'Anjing': '/src/assets/anjing.png',\r\n      'Babi': '/src/assets/babi.png',\r\n      'Bebek': '/src/assets/bebek.png',\r\n      'Gurita': '/src/assets/gurita.png',\r\n      'Harimau': '/src/assets/harimau.png',\r\n      'Kelinci': '/src/assets/kelinci.png',\r\n      'Kucing': '/src/assets/kucing.png',\r\n      'Sapi': '/src/assets/sapi.png',\r\n      'Serigala': '/src/assets/serigala.png',\r\n      'Singa': '/src/assets/singa.png'\r\n    };\r\n\r\n    // Check if student has an avatar set\r\n\r\n    if (student?.avatar && animalAvatars[student.avatar]) {\r\n      return animalAvatars[student.avatar];\r\n    }\r\n\r\n    // Fallback to gender-based avatar if no animal avatar is set\r\n    return student?.gender === 'P' ? '/src/assets/perempuan.png' : '/src/assets/laki.png';\r\n  };\r\n\r\n  const handleStudentUpdate = () => {\r\n    // Refresh the students list after update\r\n    fetchStudents();\r\n  };\r\n\r\n  const closeEditModal = () => {\r\n    setEditModal({\r\n      isOpen: false,\r\n      student: null\r\n    });\r\n  };\r\n\r\n  const handleEditStudent = (student) => {\r\n    setEditModal({\r\n      isOpen: true,\r\n      student: student\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"guru-dashboard\">\r\n      {\" \"}\r\n      {/* Header */}{\" \"}\r\n      <header className=\"header-guru\">\r\n        <div className=\"logo\">\r\n          <i className=\"fas fa-chalkboard-teacher logo-icon\"></i>\r\n          <h1>Math Fun - Dashboard Guru</h1>\r\n        </div>\r\n        <div className=\"header-actions\">\r\n          <button className=\"user-mode-button\">\r\n            <i className=\"fas fa-user-friends icon-margin\"></i> Mode Orang Tua\r\n          </button>x\r\n          <button className=\"logout-button\" onClick={handleLogout}>\r\n            <i className=\"fas fa-sign-out-alt icon-margin\"></i> Logout\r\n          </button>\r\n        </div>\r\n      </header>{\" \"}\r\n      {/* Teacher Profile */}{\" \"}\r\n      <div className=\"profile-container\">\r\n        <div className=\"profile-avatar\">\r\n          <img src=\"/src/assets/icon_guru.png\" alt=\"Profile\" />\r\n        </div>\r\n        <div className=\"profile-info\">\r\n          {loading ? (\r\n            <div className=\"loading-profile\">\r\n              <i className=\"fas fa-spinner fa-spin\"></i> Memuat data guru...\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <h2>{teacherProfile.name}</h2>\r\n              <p>\r\n                {teacherProfile.role} - {teacherProfile.school}\r\n              </p>\r\n              <div className=\"contact-info\">\r\n                <a\r\n                  href={`mailto:${teacherProfile.email}`}\r\n                  className=\"email-link\"\r\n                >\r\n                  <i className=\"fas fa-envelope\"></i> {teacherProfile.email}\r\n                </a>\r\n                <a href={`tel:${teacherProfile.phone}`} className=\"phone-link\">\r\n                  <i className=\"fas fa-phone\"></i> {teacherProfile.phone}\r\n                </a>\r\n                <span className=\"student-count\">\r\n                  <i className=\"fas fa-user-graduate\"></i>{\" \"}\r\n                  {teacherProfile.studentCount} Siswa\r\n                </span>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n        <button className=\"edit-profile-button\">\r\n          <i className=\"fas fa-edit\"></i> Edit Profil\r\n        </button>\r\n      </div>{\" \"}\r\n      {/* Navigation Tabs */}{\" \"}\r\n      <nav className=\"tabs-nav\">\r\n        <button\r\n          className={`tab-button ${activeTab === \"daftar\" ? \"active\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"daftar\")}\r\n        >\r\n          <i className=\"fas fa-users tab-icon\"></i> Kelola Siswa\r\n        </button>\r\n        <button\r\n          className={`tab-button ${activeTab === \"kelas\" ? \"active\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"kelas\")}\r\n        >\r\n          <i className=\"fas fa-chalkboard tab-icon\"></i> Kelola Kelas\r\n        </button>\r\n        <button\r\n          className={`tab-button ${activeTab === \"materi\" ? \"active\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"materi\")}\r\n        >\r\n          <i className=\"fas fa-chalkboard tab-icon\"></i> Kelola Materi\r\n        </button>\r\n        <button\r\n          className={`tab-button ${activeTab === \"catatan\" ? \"active\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"catatan\")}\r\n        >\r\n          <i className=\"fas fa-comment-alt tab-icon\"></i> Kirim Catatan\r\n        </button>\r\n        <button\r\n          className={`tab-button ${activeTab === \"laporan\" ? \"active\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"laporan\")}\r\n        >\r\n          <i className=\"fas fa-chart-bar tab-icon\"></i> Laporan\r\n        </button>      </nav>\r\n      {/* Tab Content */}\r\n      <div className=\"tab-content\">{renderTabContent()}</div>\r\n\r\n      {/* Student History Modal */}\r\n      <StudentHistoryModal \r\n        isOpen={historyModal.isOpen} \r\n        onClose={closeHistoryModal} \r\n        student={historyModal.student} \r\n      />\r\n\r\n      {/* Modal Catatan */}\r\n      <ModalCatatan\r\n        isOpen={modalCatatan.isOpen}\r\n        onClose={closeModalCatatan}\r\n        studentId={modalCatatan.studentId}\r\n        teacherId={currentUserId}\r\n        studentName={modalCatatan.studentName}\r\n      />\r\n\r\n      {/* Add ModalLihatCatatan */}\r\n      <ModalLihatCatatan\r\n        isOpen={lihatCatatanModal.isOpen}\r\n        onClose={closeLihatCatatanModal}\r\n        student={lihatCatatanModal.student}\r\n        notes={lihatCatatanModal.notes}\r\n        onDeleteNote={handleDeleteNote}\r\n      />\r\n\r\n      {/* Edit Student Modal */}\r\n      <EditStudentModal\r\n        isOpen={editModal.isOpen}\r\n        onClose={closeEditModal}\r\n        student={editModal.student}\r\n        onUpdate={handleStudentUpdate}\r\n      />\r\n\r\n      {/* Add Student Modal */}\r\n      <AddStudentModal\r\n        isOpen={addModal.isOpen}\r\n        onClose={closeAddModal}\r\n        onAdd={handleStudentAdd}\r\n      />\r\n\r\n      {/* Kelas Modal */}\r\n      <KelasModal\r\n        isOpen={kelasModal.isOpen}\r\n        onClose={() => setKelasModal({\r\n          isOpen: false,\r\n          type: null,\r\n          student: null,\r\n          availableClasses: []\r\n        })}\r\n        student={kelasModal.student}\r\n        availableClasses={kelasModal.availableClasses}\r\n        onConfirm={handleKelasConfirm}\r\n        type={kelasModal.type}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TabGuru;\r\n","export default \"__VITE_ASSET__DbxBdjd0__\"","export default \"__VITE_ASSET__Cz1r5Rr6__\"","export default \"__VITE_ASSET__BkYE_fJ0__\"","export default \"__VITE_ASSET__56sWIoEw__\"","import React, { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./style/siswa2.css\";\r\nimport bronzeBadge from \"../../../assets/bronze.PNG\";\r\nimport silverBadge from \"../../../assets/silver.PNG\";\r\nimport goldBadge from \"../../../assets/gold.PNG\";\r\nimport backgroundImage from \"../../../assets/mainsiswa.jpg\";\r\n\r\nconst chapters = [\r\n  { title: \"Bab 1\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 2\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 3\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 4\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 5\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 6\", levels: [\"Level 1\"] },\r\n];\r\n\r\nexport default function MainSiswa2() {\r\n  const [selectedChapter, setSelectedChapter] = useState(null);\r\n  const [globalProgress, setGlobalProgress] = useState(0);\r\n  const [chapterProgress, setChapterProgress] = useState(\r\n    Array(chapters.length).fill(0)\r\n  );\r\n  const [selectedAvatar, setSelectedAvatar] = useState(null);\r\n  const [userData, setUserData] = useState({\r\n    completedLevels: 0,\r\n  });\r\n  const [completedCategoriesMap, setCompletedCategoriesMap] = useState({});\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Pastikan halaman terlihat dengan menambahkan logging\r\n    console.log(\"MainSiswa2 mounted\");\r\n    document.body.style.backgroundColor = \"#ffffff\";\r\n    document.body.style.color = \"#333333\";\r\n\r\n    // Cek apakah user sudah login\r\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n    if (!isLoggedIn) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Get user data from localStorage\r\n    const userDataString = localStorage.getItem(\"userData\");\r\n    const userData = userDataString ? JSON.parse(userDataString) : null;\r\n    \r\n    // Ambil avatar tersimpan yang dipilih selama proses login\r\n    const savedAvatar = localStorage.getItem(\"selectedAvatar\");\r\n    if (savedAvatar) {\r\n      const avatar = JSON.parse(savedAvatar);\r\n      setSelectedAvatar({\r\n        ...avatar,\r\n        displayName: userData?.nama || avatar.name // Use student name if available\r\n      });\r\n\r\n      // Ambil progress yang spesifik untuk avatar ini\r\n      const avatarKey = `avatar_${avatar.name}_levelScores`;\r\n      const levelScores = JSON.parse(localStorage.getItem(avatarKey)) || {};\r\n\r\n      // Menghitung level yang telah diselesaikan\r\n      let completedLevelsCount = 0;\r\n\r\n      // Calculate chapter progress based on completed levels\r\n      const newChapterProgress = Array(chapters.length).fill(0);\r\n\r\n      // Update UI with calculated progress\r\n      setChapterProgress(newChapterProgress);\r\n      setUserData({ completedLevels: completedLevelsCount });\r\n      setCompletedCategoriesMap({});\r\n\r\n      // Calculate global progress (average of all chapters)\r\n      const totalProgress =\r\n        newChapterProgress.reduce((acc, val) => acc + val, 0) / chapters.length;\r\n      setGlobalProgress(totalProgress);\r\n\r\n      // Save the new progress calculations\r\n      const avatarProgressKey = `avatar_${avatar.name}_chapterProgress`;\r\n      localStorage.setItem(\r\n        avatarProgressKey,\r\n        JSON.stringify(newChapterProgress)\r\n      );\r\n    } else {\r\n      // Jika tidak ada avatar, gunakan data dari localStorage normal (backwards compatibility)\r\n      const storedProgress =\r\n        JSON.parse(localStorage.getItem(\"chapterProgress\")) ||\r\n        Array(chapters.length).fill(0);\r\n      setChapterProgress(storedProgress);\r\n      const totalProgress =\r\n        storedProgress.reduce((acc, val) => acc + val, 0) / chapters.length;\r\n      setGlobalProgress(totalProgress);\r\n    }\r\n  }, [navigate]);\r\n\r\n  // Modified to handle both direct navigation for Bab 1 and popup for other chapters\r\n  const handleChapterClick = (index) => {\r\n    if (index === 0) {\r\n      // For Bab 1, navigate directly to Category2_Bab1.jsx\r\n      localStorage.setItem(\"currentBabIndex\", 0);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category2_bab1`); // Change to directly navigate to category2_bab1\r\n    } else if (index === 1) {\r\n      // For Bab 2, navigate directly to Category2_Bab2.jsx\r\n      localStorage.setItem(\"currentBabIndex\", 1);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category2_bab2`); // Navigate to category2_bab2\r\n    } else if (index === 2) {\r\n      // For Bab 3, navigate directly to Category2_Bab3.jsx\r\n      localStorage.setItem(\"currentBabIndex\", 2);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category2_bab3`); // Navigate to category2_bab3\r\n    } else if (index === 3) {\r\n      // For Bab 4, navigate directly to Category2_Bab4.jsx\r\n      localStorage.setItem(\"currentBabIndex\", 3);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category2_bab4`); // Navigate to category2_bab4\r\n    } else if (index === 4) {\r\n      // For Bab 5, navigate directly to Category2_Bab5.jsx\r\n      localStorage.setItem(\"currentBabIndex\", 4);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category2_bab5`); // Navigate to category2_bab5\r\n    } else if (index === 5) {\r\n      // For Bab 6, navigate directly to Category2_Bab6.jsx\r\n      localStorage.setItem(\"currentBabIndex\", 5);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category2_bab6`); // Navigate to category2_bab6\r\n    } else {\r\n      // For other chapters, show the popup\r\n      setSelectedChapter(index);\r\n    }\r\n  };\r\n\r\n  const handleLevelClick = (chapterIndex, levelIndex) => {\r\n    // Simpan informasi bab dan level ke localStorage\r\n    localStorage.setItem(\"currentBabIndex\", chapterIndex);\r\n    localStorage.setItem(\"currentLevelIndex\", levelIndex);\r\n\r\n    // Navigasi ke halaman materi dengan parameter untuk identifikasi\r\n    navigate(`/category?chapter=${chapterIndex}&level=${levelIndex}`);\r\n  };\r\n\r\n  const handleClosePopup = () => {\r\n    setSelectedChapter(null);\r\n  };\r\n\r\n  // Fitur logout\r\n  const handleLogout = () => {\r\n    // Hapus status login tetapi simpan avatar\r\n    localStorage.removeItem(\"isLoggedIn\");\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  const handleViewScore = () => {\r\n    navigate(\"/skor\");\r\n  };\r\n\r\n  // Fungsi untuk mendapatkan status apakah level sudah diselesaikan\r\n  const isLevelCompleted = (chapterIndex, levelIndex) => {\r\n    if (!selectedAvatar) return false;\r\n\r\n    const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n    return (\r\n      completedCategoriesMap[levelKey] &&\r\n      completedCategoriesMap[levelKey].length > 0\r\n    );\r\n  };\r\n\r\n  // Function to get the level progress percentage\r\n  const getLevelProgress = (chapterIndex, levelIndex) => {\r\n    if (!selectedAvatar) return 0;\r\n\r\n    const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n    if (!completedCategoriesMap[levelKey]) return 0;\r\n\r\n    // Return percentage based on completion status\r\n    return completedCategoriesMap[levelKey].length > 0 ? 100 : 0;\r\n  };\r\n  return (\r\n    <div\r\n      className=\"main-siswa-container\"\r\n      style={{\r\n        color: \"#333333\",\r\n        backgroundImage: `url(${backgroundImage})`,\r\n        backgroundSize: \"cover\",\r\n        backgroundPosition: \"center\",\r\n        backgroundRepeat: \"no-repeat\",\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <header\r\n        className=\"header-siswa\"\r\n        style={{ position: \"relative\", zIndex: 1 }}\r\n      >\r\n        {\" \"}\r\n        <motion.h1\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.6 }}\r\n          style={{\r\n            color: \"#ff5722\",\r\n            textShadow: \"2px 2px 4px rgba(0,0,0,0.5)\",\r\n          }}\r\n        >\r\n          Game Matematika Siswa\r\n        </motion.h1>\r\n\r\n        {/* Avatar dan menu profil */}\r\n        <div className=\"profile-section\">\r\n          <div className=\"profile-icon\">\r\n            {selectedAvatar ? (\r\n              <img\r\n                src={selectedAvatar.src}\r\n                alt={selectedAvatar.displayName || selectedAvatar.name}\r\n                className=\"avatar-image\"\r\n              />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          <div className=\"profile-actions\">\r\n            <button onClick={handleViewScore} className=\"score-button\">\r\n              Lihat Progres\r\n            </button>\r\n            <button onClick={handleLogout} className=\"logout-button\">\r\n              Keluar\r\n            </button>{\" \"}\r\n          </div>\r\n        </div>\r\n      </header>\r\n      <div\r\n        className=\"progress-container\"\r\n        style={{\r\n          position: \"relative\",\r\n          zIndex: 1,\r\n          backgroundColor: \"transparent\",\r\n          padding: \"15px\",\r\n        }}\r\n      >\r\n        <div className=\"progress-info\" style={{ color: \"white\" }}>\r\n          <p>\r\n            Progress{\" \"}\r\n            <strong>{selectedAvatar ? selectedAvatar.displayName : \"Siswa\"}</strong>:{\" \"}\r\n            {Math.round(globalProgress)}%\r\n          </p>\r\n          <p>\r\n            Level Selesai: <strong>{userData.completedLevels}</strong> dari 9\r\n          </p>\r\n        </div>\r\n        {/* Progress Bar with Milestone Markers */}\r\n        <div\r\n          className=\"progress-bar\"\r\n          style={{\r\n            position: \"relative\",\r\n            marginBottom: \"20px\",\r\n            width: \"90%\",\r\n            margin: \"0 auto 30px auto\",\r\n            height: \"15px\", // Increased height of the progress bar\r\n          }}\r\n        >\r\n          {\" \"}\r\n          {/* Bronze marker at 30% */}\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              left: \"30%\",\r\n              top: -2,\r\n              bottom: -2,\r\n              width: \"3px\",\r\n              backgroundColor: \"#ff5722\",\r\n            }}\r\n          ></div>\r\n          {/* Silver marker at 60% */}\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              left: \"60%\",\r\n              top: -2,\r\n              bottom: -2,\r\n              width: \"3px\",\r\n              backgroundColor: \"#ff5722\",\r\n            }}\r\n          ></div>\r\n          {/* Gold marker at 100% */}\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              right: \"0\",\r\n              top: -2,\r\n              bottom: -2,\r\n              width: \"3px\",\r\n              backgroundColor: \"#ff5722\",\r\n            }}\r\n          ></div>\r\n          <motion.div\r\n            className=\"progress\"\r\n            style={{ width: `${globalProgress}%` }}\r\n            initial={{ width: 0 }}\r\n            animate={{ width: `${globalProgress}%` }}\r\n            transition={{ duration: 0.8 }}\r\n          />\r\n        </div>\r\n        {/* Badges row below progress bar */}\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"space-between\",\r\n            marginBottom: \"30px\",\r\n            position: \"relative\",\r\n            padding: \"0\",\r\n            height: \"70px\", // Increased height\r\n            width: \"90%\" /* Match progress bar width */,\r\n            margin: \"0 auto\" /* Center like progress bar */,\r\n            overflow:\r\n              \"visible\" /* Allow badges to be visible if they overflow */,\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              position: \"absolute\",\r\n              left: \"30%\",\r\n              transform: \"translateX(-50%)\",\r\n            }}\r\n          >\r\n            {\" \"}\r\n            <img\r\n              src={bronzeBadge}\r\n              alt=\"Bronze Badge\"\r\n              style={{\r\n                width: \"60px\",\r\n                height: \"60px\",\r\n                marginRight: \"10px\",\r\n                opacity: globalProgress >= 30 ? \"1\" : \"0.4\",\r\n                filter: globalProgress >= 30 ? \"none\" : \"grayscale(80%)\",\r\n                transition: \"all 0.3s ease\",\r\n              }}\r\n            />\r\n            <div>\r\n              <p\r\n                style={{\r\n                  margin: 0,\r\n                  fontWeight: \"bold\",\r\n                  fontSize: \"0.9rem\",\r\n                  textAlign: \"left\",\r\n                  opacity: globalProgress >= 30 ? \"1\" : \"0.6\",\r\n                }}\r\n              >\r\n                Bronze\r\n              </p>\r\n              <p\r\n                style={{\r\n                  margin: \"2px 0 0 0\",\r\n                  fontSize: \"0.8rem\",\r\n                  textAlign: \"left\",\r\n                  color: globalProgress >= 30 ? \"#ff5722\" : \"#999999\",\r\n                }}\r\n              >\r\n                30%\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              position: \"absolute\",\r\n              left: \"60%\",\r\n              transform: \"translateX(-50%)\",\r\n            }}\r\n          >\r\n            {\" \"}\r\n            <img\r\n              src={silverBadge}\r\n              alt=\"Silver Badge\"\r\n              style={{\r\n                width: \"60px\",\r\n                height: \"60px\",\r\n                marginRight: \"10px\",\r\n                opacity: globalProgress >= 60 ? \"1\" : \"0.4\",\r\n                filter: globalProgress >= 60 ? \"none\" : \"grayscale(80%)\",\r\n                transition: \"all 0.3s ease\",\r\n              }}\r\n            />\r\n            <div>\r\n              <p\r\n                style={{\r\n                  margin: 0,\r\n                  fontWeight: \"bold\",\r\n                  fontSize: \"0.9rem\",\r\n                  textAlign: \"left\",\r\n                  opacity: globalProgress >= 60 ? \"1\" : \"0.6\",\r\n                }}\r\n              >\r\n                Silver\r\n              </p>\r\n              <p\r\n                style={{\r\n                  margin: \"2px 0 0 0\",\r\n                  fontSize: \"0.8rem\",\r\n                  textAlign: \"left\",\r\n                  color: globalProgress >= 60 ? \"#ff5722\" : \"#999999\",\r\n                }}\r\n              >\r\n                60%\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              position: \"absolute\",\r\n              left: \"calc(100% - 2px)\" /* Adjust slightly to avoid overlapping right border */,\r\n              transform: \"translateX(-50%)\",\r\n            }}\r\n          >\r\n            {\" \"}\r\n            <img\r\n              src={goldBadge}\r\n              alt=\"Gold Badge\"\r\n              style={{\r\n                width: \"60px\",\r\n                height: \"60px\",\r\n                marginRight: \"10px\",\r\n                opacity: globalProgress >= 100 ? \"1\" : \"0.4\",\r\n                filter: globalProgress >= 100 ? \"none\" : \"grayscale(80%)\",\r\n                transition: \"all 0.3s ease\",\r\n              }}\r\n            />\r\n            <div style={{ whiteSpace: \"nowrap\" }}>\r\n              <p\r\n                style={{\r\n                  margin: 0,\r\n                  fontWeight: \"bold\",\r\n                  fontSize: \"0.9rem\",\r\n                  textAlign: \"left\",\r\n                  opacity: globalProgress >= 100 ? \"1\" : \"0.6\",\r\n                }}\r\n              >\r\n                Gold\r\n              </p>\r\n              <p\r\n                style={{\r\n                  margin: \"2px 0 0 0\",\r\n                  fontSize: \"0.8rem\",\r\n                  textAlign: \"left\",\r\n                  color: globalProgress >= 100 ? \"#ff5722\" : \"#999999\",\r\n                }}\r\n              >\r\n                100%\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        className=\"chapter-buttons\"\r\n        style={{ position: \"relative\", zIndex: 1 }}\r\n      >\r\n        {chapters.map((chapter, index) => (\r\n          <motion.button\r\n            key={index}\r\n            className=\"big-chapter-button\"\r\n            onClick={() => handleChapterClick(index)}\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.2 * index }}\r\n            style={{\r\n              backgroundColor: \"rgba(0, 0, 0, 0.6)\",\r\n              // border: \"2px solid #ff5722\",\r\n              color: \"white\",\r\n              textShadow: \"1px 1px 2px black\",\r\n              padding: \"25px 15px 15px\",\r\n              fontSize: \"1.5rem\",\r\n              fontWeight: \"bold\",\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              alignItems: \"center\",\r\n            }}\r\n          >\r\n            {chapter.title}\r\n          </motion.button>\r\n        ))}\r\n      </div>{\" \"}\r\n      {selectedChapter !== null && selectedChapter !== 0 && (\r\n        <div\r\n          className=\"popup-overlay\"\r\n          style={{\r\n            zIndex: 10,\r\n            backgroundColor: \"rgba(0, 0, 0, 0.7)\",\r\n          }}\r\n        >\r\n          <motion.div\r\n            className=\"popup\"\r\n            initial={{ scale: 0.8, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            transition={{ duration: 0.3 }}\r\n            style={{\r\n              backgroundColor: \"rgba(0, 0, 0, 0.8)\",\r\n              border: \"2px solid #ff5722\",\r\n              color: \"white\",\r\n            }}\r\n          >\r\n            {\" \"}\r\n            <h2>{chapters[selectedChapter].title}</h2>\r\n            <div className=\"levels\">\r\n              {chapters[selectedChapter].levels.map((level, levelIndex) => (\r\n                <div key={levelIndex} className=\"level-container\">\r\n                  <button\r\n                    className={`level-button ${\r\n                      isLevelCompleted(selectedChapter, levelIndex)\r\n                        ? \"level-completed\"\r\n                        : \"\"\r\n                    }`}\r\n                    onClick={() =>\r\n                      handleLevelClick(selectedChapter, levelIndex)\r\n                    }\r\n                  >\r\n                    {level}\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <button className=\"close-popup-button\" onClick={handleClosePopup}>\r\n               Kembali ke Menu\r\n            </button>\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./style/siswa4.css\";\r\nimport bronzeBadge from \"../../../assets/bronze.PNG\";\r\nimport silverBadge from \"../../../assets/silver.PNG\";\r\nimport goldBadge from \"../../../assets/gold.PNG\";\r\nimport backgroundImage from \"../../../assets/mainsiswa.jpg\";\r\n\r\nconst chapters = [\r\n  { title: \"Bab 1\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 2\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 3\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 4\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 5\", levels: [\"Level 1\"] },\r\n  { title: \"Bab 6\", levels: [\"Level 1\"] },\r\n];\r\n\r\nexport default function MainSiswa4() {\r\n  const [selectedChapter, setSelectedChapter] = useState(null);\r\n  const [globalProgress, setGlobalProgress] = useState(0);\r\n  const [chapterProgress, setChapterProgress] = useState(\r\n    Array(chapters.length).fill(0)\r\n  );\r\n  const [selectedAvatar, setSelectedAvatar] = useState(null);\r\n  const [userData, setUserData] = useState({\r\n    completedLevels: 0,\r\n  });\r\n  const [completedCategoriesMap, setCompletedCategoriesMap] = useState({});\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Pastikan halaman terlihat dengan menambahkan logging\r\n    console.log(\"MainSiswa4 mounted\");\r\n    document.body.style.backgroundColor = \"#ffffff\";\r\n    document.body.style.color = \"#333333\";\r\n    \r\n    // Cek apakah user sudah login\r\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n    if (!isLoggedIn) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Get user data from localStorage\r\n    const userDataString = localStorage.getItem(\"userData\");\r\n    const userData = userDataString ? JSON.parse(userDataString) : null;\r\n    \r\n    if (userData && userData.nama) {\r\n      setSelectedAvatar({ name: userData.nama });\r\n    } else {\r\n      console.warn(\"No user data found in localStorage\");\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Keep avatar image but use student name\r\n    const savedAvatar = localStorage.getItem(\"selectedAvatar\");\r\n    if (savedAvatar) {\r\n      const avatar = JSON.parse(savedAvatar);\r\n      setSelectedAvatar({\r\n        ...avatar,\r\n        displayName: userData.nama // Use student name from userData\r\n      });\r\n\r\n      // Ambil progress yang spesifik untuk avatar ini\r\n      const avatarKey = `avatar_${avatar.name}_levelScores`;\r\n      const levelScores = JSON.parse(localStorage.getItem(avatarKey)) || {};\r\n\r\n      // Menghitung level yang telah diselesaikan\r\n      let completedLevelsCount = 0;\r\n\r\n      // Calculate chapter progress based on completed levels\r\n      const newChapterProgress = Array(chapters.length).fill(0);\r\n\r\n      // Update UI with calculated progress\r\n      setChapterProgress(newChapterProgress);\r\n      setUserData({ completedLevels: completedLevelsCount });\r\n      setCompletedCategoriesMap({});\r\n\r\n      // Calculate global progress (average of all chapters)\r\n      const totalProgress =\r\n        newChapterProgress.reduce((acc, val) => acc + val, 0) / chapters.length;\r\n      setGlobalProgress(totalProgress);\r\n\r\n      // Save the new progress calculations\r\n      const avatarProgressKey = `avatar_${avatar.name}_chapterProgress`;\r\n      localStorage.setItem(\r\n        avatarProgressKey,\r\n        JSON.stringify(newChapterProgress)\r\n      );\r\n    } else {\r\n      // Jika tidak ada avatar, gunakan data dari localStorage normal (backwards compatibility)\r\n      const storedProgress =\r\n        JSON.parse(localStorage.getItem(\"chapterProgress\")) ||\r\n        Array(chapters.length).fill(0);\r\n      setChapterProgress(storedProgress);\r\n      const totalProgress =\r\n        storedProgress.reduce((acc, val) => acc + val, 0) / chapters.length;\r\n      setGlobalProgress(totalProgress);\r\n    }\r\n  }, [navigate]);\r\n\r\n  // Modified to handle both direct navigation for Bab 1 and popup for other chapters\r\n  const handleChapterClick = (index) => {\r\n    if (index === 0) {\r\n      // For Bab 1, navigate directly to Category4_Bab1.jsx\r\n      localStorage.setItem(\"currentBabIndex\", 0);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category4_bab1`); // Change to directly navigate to category4_bab1\r\n    } else if (index === 1) {\r\n      // For Bab 2, navigate directly to Category4_Bab2.jsx\r\n      localStorage.setItem(\"currentBabIndex\", 1);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category4_bab2`); // Navigate to category4_bab2\r\n    } else if (index === 2) {\r\n      // For Bab 3, navigate directly to Category4_Bab3.jsx\r\n      localStorage.setItem(\"currentBabIndex\", 2);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category4_bab3`); // Navigate to category4_bab3\r\n    } else if (index === 3) {\r\n      // For Bab 4, navigate directly to Category4_Bab4.jsx \r\n      localStorage.setItem(\"currentBabIndex\", 3);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category4_bab4`); // Navigate to category4_bab4\r\n    } else if (index === 4) {\r\n      // For Bab 5, navigate directly to Category4_Bab5.jsx \r\n      localStorage.setItem(\"currentBabIndex\", 4);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category4_bab5`); // Navigate to category4_bab5\r\n    } else if (index === 5) {\r\n      // For Bab 6, navigate directly to Category4_Bab6.jsx \r\n      localStorage.setItem(\"currentBabIndex\", 5);\r\n      localStorage.setItem(\"currentLevelIndex\", 0);\r\n      navigate(`/category4_bab6`); // Navigate to category4_bab6\r\n    } else {\r\n      // For other chapters, show the popup\r\n      setSelectedChapter(index);\r\n    }\r\n  };\r\n\r\n  const handleLevelClick = (chapterIndex, levelIndex) => {\r\n    // Simpan informasi bab dan level ke localStorage\r\n    localStorage.setItem(\"currentBabIndex\", chapterIndex);\r\n    localStorage.setItem(\"currentLevelIndex\", levelIndex);\r\n\r\n    // Navigasi ke halaman materi dengan parameter untuk identifikasi\r\n    navigate(`/category?chapter=${chapterIndex}&level=${levelIndex}`);\r\n  };\r\n\r\n  const handleClosePopup = () => {\r\n    setSelectedChapter(null);\r\n  };\r\n\r\n  // Fitur logout\r\n  const handleLogout = () => {\r\n    // Hapus status login tetapi simpan avatar\r\n    localStorage.removeItem(\"isLoggedIn\");\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  const handleViewScore = () => {\r\n    navigate(\"/skor\");\r\n  };\r\n\r\n  // Fungsi untuk mendapatkan status apakah level sudah diselesaikan\r\n  const isLevelCompleted = (chapterIndex, levelIndex) => {\r\n    if (!selectedAvatar) return false;\r\n\r\n    const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n    return (\r\n      completedCategoriesMap[levelKey] &&\r\n      completedCategoriesMap[levelKey].length > 0\r\n    );\r\n  };\r\n\r\n  // Function to get the level progress percentage\r\n  const getLevelProgress = (chapterIndex, levelIndex) => {\r\n    if (!selectedAvatar) return 0;\r\n\r\n    const levelKey = `bab${chapterIndex}_level${levelIndex}`;\r\n    if (!completedCategoriesMap[levelKey]) return 0;\r\n\r\n    // Return percentage based on completion status\r\n    return completedCategoriesMap[levelKey].length > 0 ? 100 : 0;\r\n  };  return (\r\n    <div className=\"main-siswa-container\" style={{\r\n      color: \"#333333\",\r\n      backgroundImage: `url(${backgroundImage})`,\r\n      backgroundSize: \"cover\",\r\n      backgroundPosition: \"center\",\r\n      backgroundRepeat: \"no-repeat\",\r\n      position: \"relative\"\r\n    }}>\r\n      <header className=\"header-siswa\" style={{ position: \"relative\", zIndex: 1 }}>        <motion.h1\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.6 }}\r\n          style={{\r\n            color: \"#ff5722\", \r\n            textShadow: \"2px 2px 4px rgba(0,0,0,0.5)\"\r\n          }}\r\n        >\r\n          Game Matematika Siswa\r\n        </motion.h1>\r\n\r\n        {/* Avatar dan menu profil */}\r\n        <div className=\"profile-section\">\r\n          <div className=\"profile-icon\">\r\n            {selectedAvatar ? (\r\n              <img\r\n                src={selectedAvatar.src}\r\n                alt={selectedAvatar.displayName || selectedAvatar.name}\r\n                className=\"avatar-image\"\r\n              />\r\n            ) : (\r\n              \"\"\r\n            )}\r\n          </div>\r\n          <div className=\"profile-actions\">\r\n            <button onClick={handleViewScore} className=\"score-button\">\r\n              Lihat Progres\r\n            </button>\r\n            <button onClick={handleLogout} className=\"logout-button\">\r\n              Keluar\r\n            </button>          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"progress-container\" style={{ \r\n        position: \"relative\", \r\n        zIndex: 1, \r\n        backgroundColor: \"transparent\",\r\n        padding: \"15px\"\r\n      }}>        \r\n        <div className=\"progress-info\" style={{ color: \"white\" }}>\r\n          <p>\r\n            Progress{\" \"}\r\n            <strong>{selectedAvatar ? selectedAvatar.displayName : \"Siswa\"}</strong>:{\" \"}\r\n            {Math.round(globalProgress)}%\r\n          </p>\r\n          <p>\r\n            Level Selesai: <strong>{userData.completedLevels}</strong> dari 9\r\n          </p>\r\n        </div>\r\n          {/* Progress Bar with Milestone Markers */}\r\n        <div className=\"progress-bar\" style={{ \r\n          position: \"relative\", \r\n          marginBottom: \"20px\",\r\n          width: \"90%\",\r\n          margin: \"0 auto 30px auto\",\r\n          height: \"15px\" // Increased height of the progress bar\r\n        }}>          {/* Bronze marker at 30% */}\r\n          <div style={{ position: \"absolute\", left: \"30%\", top: -2, bottom: -2, width: \"3px\", backgroundColor: \"#ff5722\" }}></div>\r\n          {/* Silver marker at 60% */}\r\n          <div style={{ position: \"absolute\", left: \"60%\", top: -2, bottom: -2, width: \"3px\", backgroundColor: \"#ff5722\" }}></div>\r\n          {/* Gold marker at 100% */}\r\n          <div style={{ position: \"absolute\", right: \"0\", top: -2, bottom: -2, width: \"3px\", backgroundColor: \"#ff5722\" }}></div>\r\n          \r\n          <motion.div\r\n            className=\"progress\"\r\n            style={{ width: `${globalProgress}%` }}\r\n            initial={{ width: 0 }}\r\n            animate={{ width: `${globalProgress}%` }}\r\n            transition={{ duration: 0.8 }}\r\n          />\r\n        </div>\r\n          {/* Badges row below progress bar */}\r\n        <div style={{ \r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          marginBottom: \"30px\",\r\n          position: \"relative\",\r\n          padding: \"0\",\r\n          height: \"70px\", // Increased height\r\n          width: \"90%\",  /* Match progress bar width */\r\n          margin: \"0 auto\",  /* Center like progress bar */\r\n          overflow: \"visible\" /* Allow badges to be visible if they overflow */\r\n        }}>\r\n          <div style={{ \r\n            display: \"flex\", \r\n            alignItems: \"center\",\r\n            position: \"absolute\",\r\n            left: \"30%\", \r\n            transform: \"translateX(-50%)\"\r\n          }}>            <img src={bronzeBadge} alt=\"Bronze Badge\" style={{\r\n              width: \"60px\", \r\n              height: \"60px\",\r\n              marginRight: \"10px\",\r\n              opacity: globalProgress >= 30 ? \"1\" : \"0.4\",\r\n              filter: globalProgress >= 30 ? \"none\" : \"grayscale(80%)\",\r\n              transition: \"all 0.3s ease\"\r\n            }} />\r\n            <div>\r\n              <p style={{\r\n                margin: 0,\r\n                fontWeight: \"bold\",\r\n                fontSize: \"0.9rem\",\r\n                textAlign: \"left\",\r\n                opacity: globalProgress >= 30 ? \"1\" : \"0.6\"\r\n              }}>Bronze</p>\r\n              <p style={{\r\n                margin: \"2px 0 0 0\",\r\n                fontSize: \"0.8rem\",\r\n                textAlign: \"left\",\r\n                color: globalProgress >= 30 ? \"#ff5722\" : \"#999999\"\r\n              }}>30%</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div style={{ \r\n            display: \"flex\", \r\n            alignItems: \"center\",\r\n            position: \"absolute\",\r\n            left: \"60%\", \r\n            transform: \"translateX(-50%)\"\r\n          }}>            <img src={silverBadge} alt=\"Silver Badge\" style={{\r\n              width: \"60px\", \r\n              height: \"60px\",\r\n              marginRight: \"10px\",\r\n              opacity: globalProgress >= 60 ? \"1\" : \"0.4\",\r\n              filter: globalProgress >= 60 ? \"none\" : \"grayscale(80%)\",\r\n              transition: \"all 0.3s ease\"\r\n            }}/>\r\n            <div>\r\n              <p style={{\r\n                margin: 0,\r\n                fontWeight: \"bold\",\r\n                fontSize: \"0.9rem\",\r\n                textAlign: \"left\",\r\n                opacity: globalProgress >= 60 ? \"1\" : \"0.6\"\r\n              }}>Silver</p>\r\n              <p style={{\r\n                margin: \"2px 0 0 0\",\r\n                fontSize: \"0.8rem\",\r\n                textAlign: \"left\",\r\n                color: globalProgress >= 60 ? \"#ff5722\" : \"#999999\"\r\n              }}>60%</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div style={{ \r\n            display: \"flex\", \r\n            alignItems: \"center\",\r\n            position: \"absolute\",\r\n            left: \"calc(100% - 2px)\", /* Adjust slightly to avoid overlapping right border */\r\n            transform: \"translateX(-50%)\"\r\n          }}>              <img src={goldBadge} alt=\"Gold Badge\" style={{\r\n              width: \"60px\", \r\n              height: \"60px\",\r\n              marginRight: \"10px\",\r\n              opacity: globalProgress >= 100 ? \"1\" : \"0.4\",\r\n              filter: globalProgress >= 100 ? \"none\" : \"grayscale(80%)\",\r\n              transition: \"all 0.3s ease\"\r\n            }}/>\r\n            <div style={{ whiteSpace: \"nowrap\" }}>\r\n              <p style={{\r\n                margin: 0,\r\n                fontWeight: \"bold\",\r\n                fontSize: \"0.9rem\",\r\n                textAlign: \"left\",\r\n                opacity: globalProgress >= 100 ? \"1\" : \"0.6\"\r\n              }}>Gold</p>\r\n              <p style={{\r\n                margin: \"2px 0 0 0\",\r\n                fontSize: \"0.8rem\",\r\n                textAlign: \"left\",\r\n                color: globalProgress >= 100 ? \"#ff5722\" : \"#999999\"\r\n              }}>100%</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"chapter-buttons\"style={{ position: \"relative\", zIndex: 1 }}>\r\n        {chapters.map((chapter, index) => (          <motion.button\r\n            key={index}\r\n            className=\"big-chapter-button\"\r\n            onClick={() => handleChapterClick(index)}\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.2 * index }}            style={{\r\n              backgroundColor: \"rgba(0, 0, 0, 0.6)\",\r\n              // border: \"2px solid #ff5722\",\r\n              color: \"white\",\r\n              textShadow: \"1px 1px 2px black\",\r\n              padding: \"25px 15px 15px\",\r\n              fontSize: \"1.5rem\",\r\n              fontWeight: \"bold\",\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              alignItems: \"center\"\r\n            }}>\r\n            {chapter.title}\r\n          </motion.button>\r\n        ))}\r\n      </div>      {selectedChapter !== null && selectedChapter !== 0 && (\r\n        <div className=\"popup-overlay\" style={{ \r\n          zIndex: 10, \r\n          backgroundColor: \"rgba(0, 0, 0, 0.7)\" \r\n        }}>\r\n          <motion.div\r\n            className=\"popup\"\r\n            initial={{ scale: 0.8, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            transition={{ duration: 0.3 }}\r\n            style={{ \r\n              backgroundColor: \"rgba(0, 0, 0, 0.8)\",\r\n              border: \"2px solid #ff5722\",\r\n              color: \"white\"\r\n            }}\r\n          >            <h2>{chapters[selectedChapter].title}</h2>\r\n\r\n            <div className=\"levels\">\r\n              {chapters[selectedChapter].levels.map((level, levelIndex) => (\r\n                <div key={levelIndex} className=\"level-container\">\r\n                  <button\r\n                    className={`level-button ${\r\n                      isLevelCompleted(selectedChapter, levelIndex)\r\n                        ? \"level-completed\"\r\n                        : \"\"\r\n                    }`}\r\n                    onClick={() =>\r\n                      handleLevelClick(selectedChapter, levelIndex)\r\n                    }                  >\r\n                    {level}\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <button className=\"close-popup-button\" onClick={handleClosePopup}>\r\n               Kembali ke Menu\r\n            </button>\r\n          </motion.div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport \"./style/Category4.css\";\r\nimport confetti from \"react-confetti\";\r\n\r\n// Define the levels data with icons, colors and content\r\nconst levels = [\r\n  {\r\n    id: 1,\r\n    title: \"Level 1\",\r\n    description: \"Pengenalan Dasar\",\r\n    icon: \"\",\r\n    color: \"#FF6B6B\",\r\n    gradient: \"linear-gradient(135deg, #FF6B6B, #FF8E8E)\",\r\n    subChapters: [\r\n      { id: 1, title: \"Cara Membaca dan Menulis Bilangan Cacah\", icon: \"\" },\r\n      {\r\n        id: 2,\r\n        title:\r\n          \"Cara Membandingkan dan Mengurutkan Bilangan Cacah Sampai 10.000\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 1,\r\n        title: \"Petualangan Bilangan Cacah\",\r\n        path: \"/game/kelas4/bab1/level1\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"Level 2\",\r\n    description: \"Operasi Dasar\",\r\n    icon: \"\",\r\n    color: \"#4ECDC4\",\r\n    gradient: \"linear-gradient(135deg, #4ECDC4, #7EE8FA)\",\r\n    subChapters: [\r\n      { id: 3, title: \"Komposisi Bilangan Cacah Sampai 10.000\", icon: \"\" },\r\n      { id: 4, title: \"Pengurangan Bilangan Cacah Sampai 1.000\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 2,\r\n        title: \"Tantangan Komposisi & Pengurangan\",\r\n        path: \"/game/kelas4/bab1/level2\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: 3,\r\n    title: \"Level 3\",\r\n    description: \"Geometri Dasar\",\r\n    icon: \"\",\r\n    color: \"#FFD166\",\r\n    gradient: \"linear-gradient(135deg, #FFD166, #FFF3B0)\",\r\n    subChapters: [\r\n      { id: 5, title: \"Perkalian Bilangan Cacah Sampai 1.000\", icon: \"\" },\r\n      { id: 6, title: \"Pembagian Bilangan Cacah Sampai 1.000\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 5,\r\n        title: \"Latihan Perkalian Dan Pembagian\",\r\n        path: \"/game/kelas4/bab1/level3\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: 4,\r\n    title: \"Level 4\",\r\n    description: \"Bangun Ruang\",\r\n    icon: \"\",\r\n    color: \"#6A0572\",\r\n    gradient: \"linear-gradient(135deg, #6A0572, #AB83A1)\",\r\n    subChapters: [\r\n      { id: 7, title: \"Faktor Kelipatan\", icon: \"\" },\r\n      { id: 8, title: \"Evaluasi\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 7,\r\n        title: \"Ayo Latihan!\",\r\n        path: \"/game/kelas4/bab1/level4\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n    locked: false,\r\n  },\r\n];\r\n\r\nexport default function Category4_Bab1() {\r\n  const navigate = useNavigate();\r\n  const [selectedLevel, setSelectedLevel] = useState(null);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [userProgress, setUserProgress] = useState({});\r\n  const [completedLevels, setCompletedLevels] = useState([]);\r\n  const [animateBackground, setAnimateBackground] = useState(false);\r\n  const [showHint, setShowHint] = useState(false);\r\n  const level1Ref = useRef(null);\r\n\r\n  // Generate stars for background effect\r\n  const stars = Array.from({ length: 50 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 3 + 1,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 100,\r\n    delay: Math.random() * 5,\r\n    duration: Math.random() * 3 + 2,\r\n  }));\r\n\r\n  // Generate clouds for background effect\r\n  const clouds = Array.from({ length: 6 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 150 + 100,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 20 + 10,\r\n    speed: Math.random() * 100 + 50,\r\n    delay: Math.random() * 20,\r\n  }));\r\n\r\n  useEffect(() => {\r\n    // Check if user is logged in\r\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n    if (!isLoggedIn) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Load user progress from localStorage\r\n    const avatar = JSON.parse(localStorage.getItem(\"selectedAvatar\"));\r\n    if (avatar) {\r\n      // Add category identifier (bab1) to make progress tracking category-specific\r\n      const progressKey = `avatar_${avatar.name}_bab1_levels_progress`;\r\n      const savedProgress = JSON.parse(localStorage.getItem(progressKey)) || {};\r\n      setUserProgress(savedProgress);\r\n\r\n      // Calculate completed levels\r\n      const completed = levels\r\n        .filter(\r\n          (level) =>\r\n            !level.locked && savedProgress[`level_${level.id}`]?.completed\r\n        )\r\n        .map((level) => level.id);\r\n\r\n      setCompletedLevels(completed);\r\n    }\r\n\r\n    // Show a hint after 3 seconds if no level is selected\r\n    const hintTimer = setTimeout(() => {\r\n      setShowHint(true);\r\n    }, 3000);\r\n\r\n    return () => clearTimeout(hintTimer);\r\n  }, [navigate]);\r\n\r\n  const triggerConfetti = () => {\r\n    confetti({\r\n      particleCount: 100,\r\n      spread: 70,\r\n      origin: { y: 0.6 },\r\n    });\r\n  };\r\n\r\n  const handleLevelClick = (level) => {\r\n    if (level.locked) {\r\n      // Show a message that this level is locked\r\n      alert(\"Level ini terkunci! Selesaikan level sebelumnya terlebih dahulu.\");\r\n      return;\r\n    }\r\n\r\n    // Trigger background animation when level is clicked\r\n    setAnimateBackground(true);\r\n\r\n    // Trigger confetti for completed levels\r\n    if (completedLevels.includes(level.id)) {\r\n      triggerConfetti();\r\n    }\r\n\r\n    setSelectedLevel(level);\r\n    setShowPopup(true);\r\n    setShowHint(false);\r\n  };\r\n\r\n  // Add a direct way to open Level 1\r\n  const openLevel1 = () => {\r\n    const level1 = levels.find((level) => level.id === 1);\r\n    if (level1) {\r\n      setSelectedLevel(level1);\r\n      setShowPopup(true);\r\n      setShowHint(false);\r\n      setAnimateBackground(true);\r\n      if (completedLevels.includes(1)) {\r\n        triggerConfetti();\r\n      }\r\n    }\r\n  };\r\n\r\n  const closePopup = () => {\r\n    setShowPopup(false);\r\n    setTimeout(() => {\r\n      setSelectedLevel(null);\r\n      setAnimateBackground(false);\r\n    }, 300);\r\n  };\r\n\r\n  const handleSubChapterClick = (subChapter) => {\r\n    // Navigate to the corresponding materiSubBab page based on the subChapter id\r\n    navigate(`/materi/materikelas4/materiBab1_${subChapter.id}`);\r\n  };\r\n\r\n  const handleGameClick = (game) => {\r\n    // Navigate to the game page\r\n    navigate(game.path);\r\n  };\r\n\r\n  const handleBackClick = () => {\r\n    // Add exit animation before navigating\r\n    setAnimateBackground(true);\r\n    setTimeout(() => {\r\n      navigate(\"/kelas4\");\r\n    }, 500);\r\n  };\r\n\r\n  // Check if a level is completed\r\n  const isLevelCompleted = (levelNum) => {\r\n    return completedLevels.includes(levelNum);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`category-container ${animateBackground ? \"animate-bg\" : \"\"}`}\r\n    >\r\n      {/* Background elements for visual appeal */}\r\n      <div className=\"background-elements\">\r\n        {stars.map((star) => (\r\n          <div\r\n            key={`star-${star.id}`}\r\n            className=\"star\"\r\n            style={{\r\n              width: star.size + \"px\",\r\n              height: star.size + \"px\",\r\n              left: star.left + \"%\",\r\n              top: star.top + \"%\",\r\n              animationDelay: star.delay + \"s\",\r\n              animationDuration: star.duration + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n\r\n        {clouds.map((cloud) => (\r\n          <div\r\n            key={`cloud-${cloud.id}`}\r\n            className=\"cloud\"\r\n            style={{\r\n              width: cloud.size + \"px\",\r\n              height: cloud.size / 2 + \"px\",\r\n              left: cloud.left + \"%\",\r\n              top: cloud.top + \"%\",\r\n              animationDuration: cloud.speed + \"s\",\r\n              animationDelay: cloud.delay + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      <header className=\"header animated-header\">\r\n        <motion.h1\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.6 }}\r\n        >\r\n          BAB 1 <span className=\"wave\"></span>\r\n        </motion.h1>\r\n        <motion.p\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: 0.3, duration: 0.6 }}\r\n          className=\"header-tagline\"\r\n        >\r\n          Pilih level untuk memulai petualangan belajarmu!\r\n        </motion.p>\r\n      </header>\r\n\r\n      <section className=\"categories-section\">\r\n        <motion.h2\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.7 }}\r\n        >\r\n          <span className=\"category-icon\"></span> Pilih Level\r\n        </motion.h2>\r\n\r\n        {/* Hint bubble */}\r\n        <motion.button\r\n          className=\"back-button\"\r\n          onClick={handleBackClick}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          initial={{ opacity: 0, x: -20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 0.4 }}\r\n        >\r\n          Kembali\r\n        </motion.button>\r\n        <AnimatePresence>\r\n          {showHint && (\r\n            <motion.div\r\n              className=\"hint-bubble\"\r\n              initial={{ opacity: 0, scale: 0.8, y: 20 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.8 }}\r\n            >\r\n              <div className=\"hint-arrow\"></div>\r\n              <p>Klik kartu level untuk mulai belajar!</p>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        <div className=\"level-path\">\r\n          {levels.map((level, index) => (\r\n            <React.Fragment key={`path-${level.id}`}>\r\n              {index > 0 && (\r\n                <div\r\n                  className={`path-connector ${\r\n                    completedLevels.includes(level.id - 1)\r\n                      ? \"completed-path\"\r\n                      : \"\"\r\n                  }`}\r\n                >\r\n                  {completedLevels.includes(level.id - 1) && (\r\n                    <div className=\"path-progress-animation\"></div>\r\n                  )}\r\n                </div>\r\n              )}\r\n              <div\r\n                className={`path-node ${\r\n                  isLevelCompleted(level.id) ? \"completed-node\" : \"\"\r\n                } ${level.locked ? \"locked-node\" : \"\"}`}\r\n              >\r\n                {level.id}\r\n              </div>\r\n            </React.Fragment>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"level-grid\">\r\n          {levels.map((level) => (\r\n            <motion.div\r\n              key={level.id}\r\n              className={`level-card ${level.locked ? \"level-locked\" : \"\"} ${\r\n                level.id === 1 ? \"level1-card\" : \"\"\r\n              }`}\r\n              onClick={() =>\r\n                level.id === 1 ? openLevel1() : handleLevelClick(level)\r\n              }\r\n              whileHover={!level.locked ? { scale: 1.05, y: -5 } : {}}\r\n              whileTap={!level.locked ? { scale: 0.95 } : {}}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.1 * level.id }}\r\n              style={{\r\n                boxShadow:\r\n                  level.id === 1\r\n                    ? `0 8px 25px rgba(255, 107, 107, 0.4)`\r\n                    : `0 8px 20px rgba(0, 0, 0, 0.15)`,\r\n              }}\r\n              ref={level.id === 1 ? level1Ref : null}\r\n            >\r\n              <div\r\n                className={`level-icon-circle ${\r\n                  isLevelCompleted(level.id) ? \"completed\" : \"\"\r\n                }`}\r\n                style={{ background: level.gradient }}\r\n              >\r\n                {level.locked && <div className=\"lock-overlay\"></div>}\r\n                {isLevelCompleted(level.id) && (\r\n                  <div className=\"completed-check\"></div>\r\n                )}\r\n                <span className=\"level-symbol\">{level.icon}</span>\r\n              </div>\r\n              <h3 className=\"level-title\">{level.title}</h3>\r\n              <p className=\"level-description\">{level.description}</p>\r\n              <div className=\"level-info\">\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.subChapters.length} Sub\r\n                  Bab\r\n                </span>\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.games.length} Game\r\n                </span>\r\n              </div>\r\n              <div className=\"level-badge\" style={{ background: level.color }}>\r\n                {level.id}\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n\r\n      {/* Level Popup Dialog */}\r\n      <AnimatePresence>\r\n        {showPopup && selectedLevel && (\r\n          <motion.div\r\n            className=\"popup-overlay\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={closePopup}\r\n          >\r\n            <motion.div\r\n              className=\"level-popup\"\r\n              initial={{ scale: 0.8, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.8, opacity: 0 }}\r\n              transition={{ type: \"spring\", damping: 25 }}\r\n              style={{\r\n                background: `linear-gradient(to bottom right, white, #f9f9f9)`,\r\n                borderTop: `5px solid ${selectedLevel.color}`,\r\n              }}\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <motion.button\r\n                className=\"close-popup\"\r\n                onClick={closePopup}\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                whileHover={{ scale: 1.1 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                transition={{\r\n                  duration: 0.3,\r\n                  type: \"spring\",\r\n                  stiffness: 300,\r\n                }}\r\n              >\r\n                \r\n              </motion.button>\r\n\r\n              <div\r\n                className=\"popup-header\"\r\n                style={{ background: selectedLevel.gradient }}\r\n              >\r\n                <div className=\"popup-level-icon\">{selectedLevel.icon}</div>\r\n                <h2>\r\n                  Level {selectedLevel.id}: {selectedLevel.title}\r\n                </h2>\r\n              </div>\r\n\r\n              <div className=\"popup-sections\">\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Sub-Bab Materi\r\n                  </h3>\r\n                  <div className=\"sub-chapter-list\">\r\n                    {selectedLevel.subChapters.map((subChapter) => (\r\n                      <motion.div\r\n                        key={subChapter.id}\r\n                        className=\"sub-chapter-item\"\r\n                        onClick={() => handleSubChapterClick(subChapter)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"sub-chapter-icon\">\r\n                          {subChapter.icon}\r\n                        </div>\r\n                        <div className=\"sub-chapter-content\">\r\n                          <div className=\"sub-chapter-number\">\r\n                            {subChapter.id}\r\n                          </div>\r\n                          <h4>{subChapter.title}</h4>\r\n                        </div>\r\n                        <div className=\"sub-chapter-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Game Latihan\r\n                  </h3>\r\n                  <div className=\"game-list\">\r\n                    {selectedLevel.games.map((game) => (\r\n                      <motion.div\r\n                        key={game.id}\r\n                        className=\"game-item\"\r\n                        onClick={() => handleGameClick(game)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"game-icon\">{game.icon}</div>\r\n                        <div className=\"game-content\">\r\n                          <h4>{game.title}</h4>\r\n                          <span className=\"game-label\">Main Sekarang</span>\r\n                        </div>\r\n                        <div className=\"game-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"popup-footer\">\r\n                {isLevelCompleted(selectedLevel.id) ? (\r\n                  <div className=\"level-status completed-status\">\r\n                    <span className=\"status-icon\"></span> Level Selesai\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"level-status\">\r\n                    <span className=\"status-icon\"></span> Belum Selesai\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport \"./style/Category4.css\";\r\nimport confetti from \"react-confetti\";\r\n\r\n// Define the levels data with icons, colors and content\r\nconst levels = [\r\n  {\r\n    id: 1,\r\n    title: \"Level 1\",\r\n    description: \"Pengenalan Operasi Hitung\",\r\n    icon: \"\",\r\n    color: \"#4E6BFF\",\r\n    gradient: \"linear-gradient(135deg, #4E6BFF, #8393FF)\",\r\n    subChapters: [\r\n      { id: 1, title: \"Pembilang Satu\", icon: \"\" },\r\n      { id: 2, title: \"Menyebut Pecahan Yang Penyebutnya Sama\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 1,\r\n        title: \"Permainan Mencari Pecahan Dan Pembilang\",\r\n        path: \"/game/kelas4/bab2/level1\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"Level 2\",\r\n    description: \"Pengukuran & Pola\",\r\n    icon: \"\",\r\n    color: \"#FF5733\",\r\n    gradient: \"linear-gradient(135deg, #FF5733, #FF9A7A)\",\r\n    subChapters: [\r\n      { id: 3, title: \"Mengurutkan dan Membandingkan Pecahan\", icon: \"\" },\r\n      { id: 4, title: \"Pecahan Senilai\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 3,\r\n        title: \"Tantangan Mengurutkan Dan Pecahan Senilai\",\r\n        path: \"/game/kelas4/bab2/level2\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: 3,\r\n    title: \"Level 3\",\r\n    description: \"Operasi Kompleks\",\r\n    icon: \"\",\r\n    color: \"#9C27B0\",\r\n    gradient: \"linear-gradient(135deg, #9C27B0, #D066E2)\",\r\n    subChapters: [\r\n      { id: 5, title: \"Pecahan Desimal\", icon: \"\" },\r\n      { id: 6, title: \"Pecahan Desimal: Persepuluhan\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 5,\r\n        title: \"Menghitung Pecahan Desimal Sampai Perespuluhan\",\r\n        path: \"/game/kelas4/bab2/level3\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: 4,\r\n    title: \"Level 4\",\r\n    description: \"Evaluasi & Penerapan\",\r\n    icon: \"\",\r\n    color: \"#009688\",\r\n    gradient: \"linear-gradient(135deg, #009688, #4DB6AC)\",\r\n    subChapters: [\r\n      { id: 7, title: \"Pecahan Desimal: Perseratusan dan Persen\", icon: \"\" },\r\n      { id: 8, title: \"Rangkuman Singkat\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 7,\r\n        title: \"Game Latihan Pecahan Desimal\",\r\n        path: \"/game/kelas4/bab2/level4\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n    locked: false,\r\n  },\r\n];\r\n\r\nexport default function Category4_Bab2() {\r\n  const navigate = useNavigate();\r\n  const [selectedLevel, setSelectedLevel] = useState(null);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [userProgress, setUserProgress] = useState({});\r\n  const [completedLevels, setCompletedLevels] = useState([]);\r\n  const [animateBackground, setAnimateBackground] = useState(false);\r\n  const [showHint, setShowHint] = useState(false);\r\n\r\n  // Create refs for level 1 elements\r\n  const level1Ref = useRef(null);\r\n\r\n  // Generate stars for background effect\r\n  const stars = Array.from({ length: 50 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 3 + 1,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 100,\r\n    delay: Math.random() * 5,\r\n    duration: Math.random() * 3 + 2,\r\n  }));\r\n\r\n  // Generate clouds for background effect\r\n  const clouds = Array.from({ length: 6 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 150 + 100,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 20 + 10,\r\n    speed: Math.random() * 100 + 50,\r\n    delay: Math.random() * 20,\r\n  }));\r\n\r\n  useEffect(() => {\r\n    // Check if user is logged in\r\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n    if (!isLoggedIn) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Load user progress from localStorage\r\n    const avatar = JSON.parse(localStorage.getItem(\"selectedAvatar\"));\r\n    if (avatar) {\r\n      // Add category identifier (bab2) to make progress tracking category-specific\r\n      const progressKey = `avatar_${avatar.name}_bab2_levels_progress`;\r\n      const savedProgress = JSON.parse(localStorage.getItem(progressKey)) || {};\r\n      setUserProgress(savedProgress);\r\n\r\n      // Calculate completed levels\r\n      const completed = levels\r\n        .filter(\r\n          (level) =>\r\n            !level.locked && savedProgress[`level_${level.id}`]?.completed\r\n        )\r\n        .map((level) => level.id);\r\n\r\n      setCompletedLevels(completed);\r\n    }\r\n\r\n    // Show a hint after 3 seconds if no level is selected\r\n    const hintTimer = setTimeout(() => {\r\n      setShowHint(true);\r\n    }, 3000);\r\n\r\n    return () => clearTimeout(hintTimer);\r\n  }, [navigate]);\r\n\r\n  const triggerConfetti = () => {\r\n    confetti({\r\n      particleCount: 100,\r\n      spread: 70,\r\n      origin: { y: 0.6 },\r\n    });\r\n  };\r\n\r\n  const handleLevelClick = (level) => {\r\n    if (level.locked) {\r\n      // Show a message that this level is locked\r\n      alert(\"Level ini terkunci! Selesaikan level sebelumnya terlebih dahulu.\");\r\n      return;\r\n    }\r\n\r\n    // Trigger background animation when level is clicked\r\n    setAnimateBackground(true);\r\n\r\n    // Trigger confetti for completed levels\r\n    if (completedLevels.includes(level.id)) {\r\n      triggerConfetti();\r\n    }\r\n\r\n    setSelectedLevel(level);\r\n    setShowPopup(true);\r\n    setShowHint(false);\r\n  };\r\n\r\n  // Add a direct way to open Level 1\r\n  const openLevel1 = () => {\r\n    const level1 = levels.find((level) => level.id === 1);\r\n    if (level1) {\r\n      setSelectedLevel(level1);\r\n      setShowPopup(true);\r\n      setShowHint(false);\r\n      setAnimateBackground(true);\r\n      if (completedLevels.includes(1)) {\r\n        triggerConfetti();\r\n      }\r\n    }\r\n  };\r\n\r\n  const closePopup = () => {\r\n    setShowPopup(false);\r\n    setTimeout(() => {\r\n      setSelectedLevel(null);\r\n      setAnimateBackground(false);\r\n    }, 300);\r\n  };\r\n\r\n  const handleSubChapterClick = (subChapter) => {\r\n    // Navigate to the corresponding materi page based on the subChapter id and title\r\n    if (subChapter.title === \"Pembilang Satu\") {\r\n      navigate(`/materi/materikelas4/materiBab2_1`);\r\n    } else if (subChapter.title === \"Menyebut Pecahan Yang Penyebutnya Sama\") {\r\n      navigate(`/materi/materikelas4/materiBab2_2`);\r\n    } else if (subChapter.title === \"Mengurutkan dan Membandingkan Pecahan\") {\r\n      navigate(`/materi/materikelas4/materiBab2_3`);\r\n    } else if (subChapter.title === \"Pecahan Senilai\") {\r\n      navigate(`/materi/materikelas4/materiBab2_4`);\r\n    } else if (subChapter.title === \"Pecahan Desimal\") {\r\n      navigate(`/materi/materikelas4/materiBab2_5`);\r\n    } else if (subChapter.title === \"Pecahan Desimal: Persepuluhan\") {\r\n      navigate(`/materi/materikelas4/materiBab2_6`);\r\n    } else if (\r\n      subChapter.title === \"Pecahan Desimal: Perseratusan dan Persen\"\r\n    ) {\r\n      navigate(`/materi/materikelas4/materiBab2_7`);\r\n    } else {\r\n      // For other sub chapters, use the original path format\r\n      navigate(`/materi/materikelas4/materiBab1_${subChapter.id}`);\r\n    }\r\n  };\r\n\r\n  const handleGameClick = (game) => {\r\n    // Navigate to the game page\r\n    navigate(game.path);\r\n  };\r\n\r\n  const handleBackClick = () => {\r\n    // Add exit animation before navigating\r\n    setAnimateBackground(true);\r\n    setTimeout(() => {\r\n      navigate(\"/kelas4\");\r\n    }, 500);\r\n  };\r\n\r\n  // Check if a level is completed\r\n  const isLevelCompleted = (levelNum) => {\r\n    return completedLevels.includes(levelNum);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`category-container ${animateBackground ? \"animate-bg\" : \"\"}`}\r\n    >\r\n      {/* Background elements for visual appeal */}\r\n      <div className=\"background-elements\">\r\n        {stars.map((star) => (\r\n          <div\r\n            key={`star-${star.id}`}\r\n            className=\"star\"\r\n            style={{\r\n              width: star.size + \"px\",\r\n              height: star.size + \"px\",\r\n              left: star.left + \"%\",\r\n              top: star.top + \"%\",\r\n              animationDelay: star.delay + \"s\",\r\n              animationDuration: star.duration + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n\r\n        {clouds.map((cloud) => (\r\n          <div\r\n            key={`cloud-${cloud.id}`}\r\n            className=\"cloud\"\r\n            style={{\r\n              width: cloud.size + \"px\",\r\n              height: cloud.size / 2 + \"px\",\r\n              left: cloud.left + \"%\",\r\n              top: cloud.top + \"%\",\r\n              animationDuration: cloud.speed + \"s\",\r\n              animationDelay: cloud.delay + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      <header className=\"header animated-header\">\r\n        <motion.h1\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.6 }}\r\n        >\r\n          BAB 2 <span className=\"wave\"></span>\r\n        </motion.h1>\r\n        <motion.p\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: 0.3, duration: 0.6 }}\r\n          className=\"header-tagline\"\r\n        >\r\n          Pilih level untuk memulai perjalanan belajar matematika!\r\n        </motion.p>\r\n      </header>\r\n\r\n      <section className=\"categories-section\">\r\n        <motion.h2\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.7 }}\r\n        >\r\n          <span className=\"category-icon\"></span> Bab 2: Operasi Hitung\r\n        </motion.h2>\r\n\r\n        {/* Hint bubble */}\r\n        <motion.button\r\n          className=\"back-button\"\r\n          onClick={handleBackClick}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          initial={{ opacity: 0, x: -20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 0.4 }}\r\n        >\r\n          Kembali\r\n        </motion.button>\r\n        <AnimatePresence>\r\n          {showHint && (\r\n            <motion.div\r\n              className=\"hint-bubble\"\r\n              initial={{ opacity: 0, scale: 0.8, y: 20 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.8 }}\r\n            >\r\n              <div className=\"hint-arrow\"></div>\r\n              <p>Klik kartu level untuk mulai belajar!</p>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        <div className=\"level-path\">\r\n          {levels.map((level, index) => (\r\n            <React.Fragment key={`path-${level.id}`}>\r\n              {index > 0 && (\r\n                <div\r\n                  className={`path-connector ${\r\n                    completedLevels.includes(level.id - 1)\r\n                      ? \"completed-path\"\r\n                      : \"\"\r\n                  }`}\r\n                >\r\n                  {completedLevels.includes(level.id - 1) && (\r\n                    <div className=\"path-progress-animation\"></div>\r\n                  )}\r\n                </div>\r\n              )}\r\n              <div\r\n                className={`path-node ${\r\n                  isLevelCompleted(level.id) ? \"completed-node\" : \"\"\r\n                } ${level.locked ? \"locked-node\" : \"\"}`}\r\n                onClick={() => handleLevelClick(level)}\r\n              >\r\n                {level.id}\r\n              </div>\r\n            </React.Fragment>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"level-grid\">\r\n          {levels.map((level) => (\r\n            <motion.div\r\n              key={level.id}\r\n              className={`level-card ${level.locked ? \"level-locked\" : \"\"} ${\r\n                level.id === 1 ? \"level1-card\" : \"\"\r\n              }`}\r\n              onClick={() =>\r\n                level.id === 1 ? openLevel1() : handleLevelClick(level)\r\n              }\r\n              whileHover={!level.locked ? { scale: 1.05, y: -5 } : {}}\r\n              whileTap={!level.locked ? { scale: 0.95 } : {}}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.1 * level.id }}\r\n              style={{\r\n                boxShadow:\r\n                  level.id === 1\r\n                    ? `0 8px 25px rgba(78, 107, 255, 0.4)`\r\n                    : `0 8px 20px rgba(0, 0, 0, 0.15)`,\r\n              }}\r\n              ref={level.id === 1 ? level1Ref : null}\r\n            >\r\n              <div\r\n                className={`level-icon-circle ${\r\n                  isLevelCompleted(level.id) ? \"completed\" : \"\"\r\n                } ${level.id === 1 ? \"level1-icon\" : \"\"}`}\r\n                style={{ background: level.gradient }}\r\n              >\r\n                {level.locked && <div className=\"lock-overlay\"></div>}\r\n                {isLevelCompleted(level.id) && (\r\n                  <div className=\"completed-check\"></div>\r\n                )}\r\n                <span className=\"level-symbol\">{level.icon}</span>\r\n              </div>\r\n              <h3 className=\"level-title\">{level.title}</h3>\r\n              <p className=\"level-description\">{level.description}</p>\r\n              <div className=\"level-info\">\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.subChapters.length} Sub\r\n                  Bab\r\n                </span>\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.games.length} Game\r\n                </span>\r\n              </div>\r\n\r\n              <div className=\"level-badge\" style={{ background: level.color }}>\r\n                {level.id}\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n\r\n      {/* Level Popup Dialog */}\r\n      <AnimatePresence>\r\n        {showPopup && selectedLevel && (\r\n          <motion.div\r\n            className=\"popup-overlay\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={closePopup}\r\n          >\r\n            <motion.div\r\n              className=\"level-popup\"\r\n              initial={{ scale: 0.8, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.8, opacity: 0 }}\r\n              transition={{ type: \"spring\", damping: 25 }}\r\n              style={{\r\n                background: `linear-gradient(to bottom right, white, #f9f9f9)`,\r\n                borderTop: `5px solid ${selectedLevel.color}`,\r\n              }}\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <motion.button\r\n                className=\"close-popup\"\r\n                onClick={closePopup}\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                whileHover={{ scale: 1.1 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                transition={{\r\n                  duration: 0.3,\r\n                  type: \"spring\",\r\n                  stiffness: 300,\r\n                }}\r\n              >\r\n                \r\n              </motion.button>\r\n\r\n              <div\r\n                className=\"popup-header\"\r\n                style={{ background: selectedLevel.gradient }}\r\n              >\r\n                <div className=\"popup-level-icon\">{selectedLevel.icon}</div>\r\n                <h2>\r\n                  Level {selectedLevel.id}: {selectedLevel.title}\r\n                </h2>\r\n              </div>\r\n\r\n              <div className=\"popup-sections\">\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Sub-Bab Materi\r\n                  </h3>\r\n                  <div className=\"sub-chapter-list\">\r\n                    {selectedLevel.subChapters.map((subChapter) => (\r\n                      <motion.div\r\n                        key={subChapter.id}\r\n                        className=\"sub-chapter-item\"\r\n                        onClick={() => handleSubChapterClick(subChapter)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"sub-chapter-icon\">\r\n                          {subChapter.icon}\r\n                        </div>\r\n                        <div className=\"sub-chapter-content\">\r\n                          <div className=\"sub-chapter-number\">\r\n                            {subChapter.id}\r\n                          </div>\r\n                          <h4>{subChapter.title}</h4>\r\n                        </div>\r\n                        <div className=\"sub-chapter-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Game Latihan\r\n                  </h3>\r\n                  <div className=\"game-list\">\r\n                    {selectedLevel.games.map((game) => (\r\n                      <motion.div\r\n                        key={game.id}\r\n                        className=\"game-item\"\r\n                        onClick={() => handleGameClick(game)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"game-icon\">{game.icon}</div>\r\n                        <div className=\"game-content\">\r\n                          <h4>{game.title}</h4>\r\n                          <span className=\"game-label\">Main Sekarang</span>\r\n                        </div>\r\n                        <div className=\"game-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"popup-footer\">\r\n                {isLevelCompleted(selectedLevel.id) ? (\r\n                  <div className=\"level-status completed-status\">\r\n                    <span className=\"status-icon\"></span> Level Selesai\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"level-status\">\r\n                    <span className=\"status-icon\"></span> Belum Selesai\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport \"./style/Category4.css\";\r\nimport confetti from \"react-confetti\";\r\n\r\n// Define the levels data with icons, colors and content\r\nconst levels = [\r\n  {\r\n    id: 1,\r\n    title: \"Level 1\",\r\n    description: \"Pengenalan Pola Gambar\",\r\n    icon: \"\",\r\n    color: \"#3F51B5\",\r\n    gradient: \"linear-gradient(135deg, #3F51B5, #7986CB)\",\r\n    subChapters: [\r\n      { id: 1, title: \"Pola Gambar\", icon: \"\" },\r\n      { id: 2, title: \"Pola Gambar Membesar\", icon: \"\" },\r\n      { id: 3, title: \"Pola Gambar Mengecil\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 1,\r\n        title: \"Yuk Coba Gamenya!\",\r\n        path: \"/game/kelas4/bab3/level1\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"Level 2\",\r\n    description: \"Pengenalan Pola Bilangan\",\r\n    icon: \"\",\r\n    color: \"#4CAF50\",\r\n    gradient: \"linear-gradient(135deg, #4CAF50, #81C784)\",\r\n    subChapters: [\r\n      { id: 4, title: \"Pola Bilangan\", icon: \"\" },\r\n      { id: 5, title: \"Pola Bilangan Membesar\", icon: \"\" },\r\n      { id: 6, title: \"Pola Bilangan Mengecil\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 2,\r\n        title: \"Yuk Coba Gamenya!\",\r\n        path: \"/game/kelas4/bab3/level2\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nexport default function Category4_Bab3() {\r\n  const navigate = useNavigate();\r\n  const [selectedLevel, setSelectedLevel] = useState(null);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [userProgress, setUserProgress] = useState({});\r\n  const [completedLevels, setCompletedLevels] = useState([]);\r\n  const [animateBackground, setAnimateBackground] = useState(false);\r\n  const [showHint, setShowHint] = useState(false);\r\n\r\n  // Generate stars for background effect\r\n  const stars = Array.from({ length: 50 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 3 + 1,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 100,\r\n    delay: Math.random() * 5,\r\n    duration: Math.random() * 3 + 2,\r\n  }));\r\n\r\n  // Generate clouds for background effect\r\n  const clouds = Array.from({ length: 6 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 150 + 100,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 20 + 10,\r\n    speed: Math.random() * 100 + 50,\r\n    delay: Math.random() * 20,\r\n  }));\r\n\r\n  // Set all path connectors to incomplete\r\n  const pathConnectorsCompleted = {}; // Empty object means no paths are completed\r\n\r\n  useEffect(() => {\r\n    // Check if user is logged in\r\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n    if (!isLoggedIn) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Load user progress from localStorage\r\n    const avatar = JSON.parse(localStorage.getItem(\"selectedAvatar\"));\r\n    if (avatar) {\r\n      const progressKey = `avatar_${avatar.name}_levels_progress`;\r\n      const savedProgress = JSON.parse(localStorage.getItem(progressKey)) || {};\r\n      setUserProgress(savedProgress);\r\n\r\n      // Calculate completed levels\r\n      const completed = levels\r\n        .filter(\r\n          (level) =>\r\n            !level.locked && savedProgress[`level_${level.id}`]?.completed\r\n        )\r\n        .map((level) => level.id);\r\n\r\n      setCompletedLevels(completed);\r\n    }\r\n\r\n    // Show a hint after 3 seconds if no level is selected\r\n    const hintTimer = setTimeout(() => {\r\n      setShowHint(true);\r\n    }, 3000);\r\n\r\n    return () => clearTimeout(hintTimer);\r\n  }, [navigate]);\r\n\r\n  const triggerConfetti = () => {\r\n    confetti({\r\n      particleCount: 100,\r\n      spread: 70,\r\n      origin: { y: 0.6 },\r\n    });\r\n  };\r\n\r\n  const handleLevelClick = (level) => {\r\n    if (level.locked) {\r\n      // Show a message that this level is locked\r\n      alert(\"Level ini terkunci! Selesaikan level sebelumnya terlebih dahulu.\");\r\n      return;\r\n    }\r\n\r\n    // Trigger background animation when level is clicked\r\n    setAnimateBackground(true);\r\n\r\n    setSelectedLevel(level);\r\n    setShowPopup(true);\r\n    setShowHint(false);\r\n  };\r\n\r\n  const closePopup = () => {\r\n    setShowPopup(false);\r\n    setTimeout(() => {\r\n      setSelectedLevel(null);\r\n      setAnimateBackground(false);\r\n    }, 300);\r\n  };\r\n\r\n  const handleSubChapterClick = (subChapter) => {\r\n    // Navigate to the corresponding materi page based on the subChapter id and title\r\n    if (subChapter.title === \"Pola Gambar\") {\r\n      navigate(`/materi/materikelas4/materiBab3_1`);\r\n    } else if (subChapter.title === \"Pola Gambar Membesar\") {\r\n      navigate(`/materi/materikelas4/materiBab3_2`);\r\n    } else if (subChapter.title === \"Pola Gambar Mengecil\") {\r\n      navigate(`/materi/materikelas4/materiBab3_3`);\r\n    } else if (subChapter.title === \"Pola Bilangan\") {\r\n      navigate(`/materi/materikelas4/materiBab3_4`);\r\n    } else if (subChapter.title === \"Pola Bilangan Membesar\") {\r\n      navigate(`/materi/materikelas4/materiBab3_5`);\r\n    } else if (subChapter.title === \"Pola Bilangan Mengecil\") {\r\n      navigate(`/materi/materikelas4/materiBab3_6`);\r\n    } else {\r\n      // For other sub chapters, use the original path format\r\n      navigate(`/materi/materikelas4/materiBab3_${subChapter.id}`);\r\n    }\r\n  };\r\n\r\n  const handleGameClick = (game) => {\r\n    // Navigate to the game page\r\n    navigate(game.path);\r\n  };\r\n\r\n  const handleBackClick = () => {\r\n    // Add exit animation before navigating\r\n    setAnimateBackground(true);\r\n    setTimeout(() => {\r\n      navigate(\"/kelas4\");\r\n    }, 500);\r\n  };\r\n\r\n  // Check if a level is completed\r\n  const isLevelCompleted = (levelNum) => {\r\n    // Always return false to treat all levels as incomplete\r\n    return false;\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`category-container ${animateBackground ? \"animate-bg\" : \"\"}`}\r\n    >\r\n      {/* Background elements for visual appeal */}\r\n      <div className=\"background-elements\">\r\n        {stars.map((star) => (\r\n          <div\r\n            key={`star-${star.id}`}\r\n            className=\"star\"\r\n            style={{\r\n              width: star.size + \"px\",\r\n              height: star.size + \"px\",\r\n              left: star.left + \"%\",\r\n              top: star.top + \"%\",\r\n              animationDelay: star.delay + \"s\",\r\n              animationDuration: star.duration + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n\r\n        {clouds.map((cloud) => (\r\n          <div\r\n            key={`cloud-${cloud.id}`}\r\n            className=\"cloud\"\r\n            style={{\r\n              width: cloud.size + \"px\",\r\n              height: cloud.size / 2 + \"px\",\r\n              left: cloud.left + \"%\",\r\n              top: cloud.top + \"%\",\r\n              animationDuration: cloud.speed + \"s\",\r\n              animationDelay: cloud.delay + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      <header className=\"header animated-header\">\r\n        <motion.h1\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.6 }}\r\n        >\r\n          BAB 3 <span className=\"wave\"></span>\r\n        </motion.h1>\r\n        <motion.p\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: 0.3, duration: 0.6 }}\r\n          className=\"header-tagline\"\r\n        >\r\n          Eksplorasi dunia tiga dimensi dengan seru!\r\n        </motion.p>\r\n      </header>\r\n\r\n      <section className=\"categories-section\">\r\n        <motion.h2\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.7 }}\r\n        >\r\n          <span className=\"category-icon\"></span> Bab 3: Pengenalan Pola\r\n          Bilangan Dan Gambar\r\n        </motion.h2>\r\n\r\n        {/* Hint bubble */}\r\n        <motion.button\r\n          className=\"back-button\"\r\n          onClick={handleBackClick}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          initial={{ opacity: 0, x: -20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 0.4 }}\r\n        >\r\n          Kembali\r\n        </motion.button>\r\n        <AnimatePresence>\r\n          {showHint && (\r\n            <motion.div\r\n              className=\"hint-bubble\"\r\n              initial={{ opacity: 0, scale: 0.8, y: 20 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.8 }}\r\n            >\r\n              <div className=\"hint-arrow\"></div>\r\n              <p>Klik kartu level untuk mulai belajar!</p>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        <div className=\"level-path\">\r\n          {levels.map((level, index) => (\r\n            <React.Fragment key={`path-${level.id}`}>\r\n              {index > 0 && (\r\n                <div className=\"path-connector\">\r\n                  {/* Removed the completed-path class and path-progress-animation div */}\r\n                </div>\r\n              )}\r\n              <div\r\n                className={`path-node ${level.locked ? \"locked-node\" : \"\"}`}\r\n                // Removed the completed-node class\r\n              >\r\n                {level.id}\r\n              </div>\r\n            </React.Fragment>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"level-grid\">\r\n          {levels.map((level) => (\r\n            <motion.div\r\n              key={level.id}\r\n              className={`level-card ${level.locked ? \"level-locked\" : \"\"}`}\r\n              onClick={() => handleLevelClick(level)}\r\n              whileHover={!level.locked ? { scale: 1.05, y: -5 } : {}}\r\n              whileTap={!level.locked ? { scale: 0.95 } : {}}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.1 * level.id }}\r\n              style={{\r\n                boxShadow: `0 8px 20px rgba(0, 0, 0, 0.15)`,\r\n              }}\r\n            >\r\n              <div\r\n                className={`level-icon-circle ${\r\n                  isLevelCompleted(level.id) ? \"completed\" : \"\"\r\n                }`}\r\n                style={{ background: level.gradient }}\r\n              >\r\n                {level.locked && <div className=\"lock-overlay\"></div>}\r\n                {isLevelCompleted(level.id) && (\r\n                  <div className=\"completed-check\"></div>\r\n                )}\r\n                <span className=\"level-symbol\">{level.icon}</span>\r\n              </div>\r\n              <h3 className=\"level-title\">{level.title}</h3>\r\n              <p className=\"level-description\">{level.description}</p>\r\n              <div className=\"level-info\">\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.subChapters.length} Sub\r\n                  Bab\r\n                </span>\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.games.length} Game\r\n                </span>\r\n              </div>\r\n              <div className=\"level-badge\" style={{ background: level.color }}>\r\n                {level.id}\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n\r\n      {/* Level Popup Dialog */}\r\n      <AnimatePresence>\r\n        {showPopup && selectedLevel && (\r\n          <motion.div\r\n            className=\"popup-overlay\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={closePopup}\r\n          >\r\n            <motion.div\r\n              className=\"level-popup\"\r\n              initial={{ scale: 0.8, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.8, opacity: 0 }}\r\n              transition={{ type: \"spring\", damping: 25 }}\r\n              style={{\r\n                background: `linear-gradient(to bottom right, white, #f9f9f9)`,\r\n                borderTop: `5px solid ${selectedLevel.color}`,\r\n              }}\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <motion.button\r\n                className=\"close-popup\"\r\n                onClick={closePopup}\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                whileHover={{ scale: 1.1 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                transition={{\r\n                  duration: 0.3,\r\n                  type: \"spring\",\r\n                  stiffness: 300,\r\n                }}\r\n              >\r\n                \r\n              </motion.button>\r\n\r\n              <div\r\n                className=\"popup-header\"\r\n                style={{ background: selectedLevel.gradient }}\r\n              >\r\n                <div className=\"popup-level-icon\">{selectedLevel.icon}</div>\r\n                <h2>\r\n                  Level {selectedLevel.id}: {selectedLevel.title}\r\n                </h2>\r\n              </div>\r\n\r\n              <div className=\"popup-sections\">\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Sub-Bab Materi\r\n                  </h3>\r\n                  <div className=\"sub-chapter-list\">\r\n                    {selectedLevel.subChapters.map((subChapter) => (\r\n                      <motion.div\r\n                        key={subChapter.id}\r\n                        className=\"sub-chapter-item\"\r\n                        onClick={() => handleSubChapterClick(subChapter)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"sub-chapter-icon\">\r\n                          {subChapter.icon}\r\n                        </div>\r\n                        <div className=\"sub-chapter-content\">\r\n                          <div className=\"sub-chapter-number\">\r\n                            {subChapter.id}\r\n                          </div>\r\n                          <h4>{subChapter.title}</h4>\r\n                        </div>\r\n                        <div className=\"sub-chapter-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Game Latihan\r\n                  </h3>\r\n                  <div className=\"game-list\">\r\n                    {selectedLevel.games.map((game) => (\r\n                      <motion.div\r\n                        key={game.id}\r\n                        className=\"game-item\"\r\n                        onClick={() => handleGameClick(game)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"game-icon\">{game.icon}</div>\r\n                        <div className=\"game-content\">\r\n                          <h4>{game.title}</h4>\r\n                          <span className=\"game-label\">Main Sekarang</span>\r\n                        </div>\r\n                        <div className=\"game-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"popup-footer\">\r\n                {isLevelCompleted(selectedLevel.id) ? (\r\n                  <div className=\"level-status completed-status\">\r\n                    <span className=\"status-icon\"></span> Level Selesai\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"level-status\">\r\n                    <span className=\"status-icon\"></span> Belum Selesai\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport \"./style/Category4.css\";\r\nimport confetti from \"react-confetti\";\r\n\r\n// Define the levels data with icons, colors and content\r\nconst levels = [\r\n  {\r\n    id: 1,\r\n    title: \"Level 1\",\r\n    description: \"Pengukuran Luas\",\r\n    icon: \"\",\r\n    color: \"#4CAF50\",\r\n    gradient: \"linear-gradient(135deg, #4CAF50, #81C784)\",\r\n    subChapters: [\r\n      {\r\n        id: 1,\r\n        title: \"Pengukuran Luas Menggunakan Satuan Tidak Baku\",\r\n        icon: \"\",\r\n      },\r\n      { id: 2, title: \"Pengukuran Luas Menggunakan Satuan Baku\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 1,\r\n        title: \"Yuk Coba Gamenya!\",\r\n        path: \"/game/kelas4/bab4/level1\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"Level 2\",\r\n    description: \"Pengukuran Volume\",\r\n    icon: \"\",\r\n    color: \"#2196F3\",\r\n    gradient: \"linear-gradient(135deg, #2196F3, #64B5F6)\",\r\n    subChapters: [\r\n      {\r\n        id: 3,\r\n        title: \"Pengukuran Volume Menggunakan Satuan Tidak Baku\",\r\n        icon: \"\",\r\n      },\r\n      { id: 4, title: \"Pengukuran Volume Menggunakan Satuan Baku\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 2,\r\n        title: \"Yuk Coba Gamenya!\",\r\n        path: \"/game/kelas4/bab4/level2\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nexport default function Category4_Bab4() {\r\n  const navigate = useNavigate();\r\n  const [selectedLevel, setSelectedLevel] = useState(null);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [userProgress, setUserProgress] = useState({});\r\n  const [completedLevels, setCompletedLevels] = useState([]);\r\n  const [animateBackground, setAnimateBackground] = useState(false);\r\n  const [showHint, setShowHint] = useState(false);\r\n\r\n  // Generate stars for background effect\r\n  const stars = Array.from({ length: 50 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 3 + 1,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 100,\r\n    delay: Math.random() * 5,\r\n    duration: Math.random() * 3 + 2,\r\n  }));\r\n\r\n  // Generate clouds for background effect\r\n  const clouds = Array.from({ length: 6 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 150 + 100,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 20 + 10,\r\n    speed: Math.random() * 100 + 50,\r\n    delay: Math.random() * 20,\r\n  }));\r\n\r\n  // Set all path connectors to incomplete\r\n  const pathConnectorsCompleted = {}; // Empty object means no paths are completed\r\n\r\n  useEffect(() => {\r\n    // Check if user is logged in\r\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n    if (!isLoggedIn) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Load user progress from localStorage\r\n    const avatar = JSON.parse(localStorage.getItem(\"selectedAvatar\"));\r\n    if (avatar) {\r\n      const progressKey = `avatar_${avatar.name}_levels_progress`;\r\n      const savedProgress = JSON.parse(localStorage.getItem(progressKey)) || {};\r\n      setUserProgress(savedProgress);\r\n\r\n      // Calculate completed levels\r\n      const completed = levels\r\n        .filter(\r\n          (level) =>\r\n            !level.locked && savedProgress[`level_${level.id}`]?.completed\r\n        )\r\n        .map((level) => level.id);\r\n\r\n      setCompletedLevels(completed);\r\n    }\r\n\r\n    // Show a hint after 3 seconds if no level is selected\r\n    const hintTimer = setTimeout(() => {\r\n      setShowHint(true);\r\n    }, 3000);\r\n\r\n    return () => clearTimeout(hintTimer);\r\n  }, [navigate]);\r\n\r\n  const triggerConfetti = () => {\r\n    confetti({\r\n      particleCount: 100,\r\n      spread: 70,\r\n      origin: { y: 0.6 },\r\n    });\r\n  };\r\n\r\n  const handleLevelClick = (level) => {\r\n    if (level.locked) {\r\n      // Show a message that this level is locked\r\n      alert(\"Level ini terkunci! Selesaikan level sebelumnya terlebih dahulu.\");\r\n      return;\r\n    }\r\n\r\n    // Trigger background animation when level is clicked\r\n    setAnimateBackground(true);\r\n\r\n    setSelectedLevel(level);\r\n    setShowPopup(true);\r\n    setShowHint(false);\r\n  };\r\n\r\n  const closePopup = () => {\r\n    setShowPopup(false);\r\n    setTimeout(() => {\r\n      setSelectedLevel(null);\r\n      setAnimateBackground(false);\r\n    }, 300);\r\n  };\r\n\r\n  const handleSubChapterClick = (subChapter) => {\r\n    // Navigate to the corresponding materi page based on the subChapter id and title\r\n    if (subChapter.title === \"Pengukuran Luas Menggunakan Satuan Tidak Baku\") {\r\n      navigate(`/materi/materikelas4/materiBab4_1`);\r\n    } else if (subChapter.title === \"Pengukuran Luas Menggunakan Satuan Baku\") {\r\n      navigate(`/materi/materikelas4/materiBab4_2`);\r\n    } else if (\r\n      subChapter.title === \"Pengukuran Volume Menggunakan Satuan Tidak Baku\"\r\n    ) {\r\n      navigate(`/materi/materikelas4/materiBab4_3`);\r\n    } else if (\r\n      subChapter.title === \"Pengukuran Volume Menggunakan Satuan Baku\"\r\n    ) {\r\n      navigate(`/materi/materikelas4/materiBab4_4`);\r\n    } else {\r\n      // For other sub chapters, use the original path format\r\n      navigate(`/materi/materikelas4/materiBab4_${subChapter.id}`);\r\n    }\r\n  };\r\n\r\n  const handleGameClick = (game) => {\r\n    // Navigate to the game page\r\n    navigate(game.path);\r\n  };\r\n\r\n  const handleBackClick = () => {\r\n    // Add exit animation before navigating\r\n    setAnimateBackground(true);\r\n    setTimeout(() => {\r\n      navigate(\"/kelas4\");\r\n    }, 500);\r\n  };\r\n\r\n  // Check if a level is completed\r\n  const isLevelCompleted = (levelNum) => {\r\n    // Always return false to treat all levels as incomplete\r\n    return false;\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`category-container ${animateBackground ? \"animate-bg\" : \"\"}`}\r\n    >\r\n      {/* Background elements for visual appeal */}\r\n      <div className=\"background-elements\">\r\n        {stars.map((star) => (\r\n          <div\r\n            key={`star-${star.id}`}\r\n            className=\"star\"\r\n            style={{\r\n              width: star.size + \"px\",\r\n              height: star.size + \"px\",\r\n              left: star.left + \"%\",\r\n              top: star.top + \"%\",\r\n              animationDelay: star.delay + \"s\",\r\n              animationDuration: star.duration + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n\r\n        {clouds.map((cloud) => (\r\n          <div\r\n            key={`cloud-${cloud.id}`}\r\n            className=\"cloud\"\r\n            style={{\r\n              width: cloud.size + \"px\",\r\n              height: cloud.size / 2 + \"px\",\r\n              left: cloud.left + \"%\",\r\n              top: cloud.top + \"%\",\r\n              animationDuration: cloud.speed + \"s\",\r\n              animationDelay: cloud.delay + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n      </div>{\" \"}\r\n      <header className=\"header animated-header\">\r\n        <motion.h1\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.6 }}\r\n        >\r\n          BAB 4 <span className=\"wave\"></span>\r\n        </motion.h1>\r\n        <motion.p\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: 0.3, duration: 0.6 }}\r\n          className=\"header-tagline\"\r\n        >\r\n          Belajar pengukuran luas dan volume bersama!\r\n        </motion.p>\r\n      </header>\r\n      <section className=\"categories-section\">\r\n        {\" \"}\r\n        <motion.h2\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.7 }}\r\n        >\r\n          <span className=\"category-icon\"></span> Bab 4: Pengukuran Luas dan\r\n          Volume\r\n        </motion.h2>\r\n        {/* Hint bubble */}\r\n        <motion.button\r\n          className=\"back-button\"\r\n          onClick={handleBackClick}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          initial={{ opacity: 0, x: -20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 0.4 }}\r\n        >\r\n          Kembali\r\n        </motion.button>\r\n        <AnimatePresence>\r\n          {showHint && (\r\n            <motion.div\r\n              className=\"hint-bubble\"\r\n              initial={{ opacity: 0, scale: 0.8, y: 20 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.8 }}\r\n            >\r\n              <div className=\"hint-arrow\"></div>\r\n              <p>Klik kartu level untuk mulai belajar!</p>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n        <div className=\"level-path\">\r\n          {levels.map((level, index) => (\r\n            <React.Fragment key={`path-${level.id}`}>\r\n              {index > 0 && (\r\n                <div className=\"path-connector\">\r\n                  {/* Removed the completed-path class and path-progress-animation div */}\r\n                </div>\r\n              )}\r\n              <div\r\n                className={`path-node ${level.locked ? \"locked-node\" : \"\"}`}\r\n                // Removed the completed-node class\r\n              >\r\n                {level.id}\r\n              </div>\r\n            </React.Fragment>\r\n          ))}\r\n        </div>\r\n        <div className=\"level-grid\">\r\n          {levels.map((level) => (\r\n            <motion.div\r\n              key={level.id}\r\n              className={`level-card ${level.locked ? \"level-locked\" : \"\"}`}\r\n              onClick={() => handleLevelClick(level)}\r\n              whileHover={!level.locked ? { scale: 1.05, y: -5 } : {}}\r\n              whileTap={!level.locked ? { scale: 0.95 } : {}}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.1 * level.id }}\r\n              style={{\r\n                boxShadow: `0 8px 20px rgba(0, 0, 0, 0.15)`,\r\n              }}\r\n            >\r\n              <div\r\n                className={`level-icon-circle ${\r\n                  isLevelCompleted(level.id) ? \"completed\" : \"\"\r\n                }`}\r\n                style={{ background: level.gradient }}\r\n              >\r\n                {level.locked && <div className=\"lock-overlay\"></div>}\r\n                {isLevelCompleted(level.id) && (\r\n                  <div className=\"completed-check\"></div>\r\n                )}\r\n                <span className=\"level-symbol\">{level.icon}</span>\r\n              </div>\r\n              <h3 className=\"level-title\">{level.title}</h3>\r\n              <p className=\"level-description\">{level.description}</p>\r\n              <div className=\"level-info\">\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.subChapters.length} Sub\r\n                  Bab\r\n                </span>\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.games.length} Game\r\n                </span>\r\n              </div>\r\n              <div className=\"level-badge\" style={{ background: level.color }}>\r\n                {level.id}\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n      {/* Level Popup Dialog */}\r\n      <AnimatePresence>\r\n        {showPopup && selectedLevel && (\r\n          <motion.div\r\n            className=\"popup-overlay\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={closePopup}\r\n          >\r\n            <motion.div\r\n              className=\"level-popup\"\r\n              initial={{ scale: 0.8, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.8, opacity: 0 }}\r\n              transition={{ type: \"spring\", damping: 25 }}\r\n              style={{\r\n                background: `linear-gradient(to bottom right, white, #f9f9f9)`,\r\n                borderTop: `5px solid ${selectedLevel.color}`,\r\n              }}\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <motion.button\r\n                className=\"close-popup\"\r\n                onClick={closePopup}\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                whileHover={{ scale: 1.1 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                transition={{\r\n                  duration: 0.3,\r\n                  type: \"spring\",\r\n                  stiffness: 300,\r\n                }}\r\n              >\r\n                \r\n              </motion.button>\r\n\r\n              <div\r\n                className=\"popup-header\"\r\n                style={{ background: selectedLevel.gradient }}\r\n              >\r\n                <div className=\"popup-level-icon\">{selectedLevel.icon}</div>\r\n                <h2>\r\n                  Level {selectedLevel.id}: {selectedLevel.title}\r\n                </h2>\r\n              </div>\r\n\r\n              <div className=\"popup-sections\">\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Sub-Bab Materi\r\n                  </h3>\r\n                  <div className=\"sub-chapter-list\">\r\n                    {selectedLevel.subChapters.map((subChapter) => (\r\n                      <motion.div\r\n                        key={subChapter.id}\r\n                        className=\"sub-chapter-item\"\r\n                        onClick={() => handleSubChapterClick(subChapter)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"sub-chapter-icon\">\r\n                          {subChapter.icon}\r\n                        </div>\r\n                        <div className=\"sub-chapter-content\">\r\n                          <div className=\"sub-chapter-number\">\r\n                            {subChapter.id}\r\n                          </div>\r\n                          <h4>{subChapter.title}</h4>\r\n                        </div>\r\n                        <div className=\"sub-chapter-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Game Latihan\r\n                  </h3>\r\n                  <div className=\"game-list\">\r\n                    {selectedLevel.games.map((game) => (\r\n                      <motion.div\r\n                        key={game.id}\r\n                        className=\"game-item\"\r\n                        onClick={() => handleGameClick(game)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"game-icon\">{game.icon}</div>\r\n                        <div className=\"game-content\">\r\n                          <h4>{game.title}</h4>\r\n                          <span className=\"game-label\">Main Sekarang</span>\r\n                        </div>\r\n                        <div className=\"game-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"popup-footer\">\r\n                {isLevelCompleted(selectedLevel.id) ? (\r\n                  <div className=\"level-status completed-status\">\r\n                    <span className=\"status-icon\"></span> Level Selesai\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"level-status\">\r\n                    <span className=\"status-icon\"></span> Belum Selesai\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport \"./style/Category4.css\";\r\nimport confetti from \"react-confetti\";\r\n\r\n// Define the levels data with icons, colors and content\r\nconst levels = [\r\n  {\r\n    id: 1,\r\n    title: \"Level 1\",\r\n    description: \"Data dan Pengukuran\",\r\n    icon: \"\",\r\n    color: \"#E91E63\",\r\n    gradient: \"linear-gradient(135deg, #E91E63, #F48FB1)\",\r\n    subChapters: [\r\n      { id: 1, title: \"Apa Itu Segibanyak?\", icon: \"\" },\r\n      { id: 2, title: \" Segitiga: Bangun Tiga Sisi yang Seru!\", icon: \"\" },\r\n      { id: 3, title: \"Segiempat Bangun Empat Sisi yang Menarik\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 1,\r\n        title: \"Yuk Coba Gamenya!\",\r\n        path: \"/game/kelas4/Bab5/level1\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nexport default function Category4_Bab5() {\r\n  const navigate = useNavigate();\r\n  const [selectedLevel, setSelectedLevel] = useState(null);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [userProgress, setUserProgress] = useState({});\r\n  const [completedLevels, setCompletedLevels] = useState([]);\r\n  const [animateBackground, setAnimateBackground] = useState(false);\r\n  const [showHint, setShowHint] = useState(false);\r\n\r\n  // Generate stars for background effect\r\n  const stars = Array.from({ length: 50 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 3 + 1,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 100,\r\n    delay: Math.random() * 5,\r\n    duration: Math.random() * 3 + 2,\r\n  }));\r\n\r\n  // Generate clouds for background effect\r\n  const clouds = Array.from({ length: 6 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 150 + 100,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 20 + 10,\r\n    speed: Math.random() * 100 + 50,\r\n    delay: Math.random() * 20,\r\n  }));\r\n\r\n  // Set all path connectors to incomplete\r\n  const pathConnectorsCompleted = {}; // Empty object means no paths are completed\r\n\r\n  useEffect(() => {\r\n    // Check if user is logged in\r\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n    if (!isLoggedIn) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Load user progress from localStorage\r\n    const avatar = JSON.parse(localStorage.getItem(\"selectedAvatar\"));\r\n    if (avatar) {\r\n      const progressKey = `avatar_${avatar.name}_levels_progress`;\r\n      const savedProgress = JSON.parse(localStorage.getItem(progressKey)) || {};\r\n      setUserProgress(savedProgress);\r\n\r\n      // Calculate completed levels\r\n      const completed = levels\r\n        .filter(\r\n          (level) =>\r\n            !level.locked && savedProgress[`level_${level.id}`]?.completed\r\n        )\r\n        .map((level) => level.id);\r\n\r\n      setCompletedLevels(completed);\r\n    }\r\n\r\n    // Show a hint after 3 seconds if no level is selected\r\n    const hintTimer = setTimeout(() => {\r\n      setShowHint(true);\r\n    }, 3000);\r\n\r\n    return () => clearTimeout(hintTimer);\r\n  }, [navigate]);\r\n\r\n  const triggerConfetti = () => {\r\n    confetti({\r\n      particleCount: 100,\r\n      spread: 70,\r\n      origin: { y: 0.6 },\r\n    });\r\n  };\r\n\r\n  const handleLevelClick = (level) => {\r\n    if (level.locked) {\r\n      // Show a message that this level is locked\r\n      alert(\"Level ini terkunci! Selesaikan level sebelumnya terlebih dahulu.\");\r\n      return;\r\n    }\r\n\r\n    // Trigger background animation when level is clicked\r\n    setAnimateBackground(true);\r\n\r\n    // No longer checking for completed levels\r\n    // if (completedLevels.includes(level.id)) {\r\n    //   triggerConfetti();\r\n    // }\r\n\r\n    setSelectedLevel(level);\r\n    setShowPopup(true);\r\n    setShowHint(false);\r\n  };\r\n\r\n  const closePopup = () => {\r\n    setShowPopup(false);\r\n    setTimeout(() => {\r\n      setSelectedLevel(null);\r\n      setAnimateBackground(false);\r\n    }, 300);\r\n  };\r\n\r\n  const handleSubChapterClick = (subChapter) => {\r\n    // Navigate to the corresponding materi page based on the subChapter id and title\r\n    if (subChapter.title === \"Apa Itu Segibanyak?\") {\r\n      navigate(`/materi/materikelas4/materiBab5_1`);\r\n    } else if (subChapter.title === \" Segitiga: Bangun Tiga Sisi yang Seru!\") {\r\n      navigate(`/materi/materikelas4/materiBab5_2`);\r\n    } else if (\r\n      subChapter.title === \"Segiempat Bangun Empat Sisi yang Menarik\"\r\n    ) {\r\n      navigate(`/materi/materikelas4/materiBab5_3`);\r\n    } else {\r\n      // For other sub chapters, use the original path format\r\n      navigate(`/materi/materikelas4/materiBab5_${subChapter.id}`);\r\n    }\r\n  };\r\n\r\n  const handleGameClick = (game) => {\r\n    // Navigate to the game page\r\n    navigate(game.path);\r\n  };\r\n\r\n  const handleBackClick = () => {\r\n    // Add exit animation before navigating\r\n    setAnimateBackground(true);\r\n    setTimeout(() => {\r\n      navigate(\"/kelas4\");\r\n    }, 500);\r\n  };\r\n\r\n  // Check if a level is completed\r\n  const isLevelCompleted = (levelNum) => {\r\n    // Always return false to treat all levels as incomplete\r\n    return false;\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`category-container ${animateBackground ? \"animate-bg\" : \"\"}`}\r\n    >\r\n      {/* Background elements for visual appeal */}\r\n      <div className=\"background-elements\">\r\n        {stars.map((star) => (\r\n          <div\r\n            key={`star-${star.id}`}\r\n            className=\"star\"\r\n            style={{\r\n              width: star.size + \"px\",\r\n              height: star.size + \"px\",\r\n              left: star.left + \"%\",\r\n              top: star.top + \"%\",\r\n              animationDelay: star.delay + \"s\",\r\n              animationDuration: star.duration + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n\r\n        {clouds.map((cloud) => (\r\n          <div\r\n            key={`cloud-${cloud.id}`}\r\n            className=\"cloud\"\r\n            style={{\r\n              width: cloud.size + \"px\",\r\n              height: cloud.size / 2 + \"px\",\r\n              left: cloud.left + \"%\",\r\n              top: cloud.top + \"%\",\r\n              animationDuration: cloud.speed + \"s\",\r\n              animationDelay: cloud.delay + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n      </div>{\" \"}\r\n      <header className=\"header animated-header\">\r\n        <motion.h1\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.6 }}\r\n        >\r\n          BAB 5 <span className=\"wave\"></span>\r\n        </motion.h1>\r\n        <motion.p\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: 0.3, duration: 0.6 }}\r\n          className=\"header-tagline\"\r\n        >\r\n          Belajar data dan pengukuran bersama!\r\n        </motion.p>\r\n      </header>\r\n      <section className=\"categories-section\">\r\n        {\" \"}\r\n        <motion.h2\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.7 }}\r\n        >\r\n          <span className=\"category-icon\"></span> Bab 5: Data dan Pengukuran\r\n        </motion.h2>\r\n        {/* Hint bubble */}\r\n        <motion.button\r\n          className=\"back-button\"\r\n          onClick={handleBackClick}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          initial={{ opacity: 0, x: -20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 0.4 }}\r\n        >\r\n          Kembali\r\n        </motion.button>\r\n        <AnimatePresence>\r\n          {showHint && (\r\n            <motion.div\r\n              className=\"hint-bubble\"\r\n              initial={{ opacity: 0, scale: 0.8, y: 20 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.8 }}\r\n            >\r\n              <div className=\"hint-arrow\"></div>\r\n              <p>Klik kartu level untuk mulai belajar!</p>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n        <div className=\"level-path\">\r\n          {levels.map((level, index) => (\r\n            <React.Fragment key={`path-${level.id}`}>\r\n              {index > 0 && (\r\n                <div className=\"path-connector\">\r\n                  {/* Removed the completed-path class and path-progress-animation div */}\r\n                </div>\r\n              )}\r\n              <div\r\n                className={`path-node ${level.locked ? \"locked-node\" : \"\"}`}\r\n                // Removed the completed-node class\r\n              >\r\n                {level.id}\r\n              </div>\r\n            </React.Fragment>\r\n          ))}\r\n        </div>\r\n        <div className=\"level-grid\">\r\n          {levels.map((level) => (\r\n            <motion.div\r\n              key={level.id}\r\n              className={`level-card ${level.locked ? \"level-locked\" : \"\"}`}\r\n              onClick={() => handleLevelClick(level)}\r\n              whileHover={!level.locked ? { scale: 1.05, y: -5 } : {}}\r\n              whileTap={!level.locked ? { scale: 0.95 } : {}}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.1 * level.id }}\r\n              style={{\r\n                boxShadow: `0 8px 20px rgba(0, 0, 0, 0.15)`,\r\n              }}\r\n            >\r\n              <div\r\n                className={`level-icon-circle ${\r\n                  isLevelCompleted(level.id) ? \"completed\" : \"\"\r\n                }`}\r\n                style={{ background: level.gradient }}\r\n              >\r\n                {level.locked && <div className=\"lock-overlay\"></div>}\r\n                {isLevelCompleted(level.id) && (\r\n                  <div className=\"completed-check\"></div>\r\n                )}\r\n                <span className=\"level-symbol\">{level.icon}</span>\r\n              </div>\r\n              <h3 className=\"level-title\">{level.title}</h3>\r\n              <p className=\"level-description\">{level.description}</p>\r\n              <div className=\"level-info\">\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.subChapters.length} Sub\r\n                  Bab\r\n                </span>\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.games.length} Game\r\n                </span>\r\n              </div>\r\n              <div className=\"level-badge\" style={{ background: level.color }}>\r\n                {level.id}\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n      {/* Level Popup Dialog */}\r\n      <AnimatePresence>\r\n        {showPopup && selectedLevel && (\r\n          <motion.div\r\n            className=\"popup-overlay\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={closePopup}\r\n          >\r\n            <motion.div\r\n              className=\"level-popup\"\r\n              initial={{ scale: 0.8, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.8, opacity: 0 }}\r\n              transition={{ type: \"spring\", damping: 25 }}\r\n              style={{\r\n                background: `linear-gradient(to bottom right, white, #f9f9f9)`,\r\n                borderTop: `5px solid ${selectedLevel.color}`,\r\n              }}\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <motion.button\r\n                className=\"close-popup\"\r\n                onClick={closePopup}\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                whileHover={{ scale: 1.1 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                transition={{\r\n                  duration: 0.3,\r\n                  type: \"spring\",\r\n                  stiffness: 300,\r\n                }}\r\n              >\r\n                \r\n              </motion.button>\r\n\r\n              <div\r\n                className=\"popup-header\"\r\n                style={{ background: selectedLevel.gradient }}\r\n              >\r\n                <div className=\"popup-level-icon\">{selectedLevel.icon}</div>\r\n                <h2>\r\n                  Level {selectedLevel.id}: {selectedLevel.title}\r\n                </h2>\r\n              </div>\r\n\r\n              <div className=\"popup-sections\">\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Sub-Bab Materi\r\n                  </h3>\r\n                  <div className=\"sub-chapter-list\">\r\n                    {selectedLevel.subChapters.map((subChapter) => (\r\n                      <motion.div\r\n                        key={subChapter.id}\r\n                        className=\"sub-chapter-item\"\r\n                        onClick={() => handleSubChapterClick(subChapter)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"sub-chapter-icon\">\r\n                          {subChapter.icon}\r\n                        </div>\r\n                        <div className=\"sub-chapter-content\">\r\n                          <div className=\"sub-chapter-number\">\r\n                            {subChapter.id}\r\n                          </div>\r\n                          <h4>{subChapter.title}</h4>\r\n                        </div>\r\n                        <div className=\"sub-chapter-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Game Latihan\r\n                  </h3>\r\n                  <div className=\"game-list\">\r\n                    {selectedLevel.games.map((game) => (\r\n                      <motion.div\r\n                        key={game.id}\r\n                        className=\"game-item\"\r\n                        onClick={() => handleGameClick(game)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"game-icon\">{game.icon}</div>\r\n                        <div className=\"game-content\">\r\n                          <h4>{game.title}</h4>\r\n                          <span className=\"game-label\">Main Sekarang</span>\r\n                        </div>\r\n                        <div className=\"game-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"popup-footer\">\r\n                {isLevelCompleted(selectedLevel.id) ? (\r\n                  <div className=\"level-status completed-status\">\r\n                    <span className=\"status-icon\"></span> Level Selesai\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"level-status\">\r\n                    <span className=\"status-icon\"></span> Belum Selesai\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport \"./style/Category4.css\";\r\nimport confetti from \"react-confetti\";\r\n\r\n// Define the levels data with icons, colors and content\r\nconst levels = [\r\n  {\r\n    id: 1,\r\n    title: \"Level 1\",\r\n    description: \"Data dan Diagram\",\r\n    icon: \"\",\r\n    color: \"#E91E63\",\r\n    gradient: \"linear-gradient(135deg,rgb(233, 192, 30), #F48FB1)\",\r\n    subChapters: [\r\n      { id: 1, title: \"Bentuk Penyajian Data Tabel Dan Diagram\", icon: \"\" },\r\n      { id: 2, title: \"Diagram Gambar (Piktogram)\", icon: \"\" },\r\n      { id: 3, title: \"Diagram Batang\", icon: \"\" },\r\n    ],\r\n    games: [\r\n      {\r\n        id: 1,\r\n        title: \"Yuk Coba Gamenya!\",\r\n        path: \"/game/kelas4/Bab6/level1\",\r\n        icon: \"\",\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nexport default function Category4_Bab6() {\r\n  const navigate = useNavigate();\r\n  const [selectedLevel, setSelectedLevel] = useState(null);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [userProgress, setUserProgress] = useState({});\r\n  const [completedLevels, setCompletedLevels] = useState([]);\r\n  const [animateBackground, setAnimateBackground] = useState(false);\r\n  const [showHint, setShowHint] = useState(false);\r\n\r\n  // Generate stars for background effect\r\n  const stars = Array.from({ length: 50 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 3 + 1,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 100,\r\n    delay: Math.random() * 5,\r\n    duration: Math.random() * 3 + 2,\r\n  }));\r\n\r\n  // Generate clouds for background effect\r\n  const clouds = Array.from({ length: 6 }, (_, i) => ({\r\n    id: i,\r\n    size: Math.random() * 150 + 100,\r\n    left: Math.random() * 100,\r\n    top: Math.random() * 20 + 10,\r\n    speed: Math.random() * 100 + 50,\r\n    delay: Math.random() * 20,\r\n  }));\r\n\r\n  // Set all path connectors to incomplete\r\n  const pathConnectorsCompleted = {}; // Empty object means no paths are completed\r\n\r\n  useEffect(() => {\r\n    // Check if user is logged in\r\n    const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\r\n    if (!isLoggedIn) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    // Load user progress from localStorage\r\n    const avatar = JSON.parse(localStorage.getItem(\"selectedAvatar\"));\r\n    if (avatar) {\r\n      const progressKey = `avatar_${avatar.name}_levels_progress`;\r\n      const savedProgress = JSON.parse(localStorage.getItem(progressKey)) || {};\r\n      setUserProgress(savedProgress);\r\n\r\n      // Calculate completed levels\r\n      const completed = levels\r\n        .filter(\r\n          (level) =>\r\n            !level.locked && savedProgress[`level_${level.id}`]?.completed\r\n        )\r\n        .map((level) => level.id);\r\n\r\n      setCompletedLevels(completed);\r\n    }\r\n\r\n    // Show a hint after 3 seconds if no level is selected\r\n    const hintTimer = setTimeout(() => {\r\n      setShowHint(true);\r\n    }, 3000);\r\n\r\n    return () => clearTimeout(hintTimer);\r\n  }, [navigate]);\r\n\r\n  const triggerConfetti = () => {\r\n    confetti({\r\n      particleCount: 100,\r\n      spread: 70,\r\n      origin: { y: 0.6 },\r\n    });\r\n  };\r\n\r\n  const handleLevelClick = (level) => {\r\n    if (level.locked) {\r\n      // Show a message that this level is locked\r\n      alert(\"Level ini terkunci! Selesaikan level sebelumnya terlebih dahulu.\");\r\n      return;\r\n    }\r\n\r\n    // Trigger background animation when level is clicked\r\n    setAnimateBackground(true);\r\n\r\n    setSelectedLevel(level);\r\n    setShowPopup(true);\r\n    setShowHint(false);\r\n  };\r\n\r\n  const closePopup = () => {\r\n    setShowPopup(false);\r\n    setTimeout(() => {\r\n      setSelectedLevel(null);\r\n      setAnimateBackground(false);\r\n    }, 300);\r\n  };\r\n\r\n  const handleSubChapterClick = (subChapter) => {\r\n    // Navigate to the corresponding materi page based on the subChapter id\r\n    navigate(`/materi/materikelas4/materiBab6_${subChapter.id}`);\r\n  };\r\n\r\n  const handleGameClick = (game) => {\r\n    // Navigate to the game page\r\n    navigate(game.path);\r\n  };\r\n\r\n  const handleBackClick = () => {\r\n    // Add exit animation before navigating\r\n    setAnimateBackground(true);\r\n    setTimeout(() => {\r\n      navigate(\"/kelas4\");\r\n    }, 500);\r\n  };\r\n\r\n  // Check if a level is completed\r\n  const isLevelCompleted = (levelNum) => {\r\n    // Always return false to treat all levels as incomplete\r\n    return false;\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`category-container ${animateBackground ? \"animate-bg\" : \"\"}`}\r\n    >\r\n      {/* Background elements for visual appeal */}\r\n      <div className=\"background-elements\">\r\n        {stars.map((star) => (\r\n          <div\r\n            key={`star-${star.id}`}\r\n            className=\"star\"\r\n            style={{\r\n              width: star.size + \"px\",\r\n              height: star.size + \"px\",\r\n              left: star.left + \"%\",\r\n              top: star.top + \"%\",\r\n              animationDelay: star.delay + \"s\",\r\n              animationDuration: star.duration + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n\r\n        {clouds.map((cloud) => (\r\n          <div\r\n            key={`cloud-${cloud.id}`}\r\n            className=\"cloud\"\r\n            style={{\r\n              width: cloud.size + \"px\",\r\n              height: cloud.size / 2 + \"px\",\r\n              left: cloud.left + \"%\",\r\n              top: cloud.top + \"%\",\r\n              animationDuration: cloud.speed + \"s\",\r\n              animationDelay: cloud.delay + \"s\",\r\n            }}\r\n          />\r\n        ))}\r\n      </div>{\" \"}\r\n      <header className=\"header animated-header\">\r\n        <motion.h1\r\n          initial={{ opacity: 0, y: -20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.6 }}\r\n        >\r\n          BAB 6 <span className=\"wave\"></span>\r\n        </motion.h1>\r\n        <motion.p\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: 0.3, duration: 0.6 }}\r\n          className=\"header-tagline\"\r\n        >\r\n          Belajar Piktogram dan Diagram Batang bersama!\r\n        </motion.p>\r\n      </header>\r\n      <section className=\"categories-section\">\r\n        {\" \"}\r\n        <motion.h2\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.7 }}\r\n        >\r\n          <span className=\"category-icon\"></span> Bab 6: Piktogram dan Diagram\r\n          Batang\r\n        </motion.h2>\r\n        {/* Hint bubble */}\r\n        <motion.button\r\n          className=\"back-button\"\r\n          onClick={handleBackClick}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n          initial={{ opacity: 0, x: -20 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          transition={{ delay: 0.4 }}\r\n        >\r\n          Kembali\r\n        </motion.button>\r\n        <AnimatePresence>\r\n          {showHint && (\r\n            <motion.div\r\n              className=\"hint-bubble\"\r\n              initial={{ opacity: 0, scale: 0.8, y: 20 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.8 }}\r\n            >\r\n              <div className=\"hint-arrow\"></div>\r\n              <p>Klik kartu level untuk mulai belajar!</p>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n        <div className=\"level-path\">\r\n          {levels.map((level, index) => (\r\n            <React.Fragment key={`path-${level.id}`}>\r\n              {index > 0 && (\r\n                <div className=\"path-connector\">\r\n                  {/* Removed the completed-path class and path-progress-animation div */}\r\n                </div>\r\n              )}\r\n              <div\r\n                className={`path-node ${level.locked ? \"locked-node\" : \"\"}`}\r\n                // Removed the completed-node class\r\n              >\r\n                {level.id}\r\n              </div>\r\n            </React.Fragment>\r\n          ))}\r\n        </div>\r\n        <div className=\"level-grid\">\r\n          {levels.map((level) => (\r\n            <motion.div\r\n              key={level.id}\r\n              className={`level-card ${level.locked ? \"level-locked\" : \"\"}`}\r\n              onClick={() => handleLevelClick(level)}\r\n              whileHover={!level.locked ? { scale: 1.05, y: -5 } : {}}\r\n              whileTap={!level.locked ? { scale: 0.95 } : {}}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.1 * level.id }}\r\n              style={{\r\n                boxShadow: `0 8px 20px rgba(0, 0, 0, 0.15)`,\r\n              }}\r\n            >\r\n              <div\r\n                className={`level-icon-circle ${\r\n                  isLevelCompleted(level.id) ? \"completed\" : \"\"\r\n                }`}\r\n                style={{ background: level.gradient }}\r\n              >\r\n                {level.locked && <div className=\"lock-overlay\"></div>}\r\n                {isLevelCompleted(level.id) && (\r\n                  <div className=\"completed-check\"></div>\r\n                )}\r\n                <span className=\"level-symbol\">{level.icon}</span>\r\n              </div>\r\n              <h3 className=\"level-title\">{level.title}</h3>\r\n              <p className=\"level-description\">{level.description}</p>\r\n              <div className=\"level-info\">\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.subChapters.length} Sub\r\n                  Bab\r\n                </span>\r\n                <span className=\"info-item\">\r\n                  <i className=\"info-icon\"></i> {level.games.length} Game\r\n                </span>\r\n              </div>\r\n              <div className=\"level-badge\" style={{ background: level.color }}>\r\n                {level.id}\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      </section>\r\n      {/* Level Popup Dialog */}\r\n      <AnimatePresence>\r\n        {showPopup && selectedLevel && (\r\n          <motion.div\r\n            className=\"popup-overlay\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={closePopup}\r\n          >\r\n            <motion.div\r\n              className=\"level-popup\"\r\n              initial={{ scale: 0.8, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.8, opacity: 0 }}\r\n              transition={{ type: \"spring\", damping: 25 }}\r\n              style={{\r\n                background: `linear-gradient(to bottom right, white, #f9f9f9)`,\r\n                borderTop: `5px solid ${selectedLevel.color}`,\r\n              }}\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <motion.button\r\n                className=\"close-popup\"\r\n                onClick={closePopup}\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                whileHover={{ scale: 1.1 }}\r\n                whileTap={{ scale: 0.9 }}\r\n                transition={{\r\n                  duration: 0.3,\r\n                  type: \"spring\",\r\n                  stiffness: 300,\r\n                }}\r\n              >\r\n                \r\n              </motion.button>\r\n\r\n              <div\r\n                className=\"popup-header\"\r\n                style={{ background: selectedLevel.gradient }}\r\n              >\r\n                <div className=\"popup-level-icon\">{selectedLevel.icon}</div>\r\n                <h2>\r\n                  Level {selectedLevel.id}: {selectedLevel.title}\r\n                </h2>\r\n              </div>\r\n\r\n              <div className=\"popup-sections\">\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Sub-Bab Materi\r\n                  </h3>\r\n                  <div className=\"sub-chapter-list\">\r\n                    {selectedLevel.subChapters.map((subChapter) => (\r\n                      <motion.div\r\n                        key={subChapter.id}\r\n                        className=\"sub-chapter-item\"\r\n                        onClick={() => handleSubChapterClick(subChapter)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"sub-chapter-icon\">\r\n                          {subChapter.icon}\r\n                        </div>\r\n                        <div className=\"sub-chapter-content\">\r\n                          <div className=\"sub-chapter-number\">\r\n                            {subChapter.id}\r\n                          </div>\r\n                          <h4>{subChapter.title}</h4>\r\n                        </div>\r\n                        <div className=\"sub-chapter-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"popup-section\">\r\n                  <h3>\r\n                    <span className=\"section-icon\"></span>\r\n                    Game Latihan\r\n                  </h3>\r\n                  <div className=\"game-list\">\r\n                    {selectedLevel.games.map((game) => (\r\n                      <motion.div\r\n                        key={game.id}\r\n                        className=\"game-item\"\r\n                        onClick={() => handleGameClick(game)}\r\n                        whileHover={{\r\n                          scale: 1.02,\r\n                          boxShadow: \"0 5px 15px rgba(0, 0, 0, 0.1)\",\r\n                        }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        <div className=\"game-icon\">{game.icon}</div>\r\n                        <div className=\"game-content\">\r\n                          <h4>{game.title}</h4>\r\n                          <span className=\"game-label\">Main Sekarang</span>\r\n                        </div>\r\n                        <div className=\"game-arrow\"></div>\r\n                      </motion.div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"popup-footer\">\r\n                {isLevelCompleted(selectedLevel.id) ? (\r\n                  <div className=\"level-status completed-status\">\r\n                    <span className=\"status-icon\"></span> Level Selesai\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"level-status\">\r\n                    <span className=\"status-icon\"></span> Belum Selesai\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n  Navigate,\n} from \"react-router-dom\";\nimport \"./App.css\";\nimport supabase from \"./config/supabase\";\nimport WelcomePage from \"./components/WelcomePage\";\nimport Login from \"./components/Login\";\nimport MainSiswa from \"./main-siswa\";\nimport CategoryPage from \"./CategoryPage\";\n// MateriPage import removed\nimport GamePage from \"./GamePage\";\nimport HasilPage from \"./HasilPage\";\nimport Skor from \"./Skor\";\nimport HasilRetryPage from \"./HasilRetryPage\";\nimport Category from \"./pages/Category\";\n// Import komponen game dengan nama Bahasa Indonesia\nimport Penjumlahan from \"./pages/game/Penjumlahan\";\nimport Pembagian from \"./pages/game/Pembagian\";\nimport Pengurangan from \"./pages/game/Pengurangan\";\nimport Perkalian from \"./pages/game/Perkalian\";\n// Import komponen game untuk Bab 4\nimport PengukuranLuas from \"./pages/game/PengukuranLuas\";\nimport PengukuranVolume from \"./pages/game/PengukuranVolume\";\n// Import komponen materi dengan nama Bahasa Indonesia\nimport MateriPenjumlahan from \"./pages/materi/materikelas1_2/MateriPenjumlahan\";\nimport MateriPembagian from \"./pages/materi/materikelas1_2/MateriPembagian\";\nimport MateriPerkalian from \"./pages/materi/materikelas1_2/MateriPerkalian\";\nimport MateriPengurangan from \"./pages/materi/materikelas1_2/MateriPengurangan\";\n// Import komponen materi kelas 4 BAB 1\nimport MateriBab1_1 from \"./pages/materi/materikelas4/materiBab1_1\";\nimport MateriBab1_2 from \"./pages/materi/materikelas4/materiBab1_2\";\nimport MateriBab1_3 from \"./pages/materi/materikelas4/materiBab1_3\";\nimport MateriBab1_4 from \"./pages/materi/materikelas4/Materi_Bab1_4\";\nimport MateriBab1_5 from \"./pages/materi/materikelas4/Materi_Bab1_5\";\nimport MateriBab1_6 from \"./pages/materi/materikelas4/Materi_Bab1_6\";\nimport MateriBab1_7 from \"./pages/materi/materikelas4/Materi_Bab1_7\";\n// Import komponen materi kelas 4 bab 2\nimport MateriBab2_1 from \"./pages/materi/materikelas4/Materikelas4_bab2/Materi_Bab2_1\";\nimport MateriBab2_2 from \"./pages/materi/materikelas4/Materikelas4_bab2/Materi_Bab2_2\";\nimport MateriBab2_3 from \"./pages/materi/materikelas4/Materikelas4_bab2/Materi_Bab2_3\";\nimport MateriBab2_4 from \"./pages/materi/materikelas4/Materikelas4_bab2/Materi_Bab2_4\";\nimport MateriBab2_5 from \"./pages/materi/materikelas4/Materikelas4_bab2/Materi_Bab2_5\";\nimport MateriBab2_6 from \"./pages/materi/materikelas4/Materikelas4_bab2/Materi_Bab2_6\";\nimport MateriBab2_7 from \"./pages/materi/materikelas4/Materikelas4_bab2/Materi_Bab2_7\";\n// Import komponen materi kelas 4 bab 3\nimport MateriBab3_1 from \"./pages/materi/materikelas4/Materikelas4_bab3/Materi_Bab3_1\";\nimport MateriBab3_2 from \"./pages/materi/materikelas4/Materikelas4_bab3/Materi_Bab3_2\";\nimport MateriBab3_3 from \"./pages/materi/materikelas4/Materikelas4_bab3/Materi_Bab3_3\";\nimport MateriBab3_4 from \"./pages/materi/materikelas4/Materikelas4_bab3/Materi_Bab3_4\";\nimport MateriBab3_5 from \"./pages/materi/materikelas4/Materikelas4_bab3/Materi_Bab3_5\";\nimport MateriBab3_6 from \"./pages/materi/materikelas4/Materikelas4_bab3/Materi_Bab3_6\";\n\n// Import komponen materi Bab 4\nimport MateriBab4_1 from \"./pages/materi/materikelas4/Materikelas4_bab4/Materi_Bab4_1\";\nimport MateriBab4_2 from \"./pages/materi/materikelas4/Materikelas4_bab4/Materi_Bab4_2\";\nimport MateriBab4_3 from \"./pages/materi/materikelas4/Materikelas4_bab4/Materi_Bab4_3\";\nimport MateriBab4_4 from \"./pages/materi/materikelas4/Materikelas4_bab4/Materi_Bab4_4\";\n\n// Import komponen materi Bab 5\nimport MateriBab5_1 from \"./pages/materi/materikelas4/Materikelas4_bab5/Materi_Bab5_1\";\nimport MateriBab5_2 from \"./pages/materi/materikelas4/Materikelas4_bab5/Materi_Bab5_2\";\nimport MateriBab5_3 from \"./pages/materi/materikelas4/Materikelas4_bab5/Materi_Bab5_3\";\n\n// Import komponen materi Bab 6\nimport MateriBab6_1 from \"./pages/materi/materikelas4/Materikelas4_bab6/Materi_Bab6_1\";\nimport MateriBab6_2 from \"./pages/materi/materikelas4/Materikelas4_bab6/Materi_Bab6_2\";\nimport MateriBab6_3 from \"./pages/materi/materikelas4/Materikelas4_bab6/Materi_Bab6_3\";\n\n// Import komponen admin\nimport AdminRegister from \"./pages/admin/AdminRegister\";\n// Import komponen guru\nimport TabGuru from \"./guru/TabGuru\";\nimport DashboardAdmin from \"./pages/admin/DashboardAdmin\";\n// Import komponen kelas 4\nimport MainSiswa2 from \"./pages/kelas/kelas2/MainSiswa2\";\nimport MainSiswa4 from \"./pages/kelas/kelas4/main-siswa4\";\nimport Category4_Bab1 from \"./pages/kelas/kelas4/Category4_Bab1\";\nimport Category4_Bab2 from \"./pages/kelas/kelas4/Category4_Bab2\";\nimport Category4_Bab3 from \"./pages/kelas/kelas4/Category4_Bab3\";\nimport Category4_Bab4 from \"./pages/kelas/kelas4/Category4_Bab4\";\nimport Category4_Bab5 from \"./pages/kelas/kelas4/Category4_Bab5\";\nimport Category4_Bab6 from \"./pages/kelas/kelas4/Category4_Bab6\";\n// Import game component for Bab1 Level1\nimport PetualanganBilanganCacah from \"./pages/game/kelas4/Bab1_Level1\";\n// Import game component for Bab1 Level2\nimport KomposisiDanPengurangan from \"./pages/game/kelas4/Bab1_Level2\";\n// Import game component for Bab1 Level3\nimport LatihanPerkalianPembagian from \"./pages/game/kelas4/Bab1_Level3\";\n// Import game component for Bab1 Level4\nimport FaktorKelipatanDragDropGame from \"./pages/game/kelas4/Bab1_Level4\";\n// Import game component for Bab2 Level1\nimport FractionAdventure from \"./pages/game/kelas4/Bab2/Bab2_Level1\";\n// Import game component for Bab2 Level2\nimport FractionGame from \"./pages/game/kelas4/Bab2/Bab2_Level2\";\n// Import game component for game Pecahan Desimal - Bab 2 Level 3\nimport GamePecahanDesimal from \"./pages/game/kelas4/Bab2/Bab2_Level3\";\n// Import game component for game Pecahan Desimal - Bab 2 Level 4\nimport GamePecahanDesimalPersen from \"./pages/game/kelas4/Bab2/Bab2_Level4\";\n//bab 3\nimport GamePolaBilangan from \"./pages/game/kelas4/Bab3/Bab3_Level1\";\n// Import game component for Bab3 Level2\nimport GamePolaBilanganLevel2 from \"./pages/game/kelas4/Bab3/Bab3_Level2\";\n// bab 4\nimport Bab4_Level1 from \"./pages/game/kelas4/Bab4/Bab4_Level1\";\n// Import game component for Bab4 Level2\nimport Bab4_Level2 from \"./pages/game/kelas4/Bab4/Bab4_Level2\";\n// bab 5\nimport Bab5_Level1 from \"./pages/game/kelas4/Bab5/Bab5\";\n// bab6\nimport Bab6_Level1 from \"./pages/game/kelas4/Bab6/Bab6_Level1\";\n\n// Komponen untuk proteksi rute\nconst ProtectedRoute = ({ children }) => {\n  const isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\n\n  if (!isLoggedIn) {\n    return <Navigate to=\"/login\" />;\n  }\n\n  return children;\n};\n\n// Komponen untuk proteksi rute admin\nconst AdminRoute = ({ children }) => {\n  const isAdmin = localStorage.getItem(\"userRole\") === \"admin\";\n\n  if (!isAdmin) {\n    return <Navigate to=\"/\" />;\n  }\n\n  return children;\n};\n\nexport default function App() {\n  const [dbError, setDbError] = useState(null);\n\n  useEffect(() => {\n    const checkDbConnection = async () => {\n      try {\n        if (!supabase) {\n          setDbError(\n            \"Tidak dapat terhubung ke database. Beberapa fitur mungkin tidak tersedia.\"\n          );\n          return;\n        }\n\n        const isConnected = await supabase.testConnection();\n        if (!isConnected) {\n          setDbError(\n            \"Tidak dapat terhubung ke database. Beberapa fitur mungkin tidak tersedia.\"\n          );\n        } else {\n          setDbError(null);\n        }\n      } catch (error) {\n        console.error(\"Database connection error:\", error);\n        setDbError(\"Terjadi kesalahan saat menghubungi database.\");\n      }\n    };\n\n    checkDbConnection();\n\n    // Check connection periodically\n    const interval = setInterval(checkDbConnection, 30000); // every 30 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <Router>\n      {dbError && (\n        <div\n          style={{\n            position: \"fixed\",\n            top: 0,\n            left: 0,\n            right: 0,\n            backgroundColor: \"#fff3cd\",\n            color: \"#856404\",\n            padding: \"10px\",\n            textAlign: \"center\",\n            zIndex: 1000,\n          }}\n        >\n          {dbError}\n        </div>\n      )}\n      <Routes>\n        <Route path=\"/\" element={<WelcomePage />} />\n        <Route path=\"/login\" element={<Login />} />\n        <Route\n          path=\"/main-siswa\"\n          element={\n            <ProtectedRoute>\n              <MainSiswa />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk kelas 2 */}\n        <Route\n          path=\"/kelas2\"\n          element={\n            <ProtectedRoute>\n              <MainSiswa2 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk kelas 4 */}\n        <Route\n          path=\"/kelas4\"\n          element={\n            <ProtectedRoute>\n              <MainSiswa4 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk Category4_Bab1 */}\n        <Route\n          path=\"/category4_bab1\"\n          element={\n            <ProtectedRoute>\n              <Category4_Bab1 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk Category4_Bab2 */}\n        <Route\n          path=\"/category4_bab2\"\n          element={\n            <ProtectedRoute>\n              <Category4_Bab2 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk Category4_Bab3 */}\n        <Route\n          path=\"/category4_bab3\"\n          element={\n            <ProtectedRoute>\n              <Category4_Bab3 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk Category4_Bab4 */}\n        <Route\n          path=\"/category4_bab4\"\n          element={\n            <ProtectedRoute>\n              <Category4_Bab4 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk Category4_Bab5 */}\n        <Route\n          path=\"/category4_bab5\"\n          element={\n            <ProtectedRoute>\n              <Category4_Bab5 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk Category4_Bab6 */}\n        <Route\n          path=\"/category4_bab6\"\n          element={\n            <ProtectedRoute>\n              <Category4_Bab6 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/kategori\"\n          element={\n            <ProtectedRoute>\n              <CategoryPage />\n            </ProtectedRoute>\n          }\n        />\n        {/* MateriPage route removed */}\n        <Route\n          path=\"/game/:chapterIndex/:levelIndex\"\n          element={\n            <ProtectedRoute>\n              <GamePage />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/hasil/:score\"\n          element={\n            <ProtectedRoute>\n              <HasilPage />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/hasil-retry/:score\"\n          element={\n            <ProtectedRoute>\n              <HasilRetryPage />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/skor\"\n          element={\n            <ProtectedRoute>\n              <Skor />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/category\"\n          element={\n            <ProtectedRoute>\n              <Category />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game dengan nama Bahasa Indonesia */}\n        <Route\n          path=\"/game/penjumlahan\"\n          element={\n            <ProtectedRoute>\n              <Penjumlahan />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/game/pembagian\"\n          element={\n            <ProtectedRoute>\n              <Pembagian />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/game/pengurangan\"\n          element={\n            <ProtectedRoute>\n              <Pengurangan />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/game/perkalian\"\n          element={\n            <ProtectedRoute>\n              <Perkalian />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Pengukuran Luas dan Volume - Bab 4 */}\n        <Route\n          path=\"/game/pengukuran-luas\"\n          element={\n            <ProtectedRoute>\n              <PengukuranLuas />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/game/pengukuran-volume\"\n          element={\n            <ProtectedRoute>\n              <PengukuranVolume />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Petualangan Bilangan Cacah - Bab 1 */}\n        <Route\n          path=\"/game/kelas4/bab1/level1\"\n          element={\n            <ProtectedRoute>\n              <PetualanganBilanganCacah />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Komposisi dan Pengurangan - Bab 1 Level 2 */}\n        <Route\n          path=\"/game/kelas4/bab1/level2\"\n          element={\n            <ProtectedRoute>\n              <KomposisiDanPengurangan />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Latihan Perkalian dan Pembagian - Bab 1 Level 3 */}\n        <Route\n          path=\"/game/kelas4/bab1/level3\"\n          element={\n            <ProtectedRoute>\n              <LatihanPerkalianPembagian />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Faktor Kelipatan Drag and Drop - Bab 1 Level 4 */}\n        <Route\n          path=\"/game/kelas4/bab1/level4\"\n          element={\n            <ProtectedRoute>\n              <FaktorKelipatanDragDropGame />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Fraction Adventure - Bab 2 Level 1 */}\n        <Route\n          path=\"/game/kelas4/bab2/level1\"\n          element={\n            <ProtectedRoute>\n              <FractionAdventure />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Fraction Game - Bab 2 Level 2 */}\n        <Route\n          path=\"/game/kelas4/bab2/level2\"\n          element={\n            <ProtectedRoute>\n              <FractionGame />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Pecahan Desimal - Bab 2 Level 3 */}\n        <Route\n          path=\"/game/kelas4/bab2/level3\"\n          element={\n            <ProtectedRoute>\n              <GamePecahanDesimal />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Pecahan Desimal - Bab 2 Level 4 */}\n        <Route\n          path=\"/game/kelas4/bab2/level4\"\n          element={\n            <ProtectedRoute>\n              <GamePecahanDesimalPersen />\n            </ProtectedRoute>\n          }\n        />{\" \"}\n        {/* Route untuk game Pola Bilangan - Bab 3 Level 1 */}\n        <Route\n          path=\"/game/kelas4/bab3/level1\"\n          element={\n            <ProtectedRoute>\n              <GamePolaBilangan />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Pola Bilangan - Bab 3 Level 2 */}\n        <Route\n          path=\"/game/kelas4/bab3/level2\"\n          element={\n            <ProtectedRoute>\n              <GamePolaBilanganLevel2 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Bab 4 Level 1 */}\n        <Route\n          path=\"/game/kelas4/bab4/level1\"\n          element={\n            <ProtectedRoute>\n              <Bab4_Level1 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Bab 4 Level 2 */}\n        <Route\n          path=\"/game/kelas4/bab4/level2\"\n          element={\n            <ProtectedRoute>\n              <Bab4_Level2 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Bab 5 Level 1 */}\n        <Route\n          path=\"/game/kelas4/bab5/level1\"\n          element={\n            <ProtectedRoute>\n              <Bab5_Level1 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk game Bab 6 Level 1 */}\n        <Route\n          path=\"/game/kelas4/bab6/level1\"\n          element={\n            <ProtectedRoute>\n              <Bab6_Level1 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Routes for games with English names - redirect to Indonesian routes */}\n        <Route\n          path=\"/game/addition\"\n          element={<Navigate to=\"/game/penjumlahan\" replace />}\n        />\n        <Route\n          path=\"/game/division\"\n          element={<Navigate to=\"/game/pembagian\" replace />}\n        />\n        <Route\n          path=\"/game/subtraction\"\n          element={<Navigate to=\"/game/pengurangan\" replace />}\n        />\n        <Route\n          path=\"/game/multiplication\"\n          element={<Navigate to=\"/game/perkalian\" replace />}\n        />\n        {/* Route untuk halaman materi dengan nama Bahasa Indonesia */}\n        <Route\n          path=\"/materi/addition\"\n          element={\n            <ProtectedRoute>\n              <MateriPenjumlahan />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/subtraction\"\n          element={\n            <ProtectedRoute>\n              <MateriPengurangan />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/multiplication\"\n          element={\n            <ProtectedRoute>\n              <MateriPerkalian />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/division\"\n          element={\n            <ProtectedRoute>\n              <MateriPembagian />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk materi kelas 4 */}\n        <Route\n          path=\"/materi/materikelas4/materiBab1_1\"\n          element={\n            <ProtectedRoute>\n              <MateriBab1_1 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab1_2\"\n          element={\n            <ProtectedRoute>\n              <MateriBab1_2 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab1_3\"\n          element={\n            <ProtectedRoute>\n              <MateriBab1_3 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab1_4\"\n          element={\n            <ProtectedRoute>\n              <MateriBab1_4 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab1_5\"\n          element={\n            <ProtectedRoute>\n              <MateriBab1_5 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab1_6\"\n          element={\n            <ProtectedRoute>\n              <MateriBab1_6 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab1_7\"\n          element={\n            <ProtectedRoute>\n              <MateriBab1_7 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk materi kelas 4 bab 2 */}\n        <Route\n          path=\"/materi/materikelas4/materiBab2_1\"\n          element={\n            <ProtectedRoute>\n              <MateriBab2_1 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab2_2\"\n          element={\n            <ProtectedRoute>\n              <MateriBab2_2 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab2_3\"\n          element={\n            <ProtectedRoute>\n              <MateriBab2_3 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab2_4\"\n          element={\n            <ProtectedRoute>\n              <MateriBab2_4 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab2_5\"\n          element={\n            <ProtectedRoute>\n              <MateriBab2_5 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab2_6\"\n          element={\n            <ProtectedRoute>\n              <MateriBab2_6 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab2_7\"\n          element={\n            <ProtectedRoute>\n              <MateriBab2_7 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk materi kelas 4 bab 3 */}\n        <Route\n          path=\"/materi/materikelas4/materiBab3_1\"\n          element={\n            <ProtectedRoute>\n              <MateriBab3_1 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab3_2\"\n          element={\n            <ProtectedRoute>\n              <MateriBab3_2 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab3_3\"\n          element={\n            <ProtectedRoute>\n              <MateriBab3_3 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab3_4\"\n          element={\n            <ProtectedRoute>\n              <MateriBab3_4 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab3_5\"\n          element={\n            <ProtectedRoute>\n              <MateriBab3_5 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab3_6\"\n          element={\n            <ProtectedRoute>\n              <MateriBab3_6 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk materi kelas 4 bab 4 */}\n        <Route\n          path=\"/materi/materikelas4/materiBab4_1\"\n          element={\n            <ProtectedRoute>\n              <MateriBab4_1 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab4_2\"\n          element={\n            <ProtectedRoute>\n              <MateriBab4_2 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab4_3\"\n          element={\n            <ProtectedRoute>\n              <MateriBab4_3 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab4_4\"\n          element={\n            <ProtectedRoute>\n              <MateriBab4_4 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk materi kelas 4 bab 5 */}\n        <Route\n          path=\"/materi/materikelas4/materiBab5_1\"\n          element={\n            <ProtectedRoute>\n              <MateriBab5_1 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab5_2\"\n          element={\n            <ProtectedRoute>\n              <MateriBab5_2 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab5_3\"\n          element={\n            <ProtectedRoute>\n              <MateriBab5_3 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk materi kelas 4 bab 6 */}\n        <Route\n          path=\"/materi/materikelas4/materiBab6_1\"\n          element={\n            <ProtectedRoute>\n              <MateriBab6_1 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab6_2\"\n          element={\n            <ProtectedRoute>\n              <MateriBab6_2 />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/materi/materikelas4/materiBab6_3\"\n          element={\n            <ProtectedRoute>\n              <MateriBab6_3 />\n            </ProtectedRoute>\n          }\n        />\n        {/* Route untuk halaman admin */}\n        <Route\n          path=\"/admin/register\"\n          element={\n            <AdminRoute>\n              <AdminRegister />\n            </AdminRoute>\n          }\n        />\n        {/* Route untuk halaman guru */}\n        <Route\n          path=\"/guru/dashboard\"\n          element={\n            <ProtectedRoute>\n              <TabGuru />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/tabguru\"\n          element={\n            <ProtectedRoute>\n              <TabGuru />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/admin/dashboard\"\n          element={\n            <AdminRoute>\n              <DashboardAdmin />\n            </AdminRoute>\n          }\n        />\n      </Routes>\n    </Router>\n  );\n}\n","import React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport supabase from '../config/supabase';\r\n\r\nconst AuthContext = createContext(null);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Check for existing session\r\n    const checkUser = async () => {\r\n      try {\r\n        if (!supabase) {\r\n          console.error('Supabase client not initialized');\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        \r\n        const { data: { user: authUser } } = await supabase.auth.getUser();\r\n        \r\n        if (authUser) {\r\n          // Set the app.current_user_id for RLS policies\r\n          try {\r\n            await supabase.rpc('set_current_user_id', {\r\n              user_id: authUser.id\r\n            });\r\n          } catch (rpcError) {\r\n            console.error('Error setting current user ID:', rpcError);\r\n            // Continue anyway\r\n          }\r\n          \r\n          setUser(authUser);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error checking auth state:', error);\r\n        setError(error.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (!supabase) {\r\n      console.error('Supabase client not initialized');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {\r\n      if (session?.user) {\r\n        // Set the app.current_user_id for RLS policies\r\n        try {\r\n          await supabase.rpc('set_current_user_id', {\r\n            user_id: session.user.id\r\n          });\r\n        } catch (rpcError) {\r\n          console.error('Error setting current user ID:', rpcError);\r\n          // Continue anyway\r\n        }\r\n        \r\n        setUser(session.user);\r\n      } else {\r\n        setUser(null);\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    checkUser();\r\n\r\n    return () => {\r\n      subscription?.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  const signIn = async (email, password) => {\r\n    try {\r\n      if (!supabase) {\r\n        throw new Error('Supabase client not initialized');\r\n      }\r\n      \r\n      const { data, error } = await supabase.auth.signInWithPassword({\r\n        email,\r\n        password\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      return data;\r\n    } catch (error) {\r\n      setError(error.message);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const signOut = async () => {\r\n    try {\r\n      if (!supabase) {\r\n        throw new Error('Supabase client not initialized');\r\n      }\r\n      \r\n      const { error } = await supabase.auth.signOut();\r\n      if (error) throw error;\r\n      \r\n      // Clear any local storage data\r\n      localStorage.clear();\r\n      setUser(null);\r\n    } catch (error) {\r\n      setError(error.message);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    loading,\r\n    error,\r\n    signIn,\r\n    signOut\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport default AuthContext;","// Debug koneksi Supabase\r\nimport supabase from \"./config/supabase\";\r\n\r\nconsole.log(\"============ DEBUG KONEKSI SUPABASE ============\");\r\n\r\n// Validasi ketersediaan Supabase client\r\nconst validateClient = () => {\r\n  if (!supabase) {\r\n    console.error(\"[Supabase] Client tidak tersedia\");\r\n    return false;\r\n  }\r\n\r\n  if (typeof supabase.from !== \"function\") {\r\n    console.error(\"[Supabase] Metode from tidak tersedia pada client\");\r\n    return false;\r\n  }\r\n\r\n  // Uji metode from\r\n  try {\r\n    const testTable = supabase.from(\"siswa\");\r\n    if (!testTable || typeof testTable.select !== \"function\") {\r\n      console.error(\r\n        \"[Supabase] Metode from tidak mengembalikan objek yang valid\"\r\n      );\r\n      return false;\r\n    }\r\n    return true;\r\n  } catch (err) {\r\n    console.error(\"[Supabase] Error saat validasi client:\", err);\r\n    return false;\r\n  }\r\n};\r\n\r\n// Periksa ketersediaan supabase client\r\nconsole.log(\"Supabase client tersedia:\", supabase ? \"Ya\" : \"Tidak\");\r\nif (supabase) {\r\n  console.log(\"Supabase URL:\", supabase.supabaseUrl);\r\n  console.log(\"Supabase Key tersedia:\", supabase.supabaseKey ? \"Ya\" : \"Tidak\");\r\n  console.log(\"Metode yang tersedia:\", Object.keys(supabase).join(\", \"));\r\n  console.log(\"Validasi client:\", validateClient() ? \"Valid\" : \"Tidak valid\");\r\n}\r\n\r\n// Ekspor fungsi debug\r\nexport const checkSupabaseConnection = async () => {\r\n  try {\r\n    const isValid = validateClient();\r\n    if (!isValid) {\r\n      return false;\r\n    }\r\n\r\n    // Test koneksi dengan simple query\r\n    const { error } = await supabase.from(\"siswa\").select(\"id_siswa\").limit(1);\r\n\r\n    if (error) {\r\n      console.error(\"[Supabase] Connection test failed:\", error);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  } catch (err) {\r\n    console.error(\"[Supabase] Connection check error:\", err);\r\n    return false;\r\n  }\r\n};\r\n","// src/main.jsx\nimport React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport \"./index.css\";\nimport App from \"./App.jsx\";\nimport { AuthProvider } from \"./context/AuthContext\";\n\n// Import debug connection untuk memeriksa koneksi Supabase saat aplikasi dimulai\nimport './debug_connection';\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\n\nroot.render(\n  <React.StrictMode>\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  </React.StrictMode>\n);\n"],"names":["background","iconSiswa","iconGuru","iconOrtu","WelcomePage","navigate","useNavigate","showRoleSelection","setShowRoleSelection","useState","showAdminLogin","setShowAdminLogin","handleStartClick","handleRoleSelect","role","handleAdminLoginClick","jsxs","jsx","logo","motion","dummySiswa","dummyGuru","staticCredentials","handleOfflineLogin","username","password","user","s","g","loginSiswa","nama","nis","supabase","offlineSiswa","fixedFrom","testTable","fixError","data","error","clientError","url","response","fetchError","loginGuru","nuptk","offlineGuru","loginAdmin","adminData","adminError","updateSiswaAvatar","id_siswa","avatar","anjingAvatar","babiAvatar","bebekAvatar","guritaAvatar","harimauAvatar","kelinciAvatar","kucingAvatar","sapiAvatar","serigalaAvatar","singaAvatar","avatarOptions","Login","setUsername","setPassword","setError","loading","setLoading","loginSuccess","setLoginSuccess","_selectedAvatar","_setSelectedAvatar","setRole","isOfflineMode","setIsOfflineMode","connectionChecking","setConnectionChecking","retryCount","setRetryCount","useEffect","selectedRole","checkConnection","checkOfflineMode","dbError","retryConnection","prevCount","handleLogin","e","connError","userData","completeLogin","adminInfo","err","siswaWithFlag","guruWithFlag","adminCred","admin","handleAvatarSelection","shouldUpdateLocally","updatedUser","userRole","kelas","handleBackToRoleSelection","roleInfo","index","chapters","operations","MainSiswa","selectedChapter","setSelectedChapter","globalProgress","setGlobalProgress","chapterProgress","setChapterProgress","selectedAvatar","setSelectedAvatar","setUserData","completedCategoriesMap","setCompletedCategoriesMap","userDataString","savedAvatar","avatarKey","avatarOperationsKey","operationsData","categoriesCompletedMap","completedLevelsCount","newChapterProgress","chapter","chapterIndex","totalCategoriesInChapter","completedCategoriesInChapter","chapterHasActivity","_","levelIndex","levelKey","completedOperations","totalProgress","acc","val","avatarProgressKey","handleLevelClick","handleClosePopup","isLevelCompleted","getLevelProgress","isCategoryCompleted","operation","level","opIndex","CategoryPage","setSelectedRole","handleRoleClick","handleClose","GamePage","useParams","jawaban","setJawaban","skor","setSkor","soalIndex","setSoalIndex","progress","setProgress","showError","setShowError","shake","setShake","wrongAnswers","setWrongAnswers","isRetryMode","setIsRetryMode","soalStatus","setSoalStatus","bankSoal","getSoal","soalSalahIndex","getTotalSoal","storedProgress","totalSoal","updateProgress","isBenar","poinSoal","progressIncrement","newProgress","currentScore","storedScores","avatarProgress","pathParts","operationData","handleJawaban","soalSekarang","currentWrongSoalIndex","updatedSoalStatus","promptRetryWrongQuestions","finishGame","handleKeyPress","storedWrongAnswers","storedSoalStatus","storedScore","AnimatePresence","HasilPage","score","levelInfo","setLevelInfo","currentLevelKey","babMatch","levelMatch","timestamp","uniqueKey","levelScores","operationsKey","babKey","chapLevels","key","keyParts","chapProgress","confettiContainer","handleNextLevel","getScoreMessage","scoreNum","maxScore","scorePercentage","Skor","progressData","setProgressData","lastClickedChapter","lastClickedLevel","operationTypes","avatarData","existingKelas","userDataFromStorage","siswaData","query","totalScore","completedLevels","highestScore","recentActivity","completedOperationsByLevel","uniqueLevels","bab","babNumber","levelNumber","operationLabel","activityTimestamp","a","b","getProgressPercentage","handleBackToMenu","kelasUser","getActivitiesByChapterLevelAndOperation","activity","formatActivityDate","date","HasilRetryPage","wrongQuestionsCount","setWrongQuestionsCount","handleRetry","handleSkip","categoryOrder","categoryTranslations","Category","location","useLocation","bubbles","setBubbles","currentChapter","setCurrentChapter","currentLevel","setCurrentLevel","setCompletedOperations","availableCategories","setAvailableCategories","newBubbles","i","params","storedChapter","storedLevel","checkCompletedOperations","completed","handleCategoryClick","category","type","bubble","getNilaiSiswa","idSiswa","getRiwayatSiswa","getDummyHistoryData","studentId","materiList","historyCount","dummyHistory","today","randomDaysAgo","randomMateri","resolve","StudentHistoryModal","isOpen","onClose","student","history","setHistory","useDummyData","setUseDummyData","dataSource","setDataSource","filterKategori","setFilterKategori","filteredHistory","setFilteredHistory","fetchStudentHistory","err2","sortedData","dateA","dateB","filtered","item","_a","getUniqueKategori","kategoriSet","kategori","exportToCSV","csvContent","tanggal","materiName","_b","nilai","row","benar","salah","blob","link","Fragment","_c","ModalCatatan","teacherId","studentName","catatan","setCatatan","setUser","isUserLoading","setIsUserLoading","isLoggedIn","handleSubmit","jakartaTime","DateTime","catatanData","catatanError","relasiError","ModalLihatCatatan","notes","onDeleteNote","formatJakartaTime","isoString","note","EditStudentModal","onUpdate","formData","setFormData","parents","setParents","animalAvatars","fetchParents","checkParentAssignments","id_wali","handleChange","name","value","prev","parent","AddStudentModal","onAdd","KelasModal","availableClasses","onConfirm","handleSelect","targetClass","message","TabGuru","activeTab","setActiveTab","searchQuery","setSearchQuery","selectedClass","setSelectedClass","students","setStudents","teacherProfile","setTeacherProfile","currentUserId","setCurrentUserId","historyModal","setHistoryModal","classes","setClasses","setNotes","scores","setScores","kemajuan","setKemajuan","modalCatatan","setModalCatatan","lihatCatatanModal","setLihatCatatanModal","editModal","setEditModal","addModal","setAddModal","kelasModal","setKelasModal","fetchTeacherData","fetchStudents","classesData","classesError","studentsData","studentsError","notesData","notesError","scoresData","scoresError","kemajuanData","kemajuanError","userId","kelasArray","k","normalizeClass","roleText","classNumbers","formattedStudents","hasParentInfo","createSampleStudents","sampleStudents","classNumber","classAge","kelasString","str","match","handleLogout","closeAddModal","handleStudentAdd","newStudent","formattedStudent","filterStudents","handleSendNote","handleViewHistory","closeHistoryModal","handleViewReport","handleDeleteStudent","nilaiError","closeModalCatatan","handleLihatCatatan","studentNotes","n","closeLihatCatatanModal","handleDeleteNote","noteId","siswaCatatanError","updatedNotes","prevState","studentIdInModal","filteredNotesForModal","sc","handleNaikKelas","currentClass","handlePindahKelas","currentClassNumber","handleKelasConfirm","kelasData","kelasError","updateError","action","renderTabContent","filteredStudents","numA","numB","getStudentAvatar","handleEditStudent","siswa","handleStudentUpdate","closeEditModal","bronzeBadge","silverBadge","goldBadge","backgroundImage","MainSiswa2","handleChapterClick","handleViewScore","MainSiswa4","levels","Category4_Bab1","selectedLevel","setSelectedLevel","showPopup","setShowPopup","userProgress","setUserProgress","setCompletedLevels","animateBackground","setAnimateBackground","showHint","setShowHint","level1Ref","useRef","stars","clouds","progressKey","savedProgress","hintTimer","triggerConfetti","confetti","openLevel1","level1","closePopup","handleSubChapterClick","subChapter","handleGameClick","game","handleBackClick","levelNum","star","cloud","React","Category4_Bab2","Category4_Bab3","Category4_Bab4","Category4_Bab5","Category4_Bab6","ProtectedRoute","children","Navigate","AdminRoute","App","setDbError","checkDbConnection","isConnected","interval","Router","Routes","Route","Penjumlahan","Pembagian","Pengurangan","Perkalian","PengukuranLuas","PengukuranVolume","PetualanganBilanganCacah","KomposisiDanPengurangan","LatihanPerkalianPembagian","FaktorKelipatanDragDropGame","FractionAdventure","FractionGame","GamePecahanDesimal","GamePecahanDesimalPersen","GamePolaBilangan","GamePolaBilanganLevel2","Bab4_Level1","Bab4_Level2","Bab5_Level1","Bab6_Level1","MateriPenjumlahan","MateriPengurangan","MateriPerkalian","MateriPembagian","MateriBab1_1","MateriBab1_2","MateriBab1_3","MateriBab1_4","MateriBab1_5","MateriBab1_6","MateriBab1_7","MateriBab2_1","MateriBab2_2","MateriBab2_3","MateriBab2_4","MateriBab2_5","MateriBab2_6","MateriBab2_7","MateriBab3_1","MateriBab3_2","MateriBab3_3","MateriBab3_4","MateriBab3_5","MateriBab3_6","MateriBab4_1","MateriBab4_2","MateriBab4_3","MateriBab4_4","MateriBab5_1","MateriBab5_2","MateriBab5_3","MateriBab6_1","MateriBab6_2","MateriBab6_3","AdminRegister","DashboardAdmin","AuthContext","createContext","AuthProvider","checkUser","authUser","rpcError","subscription","event","session","email","validateClient","root","ReactDOM"],"mappings":"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"}